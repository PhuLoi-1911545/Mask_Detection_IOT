/*! For license information please see main.9bd24247.js.LICENSE.txt */
!function(){var e={7228:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},3646:function(e,t,n){var r=n(7228);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},1506:function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},4575:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},3913:function(e){function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},9713:function(e){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},7154:function(e){function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},9754:function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},2205:function(e,t,n){var r=n(9489);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},5318:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},862:function(e,t,n){var r=n(8).default;function i(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}e.exports=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var s=o?Object.getOwnPropertyDescriptor(e,u):null;s&&(s.get||s.set)?Object.defineProperty(a,u,s):a[u]=e[u]}return a.default=e,n&&n.set(e,a),a},e.exports.__esModule=!0,e.exports.default=e.exports},6860:function(e){e.exports=function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},8206:function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},693:function(e,t,n){var r=n(9713);e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&i.push.apply(i,Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach((function(t){r(e,t,n[t])}))}return e},e.exports.__esModule=!0,e.exports.default=e.exports},6479:function(e,t,n){var r=n(7316);e.exports=function(e,t){if(null==e)return{};var n,i,a=r(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a},e.exports.__esModule=!0,e.exports.default=e.exports},7316:function(e){e.exports=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i},e.exports.__esModule=!0,e.exports.default=e.exports},8585:function(e,t,n){var r=n(8).default,i=n(1506);e.exports=function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)},e.exports.__esModule=!0,e.exports.default=e.exports},9489:function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},319:function(e,t,n){var r=n(3646),i=n(6860),a=n(379),o=n(8206);e.exports=function(e){return r(e)||i(e)||a(e)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},8:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},379:function(e,t,n){var r=n(7228);e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},7757:function(e,t,n){e.exports=n(9727)},1753:function(e,t){!function(e){"use strict";function t(e){return Array.prototype.slice.call(e)}function n(e){return new Promise((function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function r(e,t,r){var i,a=new Promise((function(a,o){n(i=e[t].apply(e,r)).then(a,o)}));return a.request=i,a}function i(e,t,n){var i=r(e,t,n);return i.then((function(e){if(e)return new l(e,i.request)}))}function a(e,t,n){n.forEach((function(n){Object.defineProperty(e.prototype,n,{get:function(){return this[t][n]},set:function(e){this[t][n]=e}})}))}function o(e,t,n,i){i.forEach((function(i){i in n.prototype&&(e.prototype[i]=function(){return r(this[t],i,arguments)})}))}function u(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return this[t][r].apply(this[t],arguments)})}))}function s(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return i(this[t],r,arguments)})}))}function c(e){this._index=e}function l(e,t){this._cursor=e,this._request=t}function f(e){this._store=e}function d(e){this._tx=e,this.complete=new Promise((function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}}))}function h(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new d(n)}function p(e){this._db=e}function v(e,t,n){var i=r(indexedDB,"open",[e,t]),a=i.request;return a&&(a.onupgradeneeded=function(e){n&&n(new h(a.result,e.oldVersion,a.transaction))}),i.then((function(e){return new p(e)}))}function y(e){return r(indexedDB,"deleteDatabase",[e])}a(c,"_index",["name","keyPath","multiEntry","unique"]),o(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),s(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),a(l,"_cursor",["direction","key","primaryKey","value"]),o(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(e){e in IDBCursor.prototype&&(l.prototype[e]=function(){var t=this,r=arguments;return Promise.resolve().then((function(){return t._cursor[e].apply(t._cursor,r),n(t._request).then((function(e){if(e)return new l(e,t._request)}))}))})})),f.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},f.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},a(f,"_store",["name","keyPath","indexNames","autoIncrement"]),o(f,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),s(f,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),u(f,"_store",IDBObjectStore,["deleteIndex"]),d.prototype.objectStore=function(){return new f(this._tx.objectStore.apply(this._tx,arguments))},a(d,"_tx",["objectStoreNames","mode"]),u(d,"_tx",IDBTransaction,["abort"]),h.prototype.createObjectStore=function(){return new f(this._db.createObjectStore.apply(this._db,arguments))},a(h,"_db",["name","version","objectStoreNames"]),u(h,"_db",IDBDatabase,["deleteObjectStore","close"]),p.prototype.transaction=function(){return new d(this._db.transaction.apply(this._db,arguments))},a(p,"_db",["name","version","objectStoreNames"]),u(p,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(e){[f,c].forEach((function(n){e in n.prototype&&(n.prototype[e.replace("open","iterate")]=function(){var n=t(arguments),r=n[n.length-1],i=this._store||this._index,a=i[e].apply(i,n.slice(0,-1));a.onsuccess=function(){r(a.result)}})}))})),[c,f].forEach((function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var n=this,r=[];return new Promise((function(i){n.iterateCursor(e,(function(e){e?(r.push(e.value),void 0===t||r.length!=t?e.continue():i(r)):i(r)}))}))})})),e.openDb=v,e.deleteDb=y,Object.defineProperty(e,"__esModule",{value:!0})}(t)},1694:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var a=typeof n;if("string"===a||"number"===a)e.push(n);else if(Array.isArray(n)){if(n.length){var o=i.apply(null,n);o&&e.push(o)}}else if("object"===a)if(n.toString===Object.prototype.toString)for(var u in n)r.call(n,u)&&n[u]&&e.push(u);else e.push(n.toString())}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},2176:function(e){"use strict";e.exports=function(e,t,n,r,i,a,o,u){if(!e){var s;if(void 0===t)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,a,o,u],l=0;(s=new Error(t.replace(/%s/g,(function(){return c[l++]})))).name="Invariant Violation"}throw s.framesToPop=1,s}}},1725:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,a){for(var o,u,s=i(e),c=1;c<arguments.length;c++){for(var l in o=Object(arguments[c]))n.call(o,l)&&(s[l]=o[l]);if(t){u=t(o);for(var f=0;f<u.length;f++)r.call(o,u[f])&&(s[u[f]]=o[u[f]])}}return s}},888:function(e,t,n){"use strict";var r=n(9047);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},2007:function(e,t,n){e.exports=n(888)()},9047:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},4463:function(e,t,n){"use strict";var r=n(2791),i=n(1725),a=n(5296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var u=new Set,s={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)u.add(t[e])}var f=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h=Object.prototype.hasOwnProperty,p={},v={};function y(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new y(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new y(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new y(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new y(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new y(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new y(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new y(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new y(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new y(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function k(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(v,e)||!h.call(p,e)&&(d.test(e)?v[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new y(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new y(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=60103,E=60106,_=60107,I=60108,T=60114,S=60109,C=60110,N=60112,P=60113,A=60120,O=60115,R=60116,D=60121,L=60128,M=60129,F=60130,U=60131;if("function"===typeof Symbol&&Symbol.for){var j=Symbol.for;x=j("react.element"),E=j("react.portal"),_=j("react.fragment"),I=j("react.strict_mode"),T=j("react.profiler"),S=j("react.provider"),C=j("react.context"),N=j("react.forward_ref"),P=j("react.suspense"),A=j("react.suspense_list"),O=j("react.memo"),R=j("react.lazy"),D=j("react.block"),j("react.scope"),L=j("react.opaque.id"),M=j("react.debug_trace_mode"),F=j("react.offscreen"),U=j("react.legacy_hidden")}var V,B="function"===typeof Symbol&&Symbol.iterator;function q(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=B&&e[B]||e["@@iterator"])?e:null}function z(e){if(void 0===V)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);V=t&&t[1]||""}return"\n"+V+e}var K=!1;function H(e,t){if(!e||K)return"";K=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(s){var r=s}Reflect.construct(e,[],t)}else{try{t.call()}catch(s){r=s}e.call(t.prototype)}else{try{throw Error()}catch(s){r=s}e()}}catch(s){if(s&&r&&"string"===typeof s.stack){for(var i=s.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=u);break}}}finally{K=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function W(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=H(e.type,!1);case 11:return e=H(e.type.render,!1);case 22:return e=H(e.type._render,!1);case 1:return e=H(e.type,!0);default:return""}}function G(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case E:return"Portal";case T:return"Profiler";case I:return"StrictMode";case P:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case N:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case O:return G(e.type);case D:return G(e._render);case R:t=e._payload,e=e._init;try{return G(e(t))}catch(n){}}return null}function Z(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=Q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function $(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function J(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Z(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=Z(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,Z(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&J(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ae(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Z(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ue(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Z(n)}}function ce(e,t){var n=Z(t.value),r=Z(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var fe="http://www.w3.org/1999/xhtml",de="http://www.w3.org/2000/svg";function he(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?he(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ve,ye,me=(ye=function(e,t){if(e.namespaceURI!==de||"innerHTML"in e)e.innerHTML=t;else{for((ve=ve||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ve.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ye(e,t)}))}:ye);function ge(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ke={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},be=["Webkit","ms","Moz","O"];function we(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ke.hasOwnProperty(e)&&ke[e]?(""+t).trim():t+"px"}function xe(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=we(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ke).forEach((function(e){be.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ke[t]=ke[e]}))}));var Ee=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _e(e,t){if(t){if(Ee[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Ie(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Te(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ce=null,Ne=null;function Pe(e){if(e=ri(e)){if("function"!==typeof Se)throw Error(o(280));var t=e.stateNode;t&&(t=ai(t),Se(e.stateNode,e.type,t))}}function Ae(e){Ce?Ne?Ne.push(e):Ne=[e]:Ce=e}function Oe(){if(Ce){var e=Ce,t=Ne;if(Ne=Ce=null,Pe(e),t)for(e=0;e<t.length;e++)Pe(t[e])}}function Re(e,t){return e(t)}function De(e,t,n,r,i){return e(t,n,r,i)}function Le(){}var Me=Re,Fe=!1,Ue=!1;function je(){null===Ce&&null===Ne||(Le(),Oe())}function Ve(e,t){var n=e.stateNode;if(null===n)return null;var r=ai(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Be=!1;if(f)try{var qe={};Object.defineProperty(qe,"passive",{get:function(){Be=!0}}),window.addEventListener("test",qe,qe),window.removeEventListener("test",qe,qe)}catch(ye){Be=!1}function ze(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Ke=!1,He=null,We=!1,Ge=null,Ze={onError:function(e){Ke=!0,He=e}};function Qe(e,t,n,r,i,a,o,u,s){Ke=!1,He=null,ze.apply(Ze,arguments)}function Ye(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function $e(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Je(e){if(Ye(e)!==e)throw Error(o(188))}function Xe(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ye(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Je(i),e;if(a===r)return Je(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=a;break}if(s===r){u=!0,r=i,n=a;break}s=s.sibling}if(!u){for(s=a.child;s;){if(s===n){u=!0,n=a,r=i;break}if(s===r){u=!0,r=a,n=i;break}s=s.sibling}if(!u)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,it,at=!1,ot=[],ut=null,st=null,ct=null,lt=new Map,ft=new Map,dt=[],ht="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function vt(e,t){switch(e){case"focusin":case"focusout":ut=null;break;case"dragenter":case"dragleave":st=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ft.delete(t.pointerId)}}function yt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e=pt(t,n,r,i,a),null!==t&&(null!==(t=ri(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function mt(e){var t=ni(e.target);if(null!==t){var n=Ye(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=$e(n)))return e.blockedOn=t,void it(e.lanePriority,(function(){a.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function gt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ri(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function kt(e,t,n){gt(e)&&n.delete(t)}function bt(){for(at=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=ri(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==ut&&gt(ut)&&(ut=null),null!==st&&gt(st)&&(st=null),null!==ct&&gt(ct)&&(ct=null),lt.forEach(kt),ft.forEach(kt)}function wt(e,t){e.blockedOn===t&&(e.blockedOn=null,at||(at=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,bt)))}function xt(e){function t(t){return wt(t,e)}if(0<ot.length){wt(ot[0],e);for(var n=1;n<ot.length;n++){var r=ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==ut&&wt(ut,e),null!==st&&wt(st,e),null!==ct&&wt(ct,e),lt.forEach(t),ft.forEach(t),n=0;n<dt.length;n++)(r=dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<dt.length&&null===(n=dt[0]).blockedOn;)mt(n),null===n.blockedOn&&dt.shift()}function Et(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _t={animationend:Et("Animation","AnimationEnd"),animationiteration:Et("Animation","AnimationIteration"),animationstart:Et("Animation","AnimationStart"),transitionend:Et("Transition","TransitionEnd")},It={},Tt={};function St(e){if(It[e])return It[e];if(!_t[e])return e;var t,n=_t[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tt)return It[e]=n[t];return e}f&&(Tt=document.createElement("div").style,"AnimationEvent"in window||(delete _t.animationend.animation,delete _t.animationiteration.animation,delete _t.animationstart.animation),"TransitionEvent"in window||delete _t.transitionend.transition);var Ct=St("animationend"),Nt=St("animationiteration"),Pt=St("animationstart"),At=St("transitionend"),Ot=new Map,Rt=new Map,Dt=["abort","abort",Ct,"animationEnd",Nt,"animationIteration",Pt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",At,"transitionEnd","waiting","waiting"];function Lt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Rt.set(r,t),Ot.set(r,i),c(i,[r])}}(0,a.unstable_now)();var Mt=8;function Ft(e){if(0!==(1&e))return Mt=15,1;if(0!==(2&e))return Mt=14,2;if(0!==(4&e))return Mt=13,4;var t=24&e;return 0!==t?(Mt=12,t):0!==(32&e)?(Mt=11,32):0!==(t=192&e)?(Mt=10,t):0!==(256&e)?(Mt=9,256):0!==(t=3584&e)?(Mt=8,t):0!==(4096&e)?(Mt=7,4096):0!==(t=4186112&e)?(Mt=6,t):0!==(t=62914560&e)?(Mt=5,t):67108864&e?(Mt=4,67108864):0!==(134217728&e)?(Mt=3,134217728):0!==(t=805306368&e)?(Mt=2,t):0!==(1073741824&e)?(Mt=1,1073741824):(Mt=8,e)}function Ut(e,t){var n=e.pendingLanes;if(0===n)return Mt=0;var r=0,i=0,a=e.expiredLanes,o=e.suspendedLanes,u=e.pingedLanes;if(0!==a)r=a,i=Mt=15;else if(0!==(a=134217727&n)){var s=a&~o;0!==s?(r=Ft(s),i=Mt):0!==(u&=a)&&(r=Ft(u),i=Mt)}else 0!==(a=n&~o)?(r=Ft(a),i=Mt):0!==u&&(r=Ft(u),i=Mt);if(0===r)return 0;if(r=n&((0>(r=31-Kt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&o)){if(Ft(t),i<=Mt)return t;Mt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Kt(t)),r|=e[n],t&=~i;return r}function jt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Vt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Bt(24&~t))?Vt(10,t):e;case 10:return 0===(e=Bt(192&~t))?Vt(8,t):e;case 8:return 0===(e=Bt(3584&~t))&&(0===(e=Bt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Bt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function Bt(e){return e&-e}function qt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function zt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Kt(t)]=n}var Kt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Ht(e)/Wt|0)|0},Ht=Math.log,Wt=Math.LN2;var Gt=a.unstable_UserBlockingPriority,Zt=a.unstable_runWithPriority,Qt=!0;function Yt(e,t,n,r){Fe||Le();var i=Jt,a=Fe;Fe=!0;try{De(i,e,t,n,r)}finally{(Fe=a)||je()}}function $t(e,t,n,r){Zt(Gt,Jt.bind(null,e,t,n,r))}function Jt(e,t,n,r){var i;if(Qt)if((i=0===(4&t))&&0<ot.length&&-1<ht.indexOf(e))e=pt(null,e,t,n,r),ot.push(e);else{var a=Xt(e,t,n,r);if(null===a)i&&vt(e,r);else{if(i){if(-1<ht.indexOf(e))return e=pt(a,e,t,n,r),void ot.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return ut=yt(ut,e,t,n,r,i),!0;case"dragenter":return st=yt(st,e,t,n,r,i),!0;case"mouseover":return ct=yt(ct,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return lt.set(a,yt(lt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,ft.set(a,yt(ft.get(a)||null,e,t,n,r,i)),!0}return!1}(a,e,t,n,r))return;vt(e,r)}Lr(e,t,r,null,n)}}}function Xt(e,t,n,r){var i=Te(r);if(null!==(i=ni(i))){var a=Ye(i);if(null===a)i=null;else{var o=a.tag;if(13===o){if(null!==(i=$e(a)))return i;i=null}else if(3===o){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Lr(e,t,r,i,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,i="value"in en?en.value:en.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return nn=i.slice(e,1<t?1-t:void 0)}function an(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function un(){return!1}function sn(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?on:un,this.isPropagationStopped=un,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var cn,ln,fn,dn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hn=sn(dn),pn=i({},dn,{view:0,detail:0}),vn=sn(pn),yn=i({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fn&&(fn&&"mousemove"===e.type?(cn=e.screenX-fn.screenX,ln=e.screenY-fn.screenY):ln=cn=0,fn=e),cn)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),mn=sn(yn),gn=sn(i({},yn,{dataTransfer:0})),kn=sn(i({},pn,{relatedTarget:0})),bn=sn(i({},dn,{animationName:0,elapsedTime:0,pseudoElement:0})),wn=i({},dn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xn=sn(wn),En=sn(i({},dn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},In={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Tn[e])&&!!t[e]}function Cn(){return Sn}var Nn=i({},pn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=an(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?In[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?an(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?an(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Pn=sn(Nn),An=sn(i({},yn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),On=sn(i({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Rn=sn(i({},dn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=i({},yn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ln=sn(Dn),Mn=[9,13,27,32],Fn=f&&"CompositionEvent"in window,Un=null;f&&"documentMode"in document&&(Un=document.documentMode);var jn=f&&"TextEvent"in window&&!Un,Vn=f&&(!Fn||Un&&8<Un&&11>=Un),Bn=String.fromCharCode(32),qn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Mn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Hn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Zn(e,t,n,r){Ae(r),0<(t=Fr(t,"onChange")).length&&(n=new hn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Qn=null,Yn=null;function $n(e){Nr(e,0)}function Jn(e){if($(ii(e)))return e}function Xn(e,t){if("change"===e)return t}var er=!1;if(f){var tr;if(f){var nr="oninput"in document;if(!nr){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),nr="function"===typeof rr.oninput}tr=nr}else tr=!1;er=tr&&(!document.documentMode||9<document.documentMode)}function ir(){Qn&&(Qn.detachEvent("onpropertychange",ar),Yn=Qn=null)}function ar(e){if("value"===e.propertyName&&Jn(Yn)){var t=[];if(Zn(t,Yn,e,Te(e)),e=$n,Fe)e(t);else{Fe=!0;try{Re(e,t)}finally{Fe=!1,je()}}}}function or(e,t,n){"focusin"===e?(ir(),Yn=n,(Qn=t).attachEvent("onpropertychange",ar)):"focusout"===e&&ir()}function ur(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Yn)}function sr(e,t){if("click"===e)return Jn(t)}function cr(e,t){if("input"===e||"change"===e)return Jn(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},fr=Object.prototype.hasOwnProperty;function dr(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!fr.call(t,n[r])||!lr(e[n[r]],t[n[r]]))return!1;return!0}function hr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pr(e,t){var n,r=hr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=hr(r)}}function vr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?vr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function yr(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=J((e=t.contentWindow).document)}return t}function mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var gr=f&&"documentMode"in document&&11>=document.documentMode,kr=null,br=null,wr=null,xr=!1;function Er(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xr||null==kr||kr!==J(r)||("selectionStart"in(r=kr)&&mr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},wr&&dr(wr,r)||(wr=r,0<(r=Fr(br,"onSelect")).length&&(t=new hn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=kr)))}Lt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Lt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Lt(Dt,2);for(var _r="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Ir=0;Ir<_r.length;Ir++)Rt.set(_r[Ir],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tr));function Cr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,u,s,c){if(Qe.apply(this,arguments),Ke){if(!Ke)throw Error(o(198));var l=He;Ke=!1,He=null,We||(We=!0,Ge=l)}}(r,t,void 0,e),e.currentTarget=null}function Nr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Cr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Cr(i,u,c),a=s}}}if(We)throw e=Ge,We=!1,Ge=null,e}function Pr(e,t){var n=oi(t),r=e+"__bubble";n.has(r)||(Dr(t,e,2,!1),n.add(r))}var Ar="_reactListening"+Math.random().toString(36).slice(2);function Or(e){e[Ar]||(e[Ar]=!0,u.forEach((function(t){Sr.has(t)||Rr(t,!1,e,null),Rr(t,!0,e,null)})))}function Rr(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=n;if("selectionchange"===e&&9!==n.nodeType&&(a=n.ownerDocument),null!==r&&!t&&Sr.has(e)){if("scroll"!==e)return;i|=2,a=r}var o=oi(a),u=e+"__"+(t?"capture":"bubble");o.has(u)||(t&&(i|=4),Dr(a,e,i,t),o.add(u))}function Dr(e,t,n,r){var i=Rt.get(t);switch(void 0===i?2:i){case 0:i=Yt;break;case 1:i=$t;break;default:i=Jt}n=i.bind(null,t,n,e),i=void 0,!Be||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Lr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=ni(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}!function(e,t,n){if(Ue)return e(t,n);Ue=!0;try{Me(e,t,n)}finally{Ue=!1,je()}}((function(){var r=a,i=Te(n),o=[];e:{var u=Ot.get(e);if(void 0!==u){var s=hn,c=e;switch(e){case"keypress":if(0===an(n))break e;case"keydown":case"keyup":s=Pn;break;case"focusin":c="focus",s=kn;break;case"focusout":c="blur",s=kn;break;case"beforeblur":case"afterblur":s=kn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=On;break;case Ct:case Nt:case Pt:s=bn;break;case At:s=Rn;break;case"scroll":s=vn;break;case"wheel":s=Ln;break;case"copy":case"cut":case"paste":s=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=An}var l=0!==(4&t),f=!l&&"scroll"===e,d=l?null!==u?u+"Capture":null:u;l=[];for(var h,p=r;null!==p;){var v=(h=p).stateNode;if(5===h.tag&&null!==v&&(h=v,null!==d&&(null!=(v=Ve(p,d))&&l.push(Mr(p,v,h)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(c=n.relatedTarget||n.fromElement)||!ni(c)&&!c[ei])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?ni(c):null)&&(c!==(f=Ye(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=mn,v="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=An,v="onPointerLeave",d="onPointerEnter",p="pointer"),f=null==s?u:ii(s),h=null==c?u:ii(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=h,v=null,ni(i)===r&&((l=new l(d,p+"enter",c,n,i)).target=h,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(d=c,p=0,h=l=s;h;h=Ur(h))p++;for(h=0,v=d;v;v=Ur(v))h++;for(;0<p-h;)l=Ur(l),p--;for(;0<h-p;)d=Ur(d),h--;for(;p--;){if(l===d||null!==d&&l===d.alternate)break e;l=Ur(l),d=Ur(d)}l=null}else l=null;null!==s&&jr(o,u,s,l,!1),null!==c&&null!==f&&jr(o,f,c,l,!0)}if("select"===(s=(u=r?ii(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=Xn;else if(Gn(u))if(er)y=cr;else{y=ur;var m=or}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=sr);switch(y&&(y=y(e,r))?Zn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ie(u,"number",u.value)),m=r?ii(r):window,e){case"focusin":(Gn(m)||"true"===m.contentEditable)&&(kr=m,br=r,wr=null);break;case"focusout":wr=br=kr=null;break;case"mousedown":xr=!0;break;case"contextmenu":case"mouseup":case"dragend":xr=!1,Er(o,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":Er(o,n,i)}var g;if(Fn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Hn?zn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Vn&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Hn&&(g=rn()):(tn="value"in(en=i)?en.value:en.textContent,Hn=!0)),0<(m=Fr(r,k)).length&&(k=new En(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=Kn(n))&&(k.data=g))),(g=jn?function(e,t){switch(e){case"compositionend":return Kn(t);case"keypress":return 32!==t.which?null:(qn=!0,Bn);case"textInput":return(e=t.data)===Bn&&qn?null:e;default:return null}}(e,n):function(e,t){if(Hn)return"compositionend"===e||!Fn&&zn(e,t)?(e=rn(),nn=tn=en=null,Hn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Vn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Fr(r,"onBeforeInput")).length&&(i=new En("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Nr(o,t)}))}function Mr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Fr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Ve(e,n))&&r.unshift(Mr(e,a,i)),null!=(a=Ve(e,t))&&r.push(Mr(e,a,i))),e=e.return}return r}function Ur(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function jr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Ve(n,a))&&o.unshift(Mr(n,s,u)):i||null!=(s=Ve(n,a))&&o.push(Mr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function Vr(){}var Br=null,qr=null;function zr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Kr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Hr="function"===typeof setTimeout?setTimeout:void 0,Wr="function"===typeof clearTimeout?clearTimeout:void 0;function Gr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Zr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Qr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Yr=0;var $r=Math.random().toString(36).slice(2),Jr="__reactFiber$"+$r,Xr="__reactProps$"+$r,ei="__reactContainer$"+$r,ti="__reactEvents$"+$r;function ni(e){var t=e[Jr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ei]||n[Jr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Qr(e);null!==e;){if(n=e[Jr])return n;e=Qr(e)}return t}n=(e=n).parentNode}return null}function ri(e){return!(e=e[Jr]||e[ei])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ii(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ai(e){return e[Xr]||null}function oi(e){var t=e[ti];return void 0===t&&(t=e[ti]=new Set),t}var ui=[],si=-1;function ci(e){return{current:e}}function li(e){0>si||(e.current=ui[si],ui[si]=null,si--)}function fi(e,t){si++,ui[si]=e.current,e.current=t}var di={},hi=ci(di),pi=ci(!1),vi=di;function yi(e,t){var n=e.type.contextTypes;if(!n)return di;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function mi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function gi(){li(pi),li(hi)}function ki(e,t,n){if(hi.current!==di)throw Error(o(168));fi(hi,t),fi(pi,n)}function bi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(o(108,G(t)||"Unknown",a));return i({},n,r)}function wi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||di,vi=hi.current,fi(hi,e),fi(pi,pi.current),!0}function xi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=bi(e,t,vi),r.__reactInternalMemoizedMergedChildContext=e,li(pi),li(hi),fi(hi,e)):li(pi),fi(pi,n)}var Ei=null,_i=null,Ii=a.unstable_runWithPriority,Ti=a.unstable_scheduleCallback,Si=a.unstable_cancelCallback,Ci=a.unstable_shouldYield,Ni=a.unstable_requestPaint,Pi=a.unstable_now,Ai=a.unstable_getCurrentPriorityLevel,Oi=a.unstable_ImmediatePriority,Ri=a.unstable_UserBlockingPriority,Di=a.unstable_NormalPriority,Li=a.unstable_LowPriority,Mi=a.unstable_IdlePriority,Fi={},Ui=void 0!==Ni?Ni:function(){},ji=null,Vi=null,Bi=!1,qi=Pi(),zi=1e4>qi?Pi:function(){return Pi()-qi};function Ki(){switch(Ai()){case Oi:return 99;case Ri:return 98;case Di:return 97;case Li:return 96;case Mi:return 95;default:throw Error(o(332))}}function Hi(e){switch(e){case 99:return Oi;case 98:return Ri;case 97:return Di;case 96:return Li;case 95:return Mi;default:throw Error(o(332))}}function Wi(e,t){return e=Hi(e),Ii(e,t)}function Gi(e,t,n){return e=Hi(e),Ti(e,t,n)}function Zi(){if(null!==Vi){var e=Vi;Vi=null,Si(e)}Qi()}function Qi(){if(!Bi&&null!==ji){Bi=!0;var e=0;try{var t=ji;Wi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),ji=null}catch(n){throw null!==ji&&(ji=ji.slice(e+1)),Ti(Oi,Zi),n}finally{Bi=!1}}}var Yi=w.ReactCurrentBatchConfig;function $i(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Ji=ci(null),Xi=null,ea=null,ta=null;function na(){ta=ea=Xi=null}function ra(e){var t=Ji.current;li(Ji),e.type._context._currentValue=t}function ia(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function aa(e,t){Xi=e,ta=ea=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Fo=!0),e.firstContext=null)}function oa(e,t){if(ta!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(ta=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ea){if(null===Xi)throw Error(o(308));ea=t,Xi.dependencies={lanes:0,firstContext:t,responders:null}}else ea=ea.next=t;return e._currentValue}var ua=!1;function sa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ca(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function la(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fa(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function da(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ha(e,t,n,r){var a=e.updateQueue;ua=!1;var o=a.firstBaseUpdate,u=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var c=s,l=c.next;c.next=null,null===u?o=l:u.next=l,u=c;var f=e.alternate;if(null!==f){var d=(f=f.updateQueue).lastBaseUpdate;d!==u&&(null===d?f.firstBaseUpdate=l:d.next=l,f.lastBaseUpdate=c)}}if(null!==o){for(d=a.baseState,u=0,f=l=c=null;;){s=o.lane;var h=o.eventTime;if((r&s)===s){null!==f&&(f=f.next={eventTime:h,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,v=o;switch(s=t,h=n,v.tag){case 1:if("function"===typeof(p=v.payload)){d=p.call(h,d,s);break e}d=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(s="function"===typeof(p=v.payload)?p.call(h,d,s):p)||void 0===s)break e;d=i({},d,s);break e;case 2:ua=!0}}null!==o.callback&&(e.flags|=32,null===(s=a.effects)?a.effects=[o]:s.push(o))}else h={eventTime:h,lane:s,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===f?(l=f=h,c=d):f=f.next=h,u|=s;if(null===(o=o.next)){if(null===(s=a.shared.pending))break;o=s.next,s.next=null,a.lastBaseUpdate=s,a.shared.pending=null}}null===f&&(c=d),a.baseState=c,a.firstBaseUpdate=l,a.lastBaseUpdate=f,Bu|=u,e.lanes=u,e.memoizedState=d}}function pa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var va=(new r.Component).refs;function ya(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ma={isMounted:function(e){return!!(e=e._reactInternals)&&Ye(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ds(),i=hs(e),a=la(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),fa(e,a),ps(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ds(),i=hs(e),a=la(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),fa(e,a),ps(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ds(),r=hs(e),i=la(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),fa(e,i),ps(e,r,n)}};function ga(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!dr(n,r)||!dr(i,a))}function ka(e,t,n){var r=!1,i=di,a=t.contextType;return"object"===typeof a&&null!==a?a=oa(a):(i=mi(t)?vi:hi.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?yi(e,i):di),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ma,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function ba(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ma.enqueueReplaceState(t,t.state,null)}function wa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=va,sa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=oa(a):(a=mi(t)?vi:hi.current,i.context=yi(e,a)),ha(e,n,i,r),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ya(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ma.enqueueReplaceState(i,i.state,null),ha(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var xa=Array.isArray;function Ea(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===va&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function _a(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Ia(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ws(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function u(t){return e&&null===t.alternate&&(t.flags=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Ys(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=Ea(e,t,n),r.return=e,r):((r=Gs(n.type,n.key,n.props,null,e.mode,r)).ref=Ea(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=$s(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Zs(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Ys(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Gs(t.type,t.key,t.props,null,e.mode,n)).ref=Ea(e,null,t),n.return=e,n;case E:return(t=$s(t,e.mode,n)).return=e,t}if(xa(t)||q(t))return(t=Zs(t,e.mode,n,null)).return=e,t;_a(e,t)}return null}function h(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?n.type===_?f(e,t,n.props.children,r,i):c(e,t,n,r):null;case E:return n.key===i?l(e,t,n,r):null}if(xa(n)||q(n))return null!==i?null:f(e,t,n,r,null);_a(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return e=e.get(null===r.key?n:r.key)||null,r.type===_?f(t,e,r.props.children,i,r.key):c(t,e,r,i);case E:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(xa(r)||q(r))return f(t,e=e.get(n)||null,r,i,null);_a(t,r)}return null}function v(i,o,u,s){for(var c=null,l=null,f=o,v=o=0,y=null;null!==f&&v<u.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var m=h(i,f,u[v],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),o=a(m,o,v),null===l?c=m:l.sibling=m,l=m,f=y}if(v===u.length)return n(i,f),c;if(null===f){for(;v<u.length;v++)null!==(f=d(i,u[v],s))&&(o=a(f,o,v),null===l?c=f:l.sibling=f,l=f);return c}for(f=r(i,f);v<u.length;v++)null!==(y=p(f,i,v,u[v],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),o=a(y,o,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),c}function y(i,u,s,c){var l=q(s);if("function"!==typeof l)throw Error(o(150));if(null==(s=l.call(s)))throw Error(o(151));for(var f=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=h(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),u=a(k,u,y),null===f?l=k:f.sibling=k,f=k,v=m}if(g.done)return n(i,v),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=d(i,g.value,c))&&(u=a(g,u,y),null===f?l=g:f.sibling=g,f=g);return l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=a(g,u,y),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),l}return function(e,r,a,s){var c="object"===typeof a&&null!==a&&a.type===_&&null===a.key;c&&(a=a.props.children);var l="object"===typeof a&&null!==a;if(l)switch(a.$$typeof){case x:e:{for(l=a.key,c=r;null!==c;){if(c.key===l){if(7===c.tag){if(a.type===_){n(e,c.sibling),(r=i(c,a.props.children)).return=e,e=r;break e}}else if(c.elementType===a.type){n(e,c.sibling),(r=i(c,a.props)).ref=Ea(e,c,a),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}a.type===_?((r=Zs(a.props.children,e.mode,s,a.key)).return=e,e=r):((s=Gs(a.type,a.key,a.props,null,e.mode,s)).ref=Ea(e,r,a),s.return=e,e=s)}return u(e);case E:e:{for(c=a.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=$s(a,e.mode,s)).return=e,e=r}return u(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,a)).return=e,e=r):(n(e,r),(r=Ys(a,e.mode,s)).return=e,e=r),u(e);if(xa(a))return v(e,r,a,s);if(q(a))return y(e,r,a,s);if(l&&_a(e,a),"undefined"===typeof a&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,G(e.type)||"Component"))}return n(e,r)}}var Ta=Ia(!0),Sa=Ia(!1),Ca={},Na=ci(Ca),Pa=ci(Ca),Aa=ci(Ca);function Oa(e){if(e===Ca)throw Error(o(174));return e}function Ra(e,t){switch(fi(Aa,t),fi(Pa,e),fi(Na,Ca),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}li(Na),fi(Na,t)}function Da(){li(Na),li(Pa),li(Aa)}function La(e){Oa(Aa.current);var t=Oa(Na.current),n=pe(t,e.type);t!==n&&(fi(Pa,e),fi(Na,n))}function Ma(e){Pa.current===e&&(li(Na),li(Pa))}var Fa=ci(0);function Ua(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ja=null,Va=null,Ba=!1;function qa(e,t){var n=Ks(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function za(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Ka(e){if(Ba){var t=Va;if(t){var n=t;if(!za(e,t)){if(!(t=Zr(n.nextSibling))||!za(e,t))return e.flags=-1025&e.flags|2,Ba=!1,void(ja=e);qa(ja,n)}ja=e,Va=Zr(t.firstChild)}else e.flags=-1025&e.flags|2,Ba=!1,ja=e}}function Ha(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ja=e}function Wa(e){if(e!==ja)return!1;if(!Ba)return Ha(e),Ba=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Kr(t,e.memoizedProps))for(t=Va;t;)qa(e,t),t=Zr(t.nextSibling);if(Ha(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Va=Zr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Va=null}}else Va=ja?Zr(e.stateNode.nextSibling):null;return!0}function Ga(){Va=ja=null,Ba=!1}var Za=[];function Qa(){for(var e=0;e<Za.length;e++)Za[e]._workInProgressVersionPrimary=null;Za.length=0}var Ya=w.ReactCurrentDispatcher,$a=w.ReactCurrentBatchConfig,Ja=0,Xa=null,eo=null,to=null,no=!1,ro=!1;function io(){throw Error(o(321))}function ao(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function oo(e,t,n,r,i,a){if(Ja=a,Xa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ya.current=null===e||null===e.memoizedState?Ro:Do,e=n(r,i),ro){a=0;do{if(ro=!1,!(25>a))throw Error(o(301));a+=1,to=eo=null,t.updateQueue=null,Ya.current=Lo,e=n(r,i)}while(ro)}if(Ya.current=Oo,t=null!==eo&&null!==eo.next,Ja=0,to=eo=Xa=null,no=!1,t)throw Error(o(300));return e}function uo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===to?Xa.memoizedState=to=e:to=to.next=e,to}function so(){if(null===eo){var e=Xa.alternate;e=null!==e?e.memoizedState:null}else e=eo.next;var t=null===to?Xa.memoizedState:to.next;if(null!==t)to=t,eo=e;else{if(null===e)throw Error(o(310));e={memoizedState:(eo=e).memoizedState,baseState:eo.baseState,baseQueue:eo.baseQueue,queue:eo.queue,next:null},null===to?Xa.memoizedState=to=e:to=to.next=e}return to}function co(e,t){return"function"===typeof t?t(e):t}function lo(e){var t=so(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=eo,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var u=i.next;i.next=a.next,a.next=u}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var s=u=a=null,c=i;do{var l=c.lane;if((Ja&l)===l)null!==s&&(s=s.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var f={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===s?(u=s=f,a=r):s=s.next=f,Xa.lanes|=l,Bu|=l}c=c.next}while(null!==c&&c!==i);null===s?a=r:s.next=u,lr(r,t.memoizedState)||(Fo=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=s,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function fo(e){var t=so(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{a=e(a,u.action),u=u.next}while(u!==i);lr(a,t.memoizedState)||(Fo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ho(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Ja&e)===e)&&(t._workInProgressVersionPrimary=r,Za.push(t))),e)return n(t._source);throw Za.push(t),Error(o(350))}function po(e,t,n,r){var i=Ru;if(null===i)throw Error(o(349));var a=t._getVersion,u=a(t._source),s=Ya.current,c=s.useState((function(){return ho(i,t,n)})),l=c[1],f=c[0];c=to;var d=e.memoizedState,h=d.refs,p=h.getSnapshot,v=d.source;d=d.subscribe;var y=Xa;return e.memoizedState={refs:h,source:t,subscribe:r},s.useEffect((function(){h.getSnapshot=n,h.setSnapshot=l;var e=a(t._source);if(!lr(u,e)){e=n(t._source),lr(f,e)||(l(e),e=hs(y),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,o=e;0<o;){var s=31-Kt(o),c=1<<s;r[s]|=e,o&=~c}}}),[n,t,r]),s.useEffect((function(){return r(t._source,(function(){var e=h.getSnapshot,n=h.setSnapshot;try{n(e(t._source));var r=hs(y);i.mutableReadLanes|=r&i.pendingLanes}catch(a){n((function(){throw a}))}}))}),[t,r]),lr(p,n)&&lr(v,t)&&lr(d,r)||((e={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:f}).dispatch=l=Ao.bind(null,Xa,e),c.queue=e,c.baseQueue=null,f=ho(i,t,n),c.memoizedState=c.baseState=f),f}function vo(e,t,n){return po(so(),e,t,n)}function yo(e){var t=uo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:e}).dispatch=Ao.bind(null,Xa,e),[t.memoizedState,e]}function mo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Xa.updateQueue)?(t={lastEffect:null},Xa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function go(e){return e={current:e},uo().memoizedState=e}function ko(){return so().memoizedState}function bo(e,t,n,r){var i=uo();Xa.flags|=e,i.memoizedState=mo(1|t,n,void 0,void 0===r?null:r)}function wo(e,t,n,r){var i=so();r=void 0===r?null:r;var a=void 0;if(null!==eo){var o=eo.memoizedState;if(a=o.destroy,null!==r&&ao(r,o.deps))return void mo(t,n,a,r)}Xa.flags|=e,i.memoizedState=mo(1|t,n,a,r)}function xo(e,t){return bo(516,4,e,t)}function Eo(e,t){return wo(516,4,e,t)}function _o(e,t){return wo(4,2,e,t)}function Io(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function To(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,wo(4,2,Io.bind(null,t,e),n)}function So(){}function Co(e,t){var n=so();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function No(e,t){var n=so();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Po(e,t){var n=Ki();Wi(98>n?98:n,(function(){e(!0)})),Wi(97<n?97:n,(function(){var n=$a.transition;$a.transition=1;try{e(!1),t()}finally{$a.transition=n}}))}function Ao(e,t,n){var r=ds(),i=hs(e),a={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?a.next=a:(a.next=o.next,o.next=a),t.pending=a,o=e.alternate,e===Xa||null!==o&&o===Xa)ro=no=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var u=t.lastRenderedState,s=o(u,n);if(a.eagerReducer=o,a.eagerState=s,lr(s,u))return}catch(c){}ps(e,i,r)}}var Oo={readContext:oa,useCallback:io,useContext:io,useEffect:io,useImperativeHandle:io,useLayoutEffect:io,useMemo:io,useReducer:io,useRef:io,useState:io,useDebugValue:io,useDeferredValue:io,useTransition:io,useMutableSource:io,useOpaqueIdentifier:io,unstable_isNewReconciler:!1},Ro={readContext:oa,useCallback:function(e,t){return uo().memoizedState=[e,void 0===t?null:t],e},useContext:oa,useEffect:xo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,bo(4,2,Io.bind(null,t,e),n)},useLayoutEffect:function(e,t){return bo(4,2,e,t)},useMemo:function(e,t){var n=uo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=uo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Ao.bind(null,Xa,e),[r.memoizedState,e]},useRef:go,useState:yo,useDebugValue:So,useDeferredValue:function(e){var t=yo(e),n=t[0],r=t[1];return xo((function(){var t=$a.transition;$a.transition=1;try{r(e)}finally{$a.transition=t}}),[e]),n},useTransition:function(){var e=yo(!1),t=e[0];return go(e=Po.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=uo();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},po(r,e,t,n)},useOpaqueIdentifier:function(){if(Ba){var e=!1,t=function(e){return{$$typeof:L,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Yr++).toString(36))),Error(o(355))})),n=yo(t)[1];return 0===(2&Xa.mode)&&(Xa.flags|=516,mo(5,(function(){n("r:"+(Yr++).toString(36))}),void 0,null)),t}return yo(t="r:"+(Yr++).toString(36)),t},unstable_isNewReconciler:!1},Do={readContext:oa,useCallback:Co,useContext:oa,useEffect:Eo,useImperativeHandle:To,useLayoutEffect:_o,useMemo:No,useReducer:lo,useRef:ko,useState:function(){return lo(co)},useDebugValue:So,useDeferredValue:function(e){var t=lo(co),n=t[0],r=t[1];return Eo((function(){var t=$a.transition;$a.transition=1;try{r(e)}finally{$a.transition=t}}),[e]),n},useTransition:function(){var e=lo(co)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return lo(co)[0]},unstable_isNewReconciler:!1},Lo={readContext:oa,useCallback:Co,useContext:oa,useEffect:Eo,useImperativeHandle:To,useLayoutEffect:_o,useMemo:No,useReducer:fo,useRef:ko,useState:function(){return fo(co)},useDebugValue:So,useDeferredValue:function(e){var t=fo(co),n=t[0],r=t[1];return Eo((function(){var t=$a.transition;$a.transition=1;try{r(e)}finally{$a.transition=t}}),[e]),n},useTransition:function(){var e=fo(co)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return fo(co)[0]},unstable_isNewReconciler:!1},Mo=w.ReactCurrentOwner,Fo=!1;function Uo(e,t,n,r){t.child=null===e?Sa(t,null,n,r):Ta(t,e.child,n,r)}function jo(e,t,n,r,i){n=n.render;var a=t.ref;return aa(t,i),r=oo(e,t,n,r,a,i),null===e||Fo?(t.flags|=1,Uo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,au(e,t,i))}function Vo(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!==typeof o||Hs(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Gs(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Bo(e,t,o,r,i,a))}return o=e.child,0===(i&a)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:dr)(i,r)&&e.ref===t.ref)?au(e,t,a):(t.flags|=1,(e=Ws(o,r)).ref=t.ref,e.return=t,t.child=e)}function Bo(e,t,n,r,i,a){if(null!==e&&dr(e.memoizedProps,r)&&e.ref===t.ref){if(Fo=!1,0===(a&i))return t.lanes=e.lanes,au(e,t,a);0!==(16384&e.flags)&&(Fo=!0)}return Ko(e,t,n,r,a)}function qo(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},xs(t,n);else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},xs(t,e),null;t.memoizedState={baseLanes:0},xs(t,null!==a?a.baseLanes:n)}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,xs(t,r);return Uo(e,t,i,n),t.child}function zo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Ko(e,t,n,r,i){var a=mi(n)?vi:hi.current;return a=yi(t,a),aa(t,i),n=oo(e,t,n,r,a,i),null===e||Fo?(t.flags|=1,Uo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,au(e,t,i))}function Ho(e,t,n,r,i){if(mi(n)){var a=!0;wi(t)}else a=!1;if(aa(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ka(t,n,r),wa(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=oa(c):c=yi(t,c=mi(n)?vi:hi.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&ba(t,o,r,c),ua=!1;var d=t.memoizedState;o.state=d,ha(t,r,o,i),s=t.memoizedState,u!==r||d!==s||pi.current||ua?("function"===typeof l&&(ya(t,n,l,r),s=t.memoizedState),(u=ua||ga(t,n,u,r,d,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,ca(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:$i(t.type,u),o.props=c,f=t.pendingProps,d=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=oa(s):s=yi(t,s=mi(n)?vi:hi.current);var h=n.getDerivedStateFromProps;(l="function"===typeof h||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||d!==s)&&ba(t,o,r,s),ua=!1,d=t.memoizedState,o.state=d,ha(t,r,o,i);var p=t.memoizedState;u!==f||d!==p||pi.current||ua?("function"===typeof h&&(ya(t,n,h,r),p=t.memoizedState),(c=ua||ga(t,n,c,r,d,p,s))?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),r=!1)}return Wo(e,t,n,r,a,i)}function Wo(e,t,n,r,i,a){zo(e,t);var o=0!==(64&t.flags);if(!r&&!o)return i&&xi(t,n,!1),au(e,t,a);r=t.stateNode,Mo.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ta(t,e.child,null,a),t.child=Ta(t,null,u,a)):Uo(e,t,u,a),t.memoizedState=r.state,i&&xi(t,n,!0),t.child}function Go(e){var t=e.stateNode;t.pendingContext?ki(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ki(0,t.context,!1),Ra(e,t.containerInfo)}var Zo,Qo,Yo,$o={dehydrated:null,retryLane:0};function Jo(e,t,n){var r,i=t.pendingProps,a=Fa.current,o=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(a|=1),fi(Fa,1&a),null===e?(void 0!==i.fallback&&Ka(t),e=i.children,a=i.fallback,o?(e=Xo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=$o,e):"number"===typeof i.unstable_expectedLoadTime?(e=Xo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=$o,t.lanes=33554432,e):((n=Qs({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=tu(e,t,i.children,i.fallback,n),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?{baseLanes:n}:{baseLanes:a.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=$o,i):(n=eu(e,t,i.children,n),t.memoizedState=null,n))}function Xo(e,t,n,r){var i=e.mode,a=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==a?(a.childLanes=0,a.pendingProps=t):a=Qs(t,i,0,null),n=Zs(n,i,r,null),a.return=e,n.return=e,a.sibling=n,e.child=a,n}function eu(e,t,n,r){var i=e.child;return e=i.sibling,n=Ws(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function tu(e,t,n,r,i){var a=t.mode,o=e.child;e=o.sibling;var u={mode:"hidden",children:n};return 0===(2&a)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=u,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Ws(o,u),null!==e?r=Ws(e,r):(r=Zs(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function nu(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ia(e.return,t)}function ru(e,t,n,r,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=a)}function iu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Uo(e,t,r.children,n),0!==(2&(r=Fa.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&nu(e,n);else if(19===e.tag)nu(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(fi(Fa,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Ua(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ru(t,!1,i,n,a,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Ua(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ru(t,!0,n,null,a,t.lastEffect);break;case"together":ru(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function au(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Bu|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Ws(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ws(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function ou(e,t){if(!Ba)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function uu(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return mi(t.type)&&gi(),null;case 3:return Da(),li(pi),li(hi),Qa(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Wa(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Ma(t);var a=Oa(Aa.current);if(n=t.type,null!==e&&null!=t.stateNode)Qo(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Oa(Na.current),Wa(t)){r=t.stateNode,n=t.type;var u=t.memoizedProps;switch(r[Jr]=t,r[Xr]=u,n){case"dialog":Pr("cancel",r),Pr("close",r);break;case"iframe":case"object":case"embed":Pr("load",r);break;case"video":case"audio":for(e=0;e<Tr.length;e++)Pr(Tr[e],r);break;case"source":Pr("error",r);break;case"img":case"image":case"link":Pr("error",r),Pr("load",r);break;case"details":Pr("toggle",r);break;case"input":ee(r,u),Pr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!u.multiple},Pr("invalid",r);break;case"textarea":se(r,u),Pr("invalid",r)}for(var c in _e(n,u),e=null,u)u.hasOwnProperty(c)&&(a=u[c],"children"===c?"string"===typeof a?r.textContent!==a&&(e=["children",a]):"number"===typeof a&&r.textContent!==""+a&&(e=["children",""+a]):s.hasOwnProperty(c)&&null!=a&&"onScroll"===c&&Pr("scroll",r));switch(n){case"input":Y(r),re(r,u,!0);break;case"textarea":Y(r),le(r);break;case"select":case"option":break;default:"function"===typeof u.onClick&&(r.onclick=Vr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===a.nodeType?a:a.ownerDocument,e===fe&&(e=he(n)),e===fe?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[Jr]=t,e[Xr]=r,Zo(e,t),t.stateNode=e,c=Ie(n,r),n){case"dialog":Pr("cancel",e),Pr("close",e),a=r;break;case"iframe":case"object":case"embed":Pr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Tr.length;a++)Pr(Tr[a],e);a=r;break;case"source":Pr("error",e),a=r;break;case"img":case"image":case"link":Pr("error",e),Pr("load",e),a=r;break;case"details":Pr("toggle",e),a=r;break;case"input":ee(e,r),a=X(e,r),Pr("invalid",e);break;case"option":a=ae(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=i({},r,{value:void 0}),Pr("invalid",e);break;case"textarea":se(e,r),a=ue(e,r),Pr("invalid",e);break;default:a=r}_e(n,a);var l=a;for(u in l)if(l.hasOwnProperty(u)){var f=l[u];"style"===u?xe(e,f):"dangerouslySetInnerHTML"===u?null!=(f=f?f.__html:void 0)&&me(e,f):"children"===u?"string"===typeof f?("textarea"!==n||""!==f)&&ge(e,f):"number"===typeof f&&ge(e,""+f):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?null!=f&&"onScroll"===u&&Pr("scroll",e):null!=f&&b(e,u,f,c))}switch(n){case"input":Y(e),re(e,r,!1);break;case"textarea":Y(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Z(r.value));break;case"select":e.multiple=!!r.multiple,null!=(u=r.value)?oe(e,!!r.multiple,u,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Vr)}zr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Yo(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Oa(Aa.current),Oa(Na.current),Wa(t)?(r=t.stateNode,n=t.memoizedProps,r[Jr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Jr]=t,t.stateNode=r)}return null;case 13:return li(Fa),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Wa(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Fa.current)?0===Uu&&(Uu=3):(0!==Uu&&3!==Uu||(Uu=4),null===Ru||0===(134217727&Bu)&&0===(134217727&qu)||gs(Ru,Lu))),(r||n)&&(t.flags|=4),null);case 4:return Da(),null===e&&Or(t.stateNode.containerInfo),null;case 10:return ra(t),null;case 19:if(li(Fa),null===(r=t.memoizedState))return null;if(u=0!==(64&t.flags),null===(c=r.rendering))if(u)ou(r,!1);else{if(0!==Uu||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=Ua(e))){for(t.flags|=64,ou(r,!1),null!==(u=c.updateQueue)&&(t.updateQueue=u,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(u=n).flags&=2,u.nextEffect=null,u.firstEffect=null,u.lastEffect=null,null===(c=u.alternate)?(u.childLanes=0,u.lanes=e,u.child=null,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=c.childLanes,u.lanes=c.lanes,u.child=c.child,u.memoizedProps=c.memoizedProps,u.memoizedState=c.memoizedState,u.updateQueue=c.updateQueue,u.type=c.type,e=c.dependencies,u.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return fi(Fa,1&Fa.current|2),t.child}e=e.sibling}null!==r.tail&&zi()>Wu&&(t.flags|=64,u=!0,ou(r,!1),t.lanes=33554432)}else{if(!u)if(null!==(e=Ua(c))){if(t.flags|=64,u=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),ou(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!Ba)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*zi()-r.renderingStartTime>Wu&&1073741824!==n&&(t.flags|=64,u=!0,ou(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=zi(),n.sibling=null,t=Fa.current,fi(Fa,u?1&t|2:1&t),n):null;case 23:case 24:return Es(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function su(e){switch(e.tag){case 1:mi(e.type)&&gi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Da(),li(pi),li(hi),Qa(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return Ma(e),null;case 13:return li(Fa),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return li(Fa),null;case 4:return Da(),null;case 10:return ra(e),null;case 23:case 24:return Es(),null;default:return null}}function cu(e,t){try{var n="",r=t;do{n+=W(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function lu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Zo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Qo=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Oa(Na.current);var o,u=null;switch(n){case"input":a=X(e,a),r=X(e,r),u=[];break;case"option":a=ae(e,a),r=ae(e,r),u=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),u=[];break;case"textarea":a=ue(e,a),r=ue(e,r),u=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Vr)}for(f in _e(n,r),n=null,a)if(!r.hasOwnProperty(f)&&a.hasOwnProperty(f)&&null!=a[f])if("style"===f){var c=a[f];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==f&&"children"!==f&&"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(s.hasOwnProperty(f)?u||(u=[]):(u=u||[]).push(f,null));for(f in r){var l=r[f];if(c=null!=a?a[f]:void 0,r.hasOwnProperty(f)&&l!==c&&(null!=l||null!=c))if("style"===f)if(c){for(o in c)!c.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&c[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(u||(u=[]),u.push(f,n)),n=l;else"dangerouslySetInnerHTML"===f?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(u=u||[]).push(f,l)):"children"===f?"string"!==typeof l&&"number"!==typeof l||(u=u||[]).push(f,""+l):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&(s.hasOwnProperty(f)?(null!=l&&"onScroll"===f&&Pr("scroll",e),u||c===l||(u=[])):"object"===typeof l&&null!==l&&l.$$typeof===L?l.toString():(u=u||[]).push(f,l))}n&&(u=u||[]).push("style",n);var f=u;(t.updateQueue=f)&&(t.flags|=4)}},Yo=function(e,t,n,r){n!==r&&(t.flags|=4)};var fu="function"===typeof WeakMap?WeakMap:Map;function du(e,t,n){(n=la(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Yu||(Yu=!0,$u=r),lu(0,t)},n}function hu(e,t,n){(n=la(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return lu(0,t),r(i)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Ju?Ju=new Set([this]):Ju.add(this),lu(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var pu="function"===typeof WeakSet?WeakSet:Set;function vu(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Vs(e,n)}else t.current=null}function yu(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:$i(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Gr(t.stateNode.containerInfo))}throw Error(o(163))}function mu(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Fs(n,e),Ms(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:$i(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&pa(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}pa(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&zr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&xt(n)))))}throw Error(o(163))}function gu(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=we("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ku(e,t){if(_i&&"function"===typeof _i.onCommitFiberUnmount)try{_i.onCommitFiberUnmount(Ei,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Fs(t,n);else{r=t;try{i()}catch(a){Vs(r,a)}}n=n.next}while(n!==e)}break;case 1:if(vu(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){Vs(t,a)}break;case 5:vu(t);break;case 4:Iu(e,t)}}function bu(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function wu(e){return 5===e.tag||3===e.tag||4===e.tag}function xu(e){e:{for(var t=e.return;null!==t;){if(wu(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(ge(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||wu(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?Eu(e,n,t):_u(e,n,t)}function Eu(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Vr));else if(4!==r&&null!==(e=e.child))for(Eu(e,t,n),e=e.sibling;null!==e;)Eu(e,t,n),e=e.sibling}function _u(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(_u(e,t,n),e=e.sibling;null!==e;)_u(e,t,n),e=e.sibling}function Iu(e,t){for(var n,r,i=t,a=!1;;){if(!a){a=i.return;e:for(;;){if(null===a)throw Error(o(160));switch(n=a.stateNode,a.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}a=a.return}a=!0}if(5===i.tag||6===i.tag){e:for(var u=e,s=i,c=s;;)if(ku(u,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===s)break e;for(;null===c.sibling;){if(null===c.return||c.return===s)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(u=n,s=i.stateNode,8===u.nodeType?u.parentNode.removeChild(s):u.removeChild(s)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ku(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(a=!1)}i.sibling.return=i.return,i=i.sibling}}function Tu(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[Xr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Ie(e,i),t=Ie(e,r),i=0;i<a.length;i+=2){var u=a[i],s=a[i+1];"style"===u?xe(n,s):"dangerouslySetInnerHTML"===u?me(n,s):"children"===u?ge(n,s):b(n,u,s,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(a=r.value)?oe(n,!!r.multiple,a,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,xt(n.containerInfo)));case 13:return null!==t.memoizedState&&(Hu=zi(),gu(t.child,!0)),void Su(t);case 19:return void Su(t);case 23:case 24:return void gu(t,null!==t.memoizedState)}throw Error(o(163))}function Su(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new pu),t.forEach((function(t){var r=qs.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Cu(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Nu=Math.ceil,Pu=w.ReactCurrentDispatcher,Au=w.ReactCurrentOwner,Ou=0,Ru=null,Du=null,Lu=0,Mu=0,Fu=ci(0),Uu=0,ju=null,Vu=0,Bu=0,qu=0,zu=0,Ku=null,Hu=0,Wu=1/0;function Gu(){Wu=zi()+500}var Zu,Qu=null,Yu=!1,$u=null,Ju=null,Xu=!1,es=null,ts=90,ns=[],rs=[],is=null,as=0,os=null,us=-1,ss=0,cs=0,ls=null,fs=!1;function ds(){return 0!==(48&Ou)?zi():-1!==us?us:us=zi()}function hs(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Ki()?1:2;if(0===ss&&(ss=Vu),0!==Yi.transition){0!==cs&&(cs=null!==Ku?Ku.pendingLanes:0),e=ss;var t=4186112&~cs;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Ki(),0!==(4&Ou)&&98===e?e=Vt(12,ss):e=Vt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),ss),e}function ps(e,t,n){if(50<as)throw as=0,os=null,Error(o(185));if(null===(e=vs(e,t)))return null;zt(e,t,n),e===Ru&&(qu|=t,4===Uu&&gs(e,Lu));var r=Ki();1===t?0!==(8&Ou)&&0===(48&Ou)?ks(e):(ys(e,n),0===Ou&&(Gu(),Zi())):(0===(4&Ou)||98!==r&&99!==r||(null===is?is=new Set([e]):is.add(e)),ys(e,n)),Ku=e}function vs(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function ys(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,u=e.pendingLanes;0<u;){var s=31-Kt(u),c=1<<s,l=a[s];if(-1===l){if(0===(c&r)||0!==(c&i)){l=t,Ft(c);var f=Mt;a[s]=10<=f?l+250:6<=f?l+5e3:-1}}else l<=t&&(e.expiredLanes|=c);u&=~c}if(r=Ut(e,e===Ru?Lu:0),t=Mt,0===r)null!==n&&(n!==Fi&&Si(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Fi&&Si(n)}15===t?(n=ks.bind(null,e),null===ji?(ji=[n],Vi=Ti(Oi,Qi)):ji.push(n),n=Fi):14===t?n=Gi(99,ks.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),n=Gi(n,ms.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function ms(e){if(us=-1,cs=ss=0,0!==(48&Ou))throw Error(o(327));var t=e.callbackNode;if(Ls()&&e.callbackNode!==t)return null;var n=Ut(e,e===Ru?Lu:0);if(0===n)return null;var r=n,i=Ou;Ou|=16;var a=Ts();for(Ru===e&&Lu===r||(Gu(),_s(e,r));;)try{Ns();break}catch(s){Is(e,s)}if(na(),Pu.current=a,Ou=i,null!==Du?r=0:(Ru=null,Lu=0,r=Uu),0!==(Vu&qu))_s(e,0);else if(0!==r){if(2===r&&(Ou|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(n=jt(e))&&(r=Ss(e,n))),1===r)throw t=ju,_s(e,0),gs(e,n),ys(e,zi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:case 5:Os(e);break;case 3:if(gs(e,n),(62914560&n)===n&&10<(r=Hu+500-zi())){if(0!==Ut(e,0))break;if(((i=e.suspendedLanes)&n)!==n){ds(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Hr(Os.bind(null,e),r);break}Os(e);break;case 4:if(gs(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var u=31-Kt(n);a=1<<u,(u=r[u])>i&&(i=u),n&=~a}if(n=i,10<(n=(120>(n=zi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Nu(n/1960))-n)){e.timeoutHandle=Hr(Os.bind(null,e),n);break}Os(e);break;default:throw Error(o(329))}}return ys(e,zi()),e.callbackNode===t?ms.bind(null,e):null}function gs(e,t){for(t&=~zu,t&=~qu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Kt(t),r=1<<n;e[n]=-1,t&=~r}}function ks(e){if(0!==(48&Ou))throw Error(o(327));if(Ls(),e===Ru&&0!==(e.expiredLanes&Lu)){var t=Lu,n=Ss(e,t);0!==(Vu&qu)&&(n=Ss(e,t=Ut(e,t)))}else n=Ss(e,t=Ut(e,0));if(0!==e.tag&&2===n&&(Ou|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(t=jt(e))&&(n=Ss(e,t))),1===n)throw n=ju,_s(e,0),gs(e,t),ys(e,zi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Os(e),ys(e,zi()),null}function bs(e,t){var n=Ou;Ou|=1;try{return e(t)}finally{0===(Ou=n)&&(Gu(),Zi())}}function ws(e,t){var n=Ou;Ou&=-2,Ou|=8;try{return e(t)}finally{0===(Ou=n)&&(Gu(),Zi())}}function xs(e,t){fi(Fu,Mu),Mu|=t,Vu|=t}function Es(){Mu=Fu.current,li(Fu)}function _s(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Wr(n)),null!==Du)for(n=Du.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&gi();break;case 3:Da(),li(pi),li(hi),Qa();break;case 5:Ma(r);break;case 4:Da();break;case 13:case 19:li(Fa);break;case 10:ra(r);break;case 23:case 24:Es()}n=n.return}Ru=e,Du=Ws(e.current,null),Lu=Mu=Vu=t,Uu=0,ju=null,zu=qu=Bu=0}function Is(e,t){for(;;){var n=Du;try{if(na(),Ya.current=Oo,no){for(var r=Xa.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}no=!1}if(Ja=0,to=eo=Xa=null,ro=!1,Au.current=null,null===n||null===n.return){Uu=1,ju=t,Du=null;break}e:{var a=e,o=n.return,u=n,s=t;if(t=Lu,u.flags|=2048,u.firstEffect=u.lastEffect=null,null!==s&&"object"===typeof s&&"function"===typeof s.then){var c=s;if(0===(2&u.mode)){var l=u.alternate;l?(u.updateQueue=l.updateQueue,u.memoizedState=l.memoizedState,u.lanes=l.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=0!==(1&Fa.current),d=o;do{var h;if(h=13===d.tag){var p=d.memoizedState;if(null!==p)h=null!==p.dehydrated;else{var v=d.memoizedProps;h=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!f)}}if(h){var y=d.updateQueue;if(null===y){var m=new Set;m.add(c),d.updateQueue=m}else y.add(c);if(0===(2&d.mode)){if(d.flags|=64,u.flags|=16384,u.flags&=-2981,1===u.tag)if(null===u.alternate)u.tag=17;else{var g=la(-1,1);g.tag=2,fa(u,g)}u.lanes|=1;break e}s=void 0,u=t;var k=a.pingCache;if(null===k?(k=a.pingCache=new fu,s=new Set,k.set(c,s)):void 0===(s=k.get(c))&&(s=new Set,k.set(c,s)),!s.has(u)){s.add(u);var b=Bs.bind(null,a,c,u);c.then(b,b)}d.flags|=4096,d.lanes=t;break e}d=d.return}while(null!==d);s=Error((G(u.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Uu&&(Uu=2),s=cu(s,u),d=o;do{switch(d.tag){case 3:a=s,d.flags|=4096,t&=-t,d.lanes|=t,da(d,du(0,a,t));break e;case 1:a=s;var w=d.type,x=d.stateNode;if(0===(64&d.flags)&&("function"===typeof w.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Ju||!Ju.has(x)))){d.flags|=4096,t&=-t,d.lanes|=t,da(d,hu(d,a,t));break e}}d=d.return}while(null!==d)}As(n)}catch(E){t=E,Du===n&&null!==n&&(Du=n=n.return);continue}break}}function Ts(){var e=Pu.current;return Pu.current=Oo,null===e?Oo:e}function Ss(e,t){var n=Ou;Ou|=16;var r=Ts();for(Ru===e&&Lu===t||_s(e,t);;)try{Cs();break}catch(i){Is(e,i)}if(na(),Ou=n,Pu.current=r,null!==Du)throw Error(o(261));return Ru=null,Lu=0,Uu}function Cs(){for(;null!==Du;)Ps(Du)}function Ns(){for(;null!==Du&&!Ci();)Ps(Du)}function Ps(e){var t=Zu(e.alternate,e,Mu);e.memoizedProps=e.pendingProps,null===t?As(e):Du=t,Au.current=null}function As(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=uu(n,t,Mu)))return void(Du=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Mu)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=su(t)))return n.flags&=2047,void(Du=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Du=t);Du=t=e}while(null!==t);0===Uu&&(Uu=5)}function Os(e){var t=Ki();return Wi(99,Rs.bind(null,e,t)),null}function Rs(e,t){do{Ls()}while(null!==es);if(0!==(48&Ou))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,a=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var u=e.eventTimes,s=e.expirationTimes;0<a;){var c=31-Kt(a),l=1<<c;i[c]=0,u[c]=-1,s[c]=-1,a&=~l}if(null!==is&&0===(24&r)&&is.has(e)&&is.delete(e),e===Ru&&(Du=Ru=null,Lu=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Ou,Ou|=32,Au.current=null,Br=Qt,mr(u=yr())){if("selectionStart"in u)s={start:u.selectionStart,end:u.selectionEnd};else e:if(s=(s=u.ownerDocument)&&s.defaultView||window,(l=s.getSelection&&s.getSelection())&&0!==l.rangeCount){s=l.anchorNode,a=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{s.nodeType,c.nodeType}catch(T){s=null;break e}var f=0,d=-1,h=-1,p=0,v=0,y=u,m=null;t:for(;;){for(var g;y!==s||0!==a&&3!==y.nodeType||(d=f+a),y!==c||0!==l&&3!==y.nodeType||(h=f+l),3===y.nodeType&&(f+=y.nodeValue.length),null!==(g=y.firstChild);)m=y,y=g;for(;;){if(y===u)break t;if(m===s&&++p===a&&(d=f),m===c&&++v===l&&(h=f),null!==(g=y.nextSibling))break;m=(y=m).parentNode}y=g}s=-1===d||-1===h?null:{start:d,end:h}}else s=null;s=s||{start:0,end:0}}else s=null;qr={focusedElem:u,selectionRange:s},Qt=!1,ls=null,fs=!1,Qu=r;do{try{Ds()}catch(T){if(null===Qu)throw Error(o(330));Vs(Qu,T),Qu=Qu.nextEffect}}while(null!==Qu);ls=null,Qu=r;do{try{for(u=e;null!==Qu;){var k=Qu.flags;if(16&k&&ge(Qu.stateNode,""),128&k){var b=Qu.alternate;if(null!==b){var w=b.ref;null!==w&&("function"===typeof w?w(null):w.current=null)}}switch(1038&k){case 2:xu(Qu),Qu.flags&=-3;break;case 6:xu(Qu),Qu.flags&=-3,Tu(Qu.alternate,Qu);break;case 1024:Qu.flags&=-1025;break;case 1028:Qu.flags&=-1025,Tu(Qu.alternate,Qu);break;case 4:Tu(Qu.alternate,Qu);break;case 8:Iu(u,s=Qu);var x=s.alternate;bu(s),null!==x&&bu(x)}Qu=Qu.nextEffect}}catch(T){if(null===Qu)throw Error(o(330));Vs(Qu,T),Qu=Qu.nextEffect}}while(null!==Qu);if(w=qr,b=yr(),k=w.focusedElem,u=w.selectionRange,b!==k&&k&&k.ownerDocument&&vr(k.ownerDocument.documentElement,k)){null!==u&&mr(k)&&(b=u.start,void 0===(w=u.end)&&(w=b),"selectionStart"in k?(k.selectionStart=b,k.selectionEnd=Math.min(w,k.value.length)):(w=(b=k.ownerDocument||document)&&b.defaultView||window).getSelection&&(w=w.getSelection(),s=k.textContent.length,x=Math.min(u.start,s),u=void 0===u.end?x:Math.min(u.end,s),!w.extend&&x>u&&(s=u,u=x,x=s),s=pr(k,x),a=pr(k,u),s&&a&&(1!==w.rangeCount||w.anchorNode!==s.node||w.anchorOffset!==s.offset||w.focusNode!==a.node||w.focusOffset!==a.offset)&&((b=b.createRange()).setStart(s.node,s.offset),w.removeAllRanges(),x>u?(w.addRange(b),w.extend(a.node,a.offset)):(b.setEnd(a.node,a.offset),w.addRange(b))))),b=[];for(w=k;w=w.parentNode;)1===w.nodeType&&b.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"===typeof k.focus&&k.focus(),k=0;k<b.length;k++)(w=b[k]).element.scrollLeft=w.left,w.element.scrollTop=w.top}Qt=!!Br,qr=Br=null,e.current=n,Qu=r;do{try{for(k=e;null!==Qu;){var E=Qu.flags;if(36&E&&mu(k,Qu.alternate,Qu),128&E){b=void 0;var _=Qu.ref;if(null!==_){var I=Qu.stateNode;Qu.tag,b=I,"function"===typeof _?_(b):_.current=b}}Qu=Qu.nextEffect}}catch(T){if(null===Qu)throw Error(o(330));Vs(Qu,T),Qu=Qu.nextEffect}}while(null!==Qu);Qu=null,Ui(),Ou=i}else e.current=n;if(Xu)Xu=!1,es=e,ts=t;else for(Qu=r;null!==Qu;)t=Qu.nextEffect,Qu.nextEffect=null,8&Qu.flags&&((E=Qu).sibling=null,E.stateNode=null),Qu=t;if(0===(r=e.pendingLanes)&&(Ju=null),1===r?e===os?as++:(as=0,os=e):as=0,n=n.stateNode,_i&&"function"===typeof _i.onCommitFiberRoot)try{_i.onCommitFiberRoot(Ei,n,void 0,64===(64&n.current.flags))}catch(T){}if(ys(e,zi()),Yu)throw Yu=!1,e=$u,$u=null,e;return 0!==(8&Ou)||Zi(),null}function Ds(){for(;null!==Qu;){var e=Qu.alternate;fs||null===ls||(0!==(8&Qu.flags)?et(Qu,ls)&&(fs=!0):13===Qu.tag&&Cu(e,Qu)&&et(Qu,ls)&&(fs=!0));var t=Qu.flags;0!==(256&t)&&yu(e,Qu),0===(512&t)||Xu||(Xu=!0,Gi(97,(function(){return Ls(),null}))),Qu=Qu.nextEffect}}function Ls(){if(90!==ts){var e=97<ts?97:ts;return ts=90,Wi(e,Us)}return!1}function Ms(e,t){ns.push(t,e),Xu||(Xu=!0,Gi(97,(function(){return Ls(),null})))}function Fs(e,t){rs.push(t,e),Xu||(Xu=!0,Gi(97,(function(){return Ls(),null})))}function Us(){if(null===es)return!1;var e=es;if(es=null,0!==(48&Ou))throw Error(o(331));var t=Ou;Ou|=32;var n=rs;rs=[];for(var r=0;r<n.length;r+=2){var i=n[r],a=n[r+1],u=i.destroy;if(i.destroy=void 0,"function"===typeof u)try{u()}catch(c){if(null===a)throw Error(o(330));Vs(a,c)}}for(n=ns,ns=[],r=0;r<n.length;r+=2){i=n[r],a=n[r+1];try{var s=i.create;i.destroy=s()}catch(c){if(null===a)throw Error(o(330));Vs(a,c)}}for(s=e.current.firstEffect;null!==s;)e=s.nextEffect,s.nextEffect=null,8&s.flags&&(s.sibling=null,s.stateNode=null),s=e;return Ou=t,Zi(),!0}function js(e,t,n){fa(e,t=du(0,t=cu(n,t),1)),t=ds(),null!==(e=vs(e,1))&&(zt(e,1,t),ys(e,t))}function Vs(e,t){if(3===e.tag)js(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){js(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ju||!Ju.has(r))){var i=hu(n,e=cu(t,e),1);if(fa(n,i),i=ds(),null!==(n=vs(n,1)))zt(n,1,i),ys(n,i);else if("function"===typeof r.componentDidCatch&&(null===Ju||!Ju.has(r)))try{r.componentDidCatch(t,e)}catch(a){}break}}n=n.return}}function Bs(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ds(),e.pingedLanes|=e.suspendedLanes&n,Ru===e&&(Lu&n)===n&&(4===Uu||3===Uu&&(62914560&Lu)===Lu&&500>zi()-Hu?_s(e,0):zu|=n),ys(e,t)}function qs(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Ki()?1:2:(0===ss&&(ss=Vu),0===(t=Bt(62914560&~ss))&&(t=4194304))),n=ds(),null!==(e=vs(e,t))&&(zt(e,t,n),ys(e,n))}function zs(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Ks(e,t,n,r){return new zs(e,t,n,r)}function Hs(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ws(e,t){var n=e.alternate;return null===n?((n=Ks(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Gs(e,t,n,r,i,a){var u=2;if(r=e,"function"===typeof e)Hs(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case _:return Zs(n.children,i,a,t);case M:u=8,i|=16;break;case I:u=8,i|=1;break;case T:return(e=Ks(12,n,t,8|i)).elementType=T,e.type=T,e.lanes=a,e;case P:return(e=Ks(13,n,t,i)).type=P,e.elementType=P,e.lanes=a,e;case A:return(e=Ks(19,n,t,i)).elementType=A,e.lanes=a,e;case F:return Qs(n,i,a,t);case U:return(e=Ks(24,n,t,i)).elementType=U,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:u=10;break e;case C:u=9;break e;case N:u=11;break e;case O:u=14;break e;case R:u=16,r=null;break e;case D:u=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Ks(u,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Zs(e,t,n,r){return(e=Ks(7,e,r,t)).lanes=n,e}function Qs(e,t,n,r){return(e=Ks(23,e,r,t)).elementType=F,e.lanes=n,e}function Ys(e,t,n){return(e=Ks(6,e,null,t)).lanes=n,e}function $s(e,t,n){return(t=Ks(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Js(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=qt(0),this.expirationTimes=qt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qt(0),this.mutableSourceEagerHydrationData=null}function Xs(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function ec(e,t,n,r){var i=t.current,a=ds(),u=hs(i);e:if(n){t:{if(Ye(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(mi(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);throw Error(o(171))}if(1===n.tag){var c=n.type;if(mi(c)){n=bi(n,c,s);break e}}n=s}else n=di;return null===t.context?t.context=n:t.pendingContext=n,(t=la(a,u)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),fa(i,t),ps(i,u,a),u}function tc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function nc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function rc(e,t){nc(e,t),(e=e.alternate)&&nc(e,t)}function ic(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Js(e,t,null!=n&&!0===n.hydrate),t=Ks(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,sa(t),e[ei]=n.current,Or(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function ac(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function oc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"===typeof i){var u=i;i=function(){var e=tc(o);u.call(e)}}ec(t,o,e,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ic(e,0,t?{hydrate:!0}:void 0)}(n,r),o=a._internalRoot,"function"===typeof i){var s=i;i=function(){var e=tc(o);s.call(e)}}ws((function(){ec(t,o,e,i)}))}return tc(o)}function uc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ac(t))throw Error(o(200));return Xs(e,t,null,n)}Zu=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||pi.current)Fo=!0;else{if(0===(n&r)){switch(Fo=!1,t.tag){case 3:Go(t),Ga();break;case 5:La(t);break;case 1:mi(t.type)&&wi(t);break;case 4:Ra(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;fi(Ji,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Jo(e,t,n):(fi(Fa,1&Fa.current),null!==(t=au(e,t,n))?t.sibling:null);fi(Fa,1&Fa.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return iu(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),fi(Fa,Fa.current),r)break;return null;case 23:case 24:return t.lanes=0,qo(e,t,n)}return au(e,t,n)}Fo=0!==(16384&e.flags)}else Fo=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=yi(t,hi.current),aa(t,n),i=oo(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,mi(r)){var a=!0;wi(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,sa(t);var u=r.getDerivedStateFromProps;"function"===typeof u&&ya(t,r,u,e),i.updater=ma,t.stateNode=i,i._reactInternals=t,wa(t,r,e,n),t=Wo(null,t,r,!0,a,n)}else t.tag=0,Uo(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(a=i._init)(i._payload),t.type=i,a=t.tag=function(e){if("function"===typeof e)return Hs(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===N)return 11;if(e===O)return 14}return 2}(i),e=$i(i,e),a){case 0:t=Ko(null,t,i,e,n);break e;case 1:t=Ho(null,t,i,e,n);break e;case 11:t=jo(null,t,i,e,n);break e;case 14:t=Vo(null,t,i,$i(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ko(e,t,r,i=t.elementType===r?i:$i(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ho(e,t,r,i=t.elementType===r?i:$i(r,i),n);case 3:if(Go(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ca(e,t),ha(t,r,null,n),(r=t.memoizedState.element)===i)Ga(),t=au(e,t,n);else{if((a=(i=t.stateNode).hydrate)&&(Va=Zr(t.stateNode.containerInfo.firstChild),ja=t,a=Ba=!0),a){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(a=e[i])._workInProgressVersionPrimary=e[i+1],Za.push(a);for(n=Sa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Uo(e,t,r,n),Ga();t=t.child}return t;case 5:return La(t),null===e&&Ka(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,u=i.children,Kr(r,i)?u=null:null!==a&&Kr(r,a)&&(t.flags|=16),zo(e,t),Uo(e,t,u,n),t.child;case 6:return null===e&&Ka(t),null;case 13:return Jo(e,t,n);case 4:return Ra(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ta(t,null,r,n):Uo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,jo(e,t,r,i=t.elementType===r?i:$i(r,i),n);case 7:return Uo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Uo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,u=t.memoizedProps,a=i.value;var s=t.type._context;if(fi(Ji,s._currentValue),s._currentValue=a,null!==u)if(s=u.value,0===(a=lr(s,a)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(s,a):1073741823))){if(u.children===i.children&&!pi.current){t=au(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var c=s.dependencies;if(null!==c){u=s.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&a)){1===s.tag&&((l=la(-1,n&-n)).tag=2,fa(s,l)),s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),ia(s.return,n),c.lanes|=n;break}l=l.next}}else u=10===s.tag&&s.type===t.type?null:s.child;if(null!==u)u.return=s;else for(u=s;null!==u;){if(u===t){u=null;break}if(null!==(s=u.sibling)){s.return=u.return,u=s;break}u=u.return}s=u}Uo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,aa(t,n),r=r(i=oa(i,a.unstable_observedBits)),t.flags|=1,Uo(e,t,r,n),t.child;case 14:return a=$i(i=t.type,t.pendingProps),Vo(e,t,i,a=$i(i.type,a),r,n);case 15:return Bo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:$i(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,mi(r)?(e=!0,wi(t)):e=!1,aa(t,n),ka(t,r,i),wa(t,r,i,n),Wo(null,t,r,!0,e,n);case 19:return iu(e,t,n);case 23:case 24:return qo(e,t,n)}throw Error(o(156,t.tag))},ic.prototype.render=function(e){ec(e,this._internalRoot,null,null)},ic.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;ec(null,e,null,(function(){t[ei]=null}))},tt=function(e){13===e.tag&&(ps(e,4,ds()),rc(e,4))},nt=function(e){13===e.tag&&(ps(e,67108864,ds()),rc(e,67108864))},rt=function(e){if(13===e.tag){var t=ds(),n=hs(e);ps(e,n,t),rc(e,n)}},it=function(e,t){return t()},Se=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ai(r);if(!i)throw Error(o(90));$(r),ne(r,i)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},Re=bs,De=function(e,t,n,r,i){var a=Ou;Ou|=4;try{return Wi(98,e.bind(null,t,n,r,i))}finally{0===(Ou=a)&&(Gu(),Zi())}},Le=function(){0===(49&Ou)&&(function(){if(null!==is){var e=is;is=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,ys(e,zi())}))}Zi()}(),Ls())},Me=function(e,t){var n=Ou;Ou|=2;try{return e(t)}finally{0===(Ou=n)&&(Gu(),Zi())}};var sc={Events:[ri,ii,ai,Ae,Oe,Ls,{current:!1}]},cc={findFiberByHostInstance:ni,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},lc={bundleType:cc.bundleType,version:cc.version,rendererPackageName:cc.rendererPackageName,rendererConfig:cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Xe(e))?null:e.stateNode},findFiberByHostInstance:cc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fc.isDisabled&&fc.supportsFiber)try{Ei=fc.inject(lc),_i=fc}catch(ye){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sc,t.createPortal=uc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=Xe(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Ou;if(0!==(48&n))return e(t);Ou|=1;try{if(e)return Wi(99,e.bind(null,t))}finally{Ou=n,Zi()}},t.hydrate=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!0,n)},t.render=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ac(e))throw Error(o(40));return!!e._reactRootContainer&&(ws((function(){oc(null,null,e,!1,(function(){e._reactRootContainer=null,e[ei]=null}))})),!0)},t.unstable_batchedUpdates=bs,t.unstable_createPortal=function(e,t){return uc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ac(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return oc(e,t,n,!1,r)},t.version="17.0.2"},4164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},6374:function(e,t,n){"use strict";n(1725);var r=n(2791),i=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;i=a("react.element"),t.Fragment=a("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u=Object.prototype.hasOwnProperty,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)u.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:o.current}}t.jsx=c,t.jsxs=c},9117:function(e,t,n){"use strict";var r=n(1725),i=60103,a=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,u=60110,s=60112;t.Suspense=60113;var c=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var f=Symbol.for;i=f("react.element"),a=f("react.portal"),t.Fragment=f("react.fragment"),t.StrictMode=f("react.strict_mode"),t.Profiler=f("react.profiler"),o=f("react.provider"),u=f("react.context"),s=f("react.forward_ref"),t.Suspense=f("react.suspense"),c=f("react.memo"),l=f("react.lazy")}var d="function"===typeof Symbol&&Symbol.iterator;function h(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function y(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function m(){}function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(h(85));this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},m.prototype=y.prototype;var k=g.prototype=new m;k.constructor=g,r(k,y.prototype),k.isPureReactComponent=!0;var b={current:null},w=Object.prototype.hasOwnProperty,x={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,n){var r,a={},o=null,u=null;if(null!=t)for(r in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,r)&&!x.hasOwnProperty(r)&&(a[r]=t[r]);var s=arguments.length-2;if(1===s)a.children=n;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===a[r]&&(a[r]=s[r]);return{$$typeof:i,type:e,key:o,ref:u,props:a,_owner:b.current}}function _(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var I=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function S(e,t,n,r,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case i:case a:s=!0}}if(s)return o=o(s=e),e=""===r?"."+T(s,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(I,"$&/")+"/"),S(o,t,n,"",(function(e){return e}))):null!=o&&(_(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(I,"$&/")+"/")+e)),t.push(o)),1;if(s=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=r+T(u=e[c],c);s+=S(u,t,n,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=S(u=u.value,t,n,l=r+T(u,c++),o);else if("object"===u)throw t=""+e,Error(h(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return s}function C(e,t,n){if(null==e)return e;var r=[],i=0;return S(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function N(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var P={current:null};function A(){var e=P.current;if(null===e)throw Error(h(321));return e}var O={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:b,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!_(e))throw Error(h(143));return e}},t.Component=y,t.PureComponent=g,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(h(267,e));var a=r({},e.props),o=e.key,u=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(u=t.ref,s=b.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)w.call(t,l)&&!x.hasOwnProperty(l)&&(a[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)a.children=n;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];a.children=c}return{$$typeof:i,type:e.type,key:o,ref:u,props:a,_owner:s}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:u,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:s,render:e}},t.isValidElement=_,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return A().useCallback(e,t)},t.useContext=function(e,t){return A().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return A().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return A().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return A().useLayoutEffect(e,t)},t.useMemo=function(e,t){return A().useMemo(e,t)},t.useReducer=function(e,t,n){return A().useReducer(e,t,n)},t.useRef=function(e){return A().useRef(e)},t.useState=function(e){return A().useState(e)},t.version="17.0.2"},2791:function(e,t,n){"use strict";e.exports=n(9117)},184:function(e,t,n){"use strict";e.exports=n(6374)},7781:function(e,t,n){"use strict";n.r(t),n.d(t,{__DO_NOT_USE__ActionTypes:function(){return u},applyMiddleware:function(){return p},bindActionCreators:function(){return d},combineReducers:function(){return l},compose:function(){return h},createStore:function(){return c}});var r=n(1413);function i(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var a="function"===typeof Symbol&&Symbol.observable||"@@observable",o=function(){return Math.random().toString(36).substring(7).split("").join(".")},u={INIT:"@@redux/INIT"+o(),REPLACE:"@@redux/REPLACE"+o(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+o()}};function s(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function c(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(i(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(i(1));return n(c)(e,t)}if("function"!==typeof e)throw new Error(i(2));var o=e,l=t,f=[],d=f,h=!1;function p(){d===f&&(d=f.slice())}function v(){if(h)throw new Error(i(3));return l}function y(e){if("function"!==typeof e)throw new Error(i(4));if(h)throw new Error(i(5));var t=!0;return p(),d.push(e),function(){if(t){if(h)throw new Error(i(6));t=!1,p();var n=d.indexOf(e);d.splice(n,1),f=null}}}function m(e){if(!s(e))throw new Error(i(7));if("undefined"===typeof e.type)throw new Error(i(8));if(h)throw new Error(i(9));try{h=!0,l=o(l,e)}finally{h=!1}for(var t=f=d,n=0;n<t.length;n++){(0,t[n])()}return e}function g(e){if("function"!==typeof e)throw new Error(i(10));o=e,m({type:u.REPLACE})}function k(){var e,t=y;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(i(11));function n(){e.next&&e.next(v())}return n(),{unsubscribe:t(n)}}})[a]=function(){return this},e}return m({type:u.INIT}),(r={dispatch:m,subscribe:y,getState:v,replaceReducer:g})[a]=k,r}function l(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var a=t[r];0,"function"===typeof e[a]&&(n[a]=e[a])}var o,s=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:u.INIT}))throw new Error(i(12));if("undefined"===typeof n(void 0,{type:u.PROBE_UNKNOWN_ACTION()}))throw new Error(i(13))}))}(n)}catch(c){o=c}return function(e,t){if(void 0===e&&(e={}),o)throw o;for(var r=!1,a={},u=0;u<s.length;u++){var c=s[u],l=n[c],f=e[c],d=l(f,t);if("undefined"===typeof d){t&&t.type;throw new Error(i(14))}a[c]=d,r=r||d!==f}return(r=r||s.length!==Object.keys(e).length)?a:e}}function f(e,t){return function(){return t(e.apply(this,arguments))}}function d(e,t){if("function"===typeof e)return f(e,t);if("object"!==typeof e||null===e)throw new Error(i(16));var n={};for(var r in e){var a=e[r];"function"===typeof a&&(n[r]=f(a,t))}return n}function h(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function p(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),a=function(){throw new Error(i(15))},o={getState:n.getState,dispatch:function(){return a.apply(void 0,arguments)}},u=t.map((function(e){return e(o)}));return a=h.apply(void 0,u)(n.dispatch),(0,r.Z)((0,r.Z)({},n),{},{dispatch:a})}}}},9727:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(A){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r=f;return function(i,a){if(r===h)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return P()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=I(o,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var s=l(e,t,n);if("normal"===s.type){if(r=n.done?p:d,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=p,n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(A){return{type:"throw",arg:A}}}e.wrap=c;var f="suspendedStart",d="suspendedYield",h="executing",p="completed",v={};function y(){}function m(){}function g(){}var k={};s(k,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(N([])));w&&w!==n&&r.call(w,a)&&(k=w);var x=g.prototype=y.prototype=Object.create(k);function E(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function n(i,a,o,u){var s=l(e[i],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"===typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,o,u)}),(function(e){n("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function I(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,I(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function N(e){if(e){var n=e[a];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:P}}function P(){return{value:t,done:!0}}return m.prototype=g,s(x,"constructor",g),s(g,"constructor",m),m.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},E(_.prototype),s(_.prototype,o,(function(){return this})),e.AsyncIterator=_,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new _(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},E(x),s(x,u,"Generator"),s(x,a,(function(){return this})),s(x,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=N,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return u.type="throw",u.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},6813:function(e,t){"use strict";var n,r,i,a;if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,l=null,f=function e(){if(null!==c)try{var n=t.unstable_now();c(!0,n),c=null}catch(r){throw setTimeout(e,0),r}};n=function(e){null!==c?setTimeout(n,0,e):(c=e,setTimeout(f,0))},r=function(e,t){l=setTimeout(e,t)},i=function(){clearTimeout(l)},t.unstable_shouldYield=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var d=window.setTimeout,h=window.clearTimeout;if("undefined"!==typeof console){var p=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var v=!1,y=null,m=-1,g=5,k=0;t.unstable_shouldYield=function(){return t.unstable_now()>=k},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<e?Math.floor(1e3/e):5};var b=new MessageChannel,w=b.port2;b.port1.onmessage=function(){if(null!==y){var e=t.unstable_now();k=e+g;try{y(!0,e)?w.postMessage(null):(v=!1,y=null)}catch(n){throw w.postMessage(null),n}}else v=!1},n=function(e){y=e,v||(v=!0,w.postMessage(null))},r=function(e,n){m=d((function(){e(t.unstable_now())}),n)},i=function(){h(m),m=-1}}function x(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<I(i,t)))break e;e[r]=t,e[n]=i,n=r}}function E(e){return void 0===(e=e[0])?null:e}function _(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var a=2*(r+1)-1,o=e[a],u=a+1,s=e[u];if(void 0!==o&&0>I(o,n))void 0!==s&&0>I(s,o)?(e[r]=s,e[u]=n,r=u):(e[r]=o,e[a]=n,r=a);else{if(!(void 0!==s&&0>I(s,n)))break e;e[r]=s,e[u]=n,r=u}}}return t}return null}function I(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var T=[],S=[],C=1,N=null,P=3,A=!1,O=!1,R=!1;function D(e){for(var t=E(S);null!==t;){if(null===t.callback)_(S);else{if(!(t.startTime<=e))break;_(S),t.sortIndex=t.expirationTime,x(T,t)}t=E(S)}}function L(e){if(R=!1,D(e),!O)if(null!==E(T))O=!0,n(M);else{var t=E(S);null!==t&&r(L,t.startTime-e)}}function M(e,n){O=!1,R&&(R=!1,i()),A=!0;var a=P;try{for(D(n),N=E(T);null!==N&&(!(N.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=N.callback;if("function"===typeof o){N.callback=null,P=N.priorityLevel;var u=o(N.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?N.callback=u:N===E(T)&&_(T),D(n)}else _(T);N=E(T)}if(null!==N)var s=!0;else{var c=E(S);null!==c&&r(L,c.startTime-n),s=!1}return s}finally{N=null,P=a,A=!1}}var F=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){O||A||(O=!0,n(M))},t.unstable_getCurrentPriorityLevel=function(){return P},t.unstable_getFirstCallbackNode=function(){return E(T)},t.unstable_next=function(e){switch(P){case 1:case 2:case 3:var t=3;break;default:t=P}var n=P;P=t;try{return e()}finally{P=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=F,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=P;P=e;try{return t()}finally{P=n}},t.unstable_scheduleCallback=function(e,a,o){var u=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?u+o:u:o=u,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:C++,callback:a,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>u?(e.sortIndex=o,x(S,e),null===E(T)&&e===E(S)&&(R?i():R=!0,r(L,o-u))):(e.sortIndex=s,x(T,e),O||A||(O=!0,n(M))),e},t.unstable_wrapCallback=function(e){var t=P;return function(){var n=P;P=t;try{return e.apply(this,arguments)}finally{P=n}}}},5296:function(e,t,n){"use strict";e.exports=n(6813)},5132:function(e,t,n){"use strict";var r=n(862),i=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(693)),o=i(n(4575)),u=i(n(3913)),s=n(7781),c=i(n(8518)),l=r(n(5726)),f=r(n(4534)),d=function(){function e(t){(0,o.default)(this,e),this.store=t||(0,s.createStore)(c.default),this.video=null,this.rootElement=null}return(0,u.default)(e,[{key:"getActions",value:function(){var e=this,t=this.store.dispatch,n=(0,a.default)({},l,f);return Object.keys(n).filter((function(e){return"function"===typeof n[e]})).reduce((function(r,i){var a;return r[i]=(a=n[i],function(){var n=a.apply(e,arguments);"undefined"!==typeof n&&t(n)}),r}),{})}},{key:"getState",value:function(){return this.store.getState()}},{key:"subscribeToStateChange",value:function(e,t){t||(t=this.getState.bind(this));var n=t();return this.store.subscribe((function(){var r=t();if(r!==n){var i=n;n=r,e(r,i)}}))}},{key:"subscribeToOperationStateChange",value:function(e){var t=this;return this.subscribeToStateChange(e,(function(){return t.getState().operation}))}},{key:"subscribeToPlayerStateChange",value:function(e){var t=this;return this.subscribeToStateChange(e,(function(){return t.getState().player}))}}]),e}();t.default=d},5726:function(e,t,n){"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.handleFullscreenChange=function(e){return{type:o,isFullscreen:e}},t.activate=function(e){return{type:u,activity:e}},t.userActivate=function(e){return{type:s,activity:e}},t.play=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{action:"play",source:""};return this.video.play(),{type:a,operation:e}},t.pause=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{action:"pause",source:""};return this.video.pause(),{type:a,operation:e}},t.togglePlay=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{action:"toggle-play",source:""};return this.video.togglePlay(),{type:a,operation:e}},t.seek=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{action:"seek",source:""};return this.video.seek(e),{type:a,operation:t}},t.forward=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{action:"forward-".concat(e),source:""};return this.video.forward(e),{type:a,operation:t}},t.replay=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{action:"replay-".concat(e),source:""};return this.video.replay(e),{type:a,operation:t}},t.changeRate=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{action:"change-rate",source:""};return this.video.playbackRate=e,{type:a,operation:t}},t.changeVolume=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{action:"change-volume",source:""},n=e;e<0&&(n=0);e>1&&(n=1);return this.video.volume=n,{type:a,operation:t}},t.mute=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{action:e?"muted":"unmuted",source:""};return this.video.muted=e,{type:a,operation:t}},t.toggleFullscreen=function(e){if(i.default.enabled)return i.default.isFullscreen?i.default.exit():i.default.request(this.rootElement),{type:a,operation:{action:"toggle-fullscreen",source:""}};return{type:o,isFullscreen:!e.isFullscreen}},t.USER_ACTIVATE=t.PLAYER_ACTIVATE=t.FULLSCREEN_CHANGE=t.OPERATE=void 0;var i=r(n(4889)),a="video-react/OPERATE";t.OPERATE=a;var o="video-react/FULLSCREEN_CHANGE";t.FULLSCREEN_CHANGE=o;var u="video-react/PLAYER_ACTIVATE";t.PLAYER_ACTIVATE=u;var s="video-react/USER_ACTIVATE";t.USER_ACTIVATE=s},4534:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleLoadStart=function(e){return{type:n,videoProps:e}},t.handleCanPlay=function(e){return{type:r,videoProps:e}},t.handleWaiting=function(e){return{type:i,videoProps:e}},t.handleCanPlayThrough=function(e){return{type:a,videoProps:e}},t.handlePlaying=function(e){return{type:o,videoProps:e}},t.handlePlay=function(e){return{type:u,videoProps:e}},t.handlePause=function(e){return{type:s,videoProps:e}},t.handleEnd=function(e){return{type:c,videoProps:e}},t.handleSeeking=function(e){return{type:l,videoProps:e}},t.handleSeeked=function(e){return{type:f,videoProps:e}},t.handleDurationChange=function(e){return{type:p,videoProps:e}},t.handleTimeUpdate=function(e){return{type:v,videoProps:e}},t.handleVolumeChange=function(e){return{type:y,videoProps:e}},t.handleProgressChange=function(e){return{type:m,videoProps:e}},t.handleRateChange=function(e){return{type:g,videoProps:e}},t.handleSuspend=function(e){return{type:k,videoProps:e}},t.handleAbort=function(e){return{type:b,videoProps:e}},t.handleEmptied=function(e){return{type:w,videoProps:e}},t.handleStalled=function(e){return{type:x,videoProps:e}},t.handleLoadedMetaData=function(e){return{type:E,videoProps:e}},t.handleLoadedData=function(e){return{type:_,videoProps:e}},t.handleResize=function(e){return{type:I,videoProps:e}},t.handleError=function(e){return{type:T,videoProps:e}},t.handleSeekingTime=function(e){return{type:d,time:e}},t.handleEndSeeking=function(e){return{type:h,time:e}},t.activateTextTrack=function(e){return{type:S,textTrack:e}},t.ACTIVATE_TEXT_TRACK=t.ERROR=t.RESIZE=t.LOADED_DATA=t.LOADED_META_DATA=t.STALLED=t.EMPTIED=t.ABORT=t.SUSPEND=t.RATE_CHANGE=t.PROGRESS_CHANGE=t.VOLUME_CHANGE=t.TIME_UPDATE=t.DURATION_CHANGE=t.END_SEEKING=t.SEEKING_TIME=t.SEEKED=t.SEEKING=t.END=t.PAUSE=t.PLAY=t.PLAYING=t.CAN_PLAY_THROUGH=t.WAITING=t.CAN_PLAY=t.LOAD_START=void 0;var n="video-react/LOAD_START";t.LOAD_START=n;var r="video-react/CAN_PLAY";t.CAN_PLAY=r;var i="video-react/WAITING";t.WAITING=i;var a="video-react/CAN_PLAY_THROUGH";t.CAN_PLAY_THROUGH=a;var o="video-react/PLAYING";t.PLAYING=o;var u="video-react/PLAY";t.PLAY=u;var s="video-react/PAUSE";t.PAUSE=s;var c="video-react/END";t.END=c;var l="video-react/SEEKING";t.SEEKING=l;var f="video-react/SEEKED";t.SEEKED=f;var d="video-react/SEEKING_TIME";t.SEEKING_TIME=d;var h="video-react/END_SEEKING";t.END_SEEKING=h;var p="video-react/DURATION_CHANGE";t.DURATION_CHANGE=p;var v="video-react/TIME_UPDATE";t.TIME_UPDATE=v;var y="video-react/VOLUME_CHANGE";t.VOLUME_CHANGE=y;var m="video-react/PROGRESS_CHANGE";t.PROGRESS_CHANGE=m;var g="video-react/RATE_CHANGE";t.RATE_CHANGE=g;var k="video-react/SUSPEND";t.SUSPEND=k;var b="video-react/ABORT";t.ABORT=b;var w="video-react/EMPTIED";t.EMPTIED=w;var x="video-react/STALLED";t.STALLED=x;var E="video-react/LOADED_META_DATA";t.LOADED_META_DATA=E;var _="video-react/LOADED_DATA";t.LOADED_DATA=_;var I="video-react/RESIZE";t.RESIZE=I;var T="video-react/ERROR";t.ERROR=T;var S="video-react/ACTIVATE_TEXT_TRACK";t.ACTIVATE_TEXT_TRACK=S},9635:function(e,t,n){"use strict";var r=n(862),i=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(4575)),o=i(n(3913)),u=i(n(8585)),s=i(n(9754)),c=i(n(1506)),l=i(n(2205)),f=i(n(2007)),d=r(n(2791)),h=i(n(1694)),p={manager:f.default.object,className:f.default.string},v=function(e){function t(e,n){var r;return(0,a.default)(this,t),(r=(0,u.default)(this,(0,s.default)(t).call(this,e,n))).timer=null,e.manager.subscribeToOperationStateChange(r.handleStateChange.bind((0,c.default)(r))),r.state={hidden:!0,operation:{}},r}return(0,l.default)(t,e),(0,o.default)(t,[{key:"handleStateChange",value:function(e,t){var n=this;e.count!==t.count&&"shortcut"===e.operation.source&&(this.timer&&(clearTimeout(this.timer),this.timer=null),this.setState({hidden:!1,count:e.count,operation:e.operation}),this.timer=setTimeout((function(){n.setState({hidden:!0}),n.timer=null}),500))}},{key:"render",value:function(){if("shortcut"!==this.state.operation.source)return null;var e=this.state.hidden?{display:"none"}:null;return d.default.createElement("div",{className:(0,h.default)({"video-react-bezel":!0,"video-react-bezel-animation":this.state.count%2===0,"video-react-bezel-animation-alt":this.state.count%2===1},this.props.className),style:e,role:"status","aria-label":this.state.operation.action},d.default.createElement("div",{className:(0,h.default)("video-react-bezel-icon","video-react-bezel-icon-".concat(this.state.operation.action))}))}}]),t}(d.Component);t.default=v,v.propTypes=p,v.displayName="Bezel"},8453:function(e,t,n){"use strict";var r=n(862),i=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(4575)),o=i(n(3913)),u=i(n(8585)),s=i(n(9754)),c=i(n(1506)),l=i(n(2205)),f=i(n(2007)),d=r(n(2791)),h=i(n(1694)),p={actions:f.default.object,player:f.default.object,position:f.default.string,className:f.default.string},v=function(e){function t(e,n){var r;return(0,a.default)(this,t),(r=(0,u.default)(this,(0,s.default)(t).call(this,e,n))).handleClick=r.handleClick.bind((0,c.default)(r)),r}return(0,l.default)(t,e),(0,o.default)(t,[{key:"componentDidMount",value:function(){}},{key:"handleClick",value:function(){this.props.actions.play()}},{key:"render",value:function(){var e=this.props,t=e.player,n=e.position;return d.default.createElement("button",{className:(0,h.default)("video-react-button","video-react-big-play-button","video-react-big-play-button-".concat(n),this.props.className,{"big-play-button-hide":t.hasStarted||!t.currentSrc}),type:"button","aria-live":"polite",tabIndex:"0",onClick:this.handleClick},d.default.createElement("span",{className:"video-react-control-text"},"Play Video"))}}]),t}(d.Component);t.default=v,v.propTypes=p,v.defaultProps={position:"left"},v.displayName="BigPlayButton"},6656:function(e,t,n){"use strict";var r=n(862),i=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(7154)),o=i(n(693)),u=i(n(4575)),s=i(n(3913)),c=i(n(8585)),l=i(n(9754)),f=i(n(1506)),d=i(n(2205)),h=i(n(2007)),p=r(n(2791)),v=i(n(1694)),y={tagName:h.default.string,onClick:h.default.func.isRequired,onFocus:h.default.func,onBlur:h.default.func,className:h.default.string},m=function(e){function t(e,n){var r;return(0,u.default)(this,t),(r=(0,c.default)(this,(0,l.default)(t).call(this,e,n))).handleClick=r.handleClick.bind((0,f.default)(r)),r.handleFocus=r.handleFocus.bind((0,f.default)(r)),r.handleBlur=r.handleBlur.bind((0,f.default)(r)),r.handleKeypress=r.handleKeypress.bind((0,f.default)(r)),r}return(0,d.default)(t,e),(0,s.default)(t,[{key:"componentWillUnmount",value:function(e){this.handleBlur(e)}},{key:"handleKeypress",value:function(e){32!==e.which&&13!==e.which||(e.preventDefault(),this.handleClick(e))}},{key:"handleClick",value:function(e){(0,this.props.onClick)(e)}},{key:"handleFocus",value:function(e){document.addEventListener("keydown",this.handleKeypress),this.props.onFocus&&this.props.onFocus(e)}},{key:"handleBlur",value:function(e){document.removeEventListener("keydown",this.handleKeypress),this.props.onBlur&&this.props.onBlur(e)}},{key:"render",value:function(){var e=this.props.tagName,t=(0,o.default)({},this.props);return delete t.tagName,delete t.className,p.default.createElement(e,(0,a.default)({className:(0,v.default)(this.props.className),role:"button",tabIndex:"0",onClick:this.handleClick,onFocus:this.handleFocus,onBlur:this.handleBlur},t))}}]),t}(p.Component);t.default=m,m.propTypes=y,m.defaultProps={tagName:"div"},m.displayName="ClickableComponent"},7374:function(e,t,n){"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var i=r(n(2007)),a=r(n(2791)),o=r(n(1694)),u={player:i.default.object,className:i.default.string};function s(e){var t=e.player,n=e.className;return t.error?null:a.default.createElement("div",{className:(0,o.default)("video-react-loading-spinner",n)})}s.propTypes=u,s.displayName="LoadingSpinner"},8549:function(e,t,n){"use strict";var r=n(862),i=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(693)),o=i(n(9713)),u=i(n(6479)),s=i(n(4575)),c=i(n(3913)),l=i(n(8585)),f=i(n(9754)),d=i(n(1506)),h=i(n(2205)),p=i(n(2007)),v=r(n(2791)),y=i(n(1694)),m=i(n(5132)),g=i(n(8453)),k=i(n(7374)),b=i(n(1517)),w=i(n(3289)),x=i(n(9635)),E=i(n(6300)),_=i(n(2613)),I=r(n(5695)),T=n(7463),S=n(4737),C=i(n(4889)),N={children:p.default.any,width:p.default.oneOfType([p.default.string,p.default.number]),height:p.default.oneOfType([p.default.string,p.default.number]),fluid:p.default.bool,muted:p.default.bool,playsInline:p.default.bool,aspectRatio:p.default.string,className:p.default.string,videoId:p.default.string,startTime:p.default.number,loop:p.default.bool,autoPlay:p.default.bool,src:p.default.string,poster:p.default.string,preload:p.default.oneOf(["auto","metadata","none"]),onLoadStart:p.default.func,onWaiting:p.default.func,onCanPlay:p.default.func,onCanPlayThrough:p.default.func,onPlaying:p.default.func,onEnded:p.default.func,onSeeking:p.default.func,onSeeked:p.default.func,onPlay:p.default.func,onPause:p.default.func,onProgress:p.default.func,onDurationChange:p.default.func,onError:p.default.func,onSuspend:p.default.func,onAbort:p.default.func,onEmptied:p.default.func,onStalled:p.default.func,onLoadedMetadata:p.default.func,onLoadedData:p.default.func,onTimeUpdate:p.default.func,onRateChange:p.default.func,onVolumeChange:p.default.func,store:p.default.object},P=function(e){function t(e){var n;return(0,s.default)(this,t),(n=(0,l.default)(this,(0,f.default)(t).call(this,e))).controlsHideTimer=null,n.video=null,n.manager=new m.default(e.store),n.actions=n.manager.getActions(),n.manager.subscribeToPlayerStateChange(n.handleStateChange.bind((0,d.default)(n))),n.getStyle=n.getStyle.bind((0,d.default)(n)),n.handleResize=n.handleResize.bind((0,d.default)(n)),n.getChildren=n.getChildren.bind((0,d.default)(n)),n.handleMouseMove=(0,S.throttle)(n.handleMouseMove.bind((0,d.default)(n)),250),n.handleMouseDown=n.handleMouseDown.bind((0,d.default)(n)),n.startControlsTimer=n.startControlsTimer.bind((0,d.default)(n)),n.handleFullScreenChange=n.handleFullScreenChange.bind((0,d.default)(n)),n.handleKeyDown=n.handleKeyDown.bind((0,d.default)(n)),n.handleFocus=n.handleFocus.bind((0,d.default)(n)),n.handleBlur=n.handleBlur.bind((0,d.default)(n)),n}return(0,h.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){this.handleResize(),window.addEventListener("resize",this.handleResize),C.default.addEventListener(this.handleFullScreenChange)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),C.default.removeEventListener(this.handleFullScreenChange),this.controlsHideTimer&&window.clearTimeout(this.controlsHideTimer)}},{key:"getDefaultChildren",value:function(e){var t=this;return[v.default.createElement(w.default,{ref:function(e){t.video=e,t.manager.video=t.video},key:"video",order:0},e),v.default.createElement(b.default,{key:"poster-image",order:1}),v.default.createElement(k.default,{key:"loading-spinner",order:2}),v.default.createElement(x.default,{key:"bezel",order:3}),v.default.createElement(g.default,{key:"big-play-button",order:4}),v.default.createElement(_.default,{key:"control-bar",order:5}),v.default.createElement(E.default,{key:"shortcut",order:99})]}},{key:"getChildren",value:function(e){e.className;var t=e.children,n=(0,u.default)(e,["className","children"]),r=v.default.Children.toArray(this.props.children).filter((function(e){return!(0,S.isVideoChild)(e)})),i=this.getDefaultChildren(t);return(0,S.mergeAndSortChildren)(i,r,n)}},{key:"setWidthOrHeight",value:function(e,t,n){var r;"string"===typeof n?"auto"===n?r="auto":n.match(/\d+%/)&&(r=n):"number"===typeof n&&(r="".concat(n,"px")),Object.assign(e,(0,o.default)({},t,r))}},{key:"getStyle",value:function(){var e,t,n=this.props,r=n.fluid,i=n.aspectRatio,a=n.height,o=n.width,u=this.manager.getState().player,s={},c=(void 0!==i&&"auto"!==i?i:u.videoWidth?"".concat(u.videoWidth,":").concat(u.videoHeight):"16:9").split(":"),l=c[1]/c[0];return e=void 0!==o?o:void 0!==a?a/l:u.videoWidth||400,t=void 0!==a?a:e*l,r?s.paddingTop="".concat(100*l,"%"):(this.setWidthOrHeight(s,"width",e),this.setWidthOrHeight(s,"height",t)),s}},{key:"getState",value:function(){return this.manager.getState()}},{key:"play",value:function(){this.video.play()}},{key:"pause",value:function(){this.video.pause()}},{key:"load",value:function(){this.video.load()}},{key:"addTextTrack",value:function(){var e;(e=this.video).addTextTrack.apply(e,arguments)}},{key:"canPlayType",value:function(){var e;(e=this.video).canPlayType.apply(e,arguments)}},{key:"seek",value:function(e){this.video.seek(e)}},{key:"forward",value:function(e){this.video.forward(e)}},{key:"replay",value:function(e){this.video.replay(e)}},{key:"toggleFullscreen",value:function(){this.video.toggleFullscreen()}},{key:"subscribeToStateChange",value:function(e){return this.manager.subscribeToPlayerStateChange(e)}},{key:"handleResize",value:function(){}},{key:"handleFullScreenChange",value:function(e){e.target===this.manager.rootElement&&this.actions.handleFullscreenChange(C.default.isFullscreen)}},{key:"handleMouseDown",value:function(){this.startControlsTimer()}},{key:"handleMouseMove",value:function(){this.startControlsTimer()}},{key:"handleKeyDown",value:function(){this.startControlsTimer()}},{key:"startControlsTimer",value:function(){var e=this,t=3e3;v.default.Children.forEach(this.props.children,(function(e){if(v.default.isValidElement(e)&&e.type===_.default){var n=e.props.autoHideTime;"number"===typeof n&&(t=n)}})),this.actions.userActivate(!0),clearTimeout(this.controlsHideTimer),this.controlsHideTimer=setTimeout((function(){e.actions.userActivate(!1)}),t)}},{key:"handleStateChange",value:function(e,t){e.isFullscreen!==t.isFullscreen&&(this.handleResize(),(0,T.focusNode)(this.manager.rootElement)),this.forceUpdate()}},{key:"handleFocus",value:function(){this.actions.activate(!0)}},{key:"handleBlur",value:function(){this.actions.activate(!1)}},{key:"render",value:function(){var e=this,t=this.props.fluid,n=this.manager.getState().player,r=n.paused,i=n.hasStarted,o=n.waiting,u=n.seeking,s=n.isFullscreen,c=n.userActivity,l=(0,a.default)({},this.props,{player:n,actions:this.actions,manager:this.manager,store:this.manager.store,video:this.video?this.video.video:null}),f=this.getChildren(l);return v.default.createElement("div",{className:(0,y.default)({"video-react-controls-enabled":!0,"video-react-has-started":i,"video-react-paused":r,"video-react-playing":!r,"video-react-waiting":o,"video-react-seeking":u,"video-react-fluid":t,"video-react-fullscreen":s,"video-react-user-inactive":!c,"video-react-user-active":c,"video-react-workinghover":!I.IS_IOS},"video-react",this.props.className),style:this.getStyle(),ref:function(t){e.manager.rootElement=t},role:"region",onTouchStart:this.handleMouseDown,onMouseDown:this.handleMouseDown,onTouchMove:this.handleMouseMove,onMouseMove:this.handleMouseMove,onKeyDown:this.handleKeyDown,onFocus:this.handleFocus,onBlur:this.handleBlur,tabIndex:"-1"},f)}},{key:"playbackRate",get:function(){return this.video.playbackRate},set:function(e){this.video.playbackRate=e}},{key:"muted",get:function(){return this.video.muted},set:function(e){this.video.muted=e}},{key:"volume",get:function(){return this.video.volume},set:function(e){this.video.volume=e}},{key:"videoWidth",get:function(){return this.video.videoWidth}},{key:"videoHeight",get:function(){return this.video.videoHeight}}]),t}(v.Component);t.default=P,P.contextTypes={store:p.default.object},P.propTypes=N,P.defaultProps={fluid:!0,muted:!1,playsInline:!1,preload:"auto",aspectRatio:"auto"},P.displayName="Player"},1517:function(e,t,n){"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(2007)),a=r(n(2791)),o=r(n(1694)),u={poster:i.default.string,player:i.default.object,actions:i.default.object,className:i.default.string};function s(e){var t=e.poster,n=e.player,r=e.actions,i=e.className;return!t||n.hasStarted?null:a.default.createElement("div",{className:(0,o.default)("video-react-poster",i),style:{backgroundImage:'url("'.concat(t,'")')},onClick:function(){n.paused&&r.play()}})}s.propTypes=u,s.displayName="PosterImage";var c=s;t.default=c},6300:function(e,t,n){"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(9713)),a=r(n(319)),o=r(n(4575)),u=r(n(3913)),s=r(n(8585)),c=r(n(9754)),l=r(n(1506)),f=r(n(2205)),d=n(2791),h=r(n(2007)),p=n(7463),v={clickable:h.default.bool,dblclickable:h.default.bool,manager:h.default.object,actions:h.default.object,player:h.default.object,shortcuts:h.default.array},y=function(e){function t(e,n){var r;return(0,o.default)(this,t),(r=(0,s.default)(this,(0,c.default)(t).call(this,e,n))).defaultShortcuts=[{keyCode:32,handle:r.togglePlay},{keyCode:75,handle:r.togglePlay},{keyCode:70,handle:r.toggleFullscreen},{keyCode:37,handle:function(e,t){e.hasStarted&&t.replay(5,{action:"replay-5",source:"shortcut"})}},{keyCode:74,handle:function(e,t){e.hasStarted&&t.replay(10,{action:"replay-10",source:"shortcut"})}},{keyCode:39,handle:function(e,t){e.hasStarted&&t.forward(5,{action:"forward-5",source:"shortcut"})}},{keyCode:76,handle:function(e,t){e.hasStarted&&t.forward(10,{action:"forward-10",source:"shortcut"})}},{keyCode:36,handle:function(e,t){e.hasStarted&&t.seek(0)}},{keyCode:35,handle:function(e,t){e.hasStarted&&t.seek(e.duration)}},{keyCode:38,handle:function(e,t){var n=e.volume+.05;n>1&&(n=1),t.changeVolume(n,{action:"volume-up",source:"shortcut"})}},{keyCode:40,handle:function(e,t){var n=e.volume-.05;n<0&&(n=0);var r=n>0?"volume-down":"volume-off";t.changeVolume(n,{action:r,source:"shortcut"})}},{keyCode:190,shift:!0,handle:function(e,t){var n=e.playbackRate;n>=1.5?n=2:n>=1.25?n=1.5:n>=1?n=1.25:n>=.5?n=1:n>=.25?n=.5:n>=0&&(n=.25),t.changeRate(n,{action:"fast-forward",source:"shortcut"})}},{keyCode:188,shift:!0,handle:function(e,t){var n=e.playbackRate;n<=.5?n=.25:n<=1?n=.5:n<=1.25?n=1:n<=1.5?n=1.25:n<=2&&(n=1.5),t.changeRate(n,{action:"fast-rewind",source:"shortcut"})}}],r.shortcuts=(0,a.default)(r.defaultShortcuts),r.mergeShortcuts=r.mergeShortcuts.bind((0,l.default)(r)),r.handleKeyPress=r.handleKeyPress.bind((0,l.default)(r)),r.handleClick=r.handleClick.bind((0,l.default)(r)),r.handleDoubleClick=r.handleDoubleClick.bind((0,l.default)(r)),r}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.mergeShortcuts(),document.addEventListener("keydown",this.handleKeyPress),document.addEventListener("click",this.handleClick),document.addEventListener("dblclick",this.handleDoubleClick)}},{key:"componentDidUpdate",value:function(e){e.shortcuts!==this.props.shortcuts&&this.mergeShortcuts()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyPress),document.removeEventListener("click",this.handleClick),document.removeEventListener("dblclick",this.handleDoubleClick)}},{key:"mergeShortcuts",value:function(){var e=function(e){var t=e.keyCode,n=void 0===t?0:t,r=e.ctrl,i=void 0!==r&&r,a=e.shift,o=void 0!==a&&a,u=e.alt,s=void 0!==u&&u;return"".concat(n,":").concat(i,":").concat(o,":").concat(s)},t=this.defaultShortcuts.reduce((function(t,n){return Object.assign(t,(0,i.default)({},e(n),n))}),{}),n=(this.props.shortcuts||[]).reduce((function(t,n){var r=n.keyCode,a=n.handle;return r&&"function"===typeof a?Object.assign(t,(0,i.default)({},e(n),n)):t}),t),r=function(e){var t=0;return["ctrl","shift","alt"].forEach((function(n){e[n]&&t++})),t};this.shortcuts=Object.keys(n).map((function(e){return n[e]})).sort((function(e,t){return r(t)-r(e)}))}},{key:"togglePlay",value:function(e,t){e.paused?t.play({action:"play",source:"shortcut"}):t.pause({action:"pause",source:"shortcut"})}},{key:"toggleFullscreen",value:function(e,t){t.toggleFullscreen(e)}},{key:"handleKeyPress",value:function(e){var t=this.props,n=t.player,r=t.actions;if(n.isActive&&(!document.activeElement||!((0,p.hasClass)(document.activeElement,"video-react-control")||(0,p.hasClass)(document.activeElement,"video-react-menu-button-active")||(0,p.hasClass)(document.activeElement,"video-react-big-play-button")))){var i=e.keyCode||e.which,a=e.ctrlKey||e.metaKey,o=e.shiftKey,u=e.altKey,s=this.shortcuts.filter((function(e){return!(!e.keyCode||e.keyCode-i!==0)&&!(void 0!==e.ctrl&&e.ctrl!==a||void 0!==e.shift&&e.shift!==o||void 0!==e.alt&&e.alt!==u)}))[0];s&&(s.handle(n,r),e.preventDefault())}}},{key:"canBeClicked",value:function(e,t){return!(!e.isActive||"VIDEO"!==t.target.nodeName||4!==e.readyState)}},{key:"handleClick",value:function(e){var t=this.props,n=t.player,r=t.actions,i=t.clickable;this.canBeClicked(n,e)&&i&&this.togglePlay(n,r)}},{key:"handleDoubleClick",value:function(e){var t=this.props,n=t.player,r=t.actions,i=t.dblclickable;this.canBeClicked(n,e)&&i&&this.toggleFullscreen(n,r)}},{key:"render",value:function(){return null}}]),t}(d.Component);t.default=y,y.propTypes=v,y.defaultProps={clickable:!0,dblclickable:!0},y.displayName="Shortcut"},6054:function(e,t,n){"use strict";var r=n(862),i=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(4575)),o=i(n(3913)),u=i(n(8585)),s=i(n(9754)),c=i(n(1506)),l=i(n(2205)),f=i(n(2007)),d=r(n(2791)),h=i(n(1694)),p=r(n(7463)),v={className:f.default.string,onMouseDown:f.default.func,onMouseMove:f.default.func,stepForward:f.default.func,stepBack:f.default.func,sliderActive:f.default.func,sliderInactive:f.default.func,onMouseUp:f.default.func,onFocus:f.default.func,onBlur:f.default.func,onClick:f.default.func,getPercent:f.default.func,vertical:f.default.bool,children:f.default.node,label:f.default.string,valuenow:f.default.string,valuetext:f.default.string},y=function(e){function t(e,n){var r;return(0,a.default)(this,t),(r=(0,u.default)(this,(0,s.default)(t).call(this,e,n))).handleMouseDown=r.handleMouseDown.bind((0,c.default)(r)),r.handleMouseMove=r.handleMouseMove.bind((0,c.default)(r)),r.handleMouseUp=r.handleMouseUp.bind((0,c.default)(r)),r.handleFocus=r.handleFocus.bind((0,c.default)(r)),r.handleBlur=r.handleBlur.bind((0,c.default)(r)),r.handleClick=r.handleClick.bind((0,c.default)(r)),r.handleKeyPress=r.handleKeyPress.bind((0,c.default)(r)),r.stepForward=r.stepForward.bind((0,c.default)(r)),r.stepBack=r.stepBack.bind((0,c.default)(r)),r.calculateDistance=r.calculateDistance.bind((0,c.default)(r)),r.getProgress=r.getProgress.bind((0,c.default)(r)),r.renderChildren=r.renderChildren.bind((0,c.default)(r)),r.state={active:!1},r}return(0,l.default)(t,e),(0,o.default)(t,[{key:"componentWillUnmount",value:function(){document.removeEventListener("mousemove",this.handleMouseMove,!0),document.removeEventListener("mouseup",this.handleMouseUp,!0),document.removeEventListener("touchmove",this.handleMouseMove,!0),document.removeEventListener("touchend",this.handleMouseUp,!0),document.removeEventListener("keydown",this.handleKeyPress,!0)}},{key:"getProgress",value:function(){var e=this.props.getPercent;if(!e)return 0;var t=e();return("number"!==typeof t||t<0||t===1/0)&&(t=0),t}},{key:"handleMouseDown",value:function(e){var t=this.props.onMouseDown;document.addEventListener("mousemove",this.handleMouseMove,!0),document.addEventListener("mouseup",this.handleMouseUp,!0),document.addEventListener("touchmove",this.handleMouseMove,!0),document.addEventListener("touchend",this.handleMouseUp,!0),this.setState({active:!0}),this.props.sliderActive&&this.props.sliderActive(e),this.handleMouseMove(e),t&&t(e)}},{key:"handleMouseMove",value:function(e){var t=this.props.onMouseMove;t&&t(e)}},{key:"handleMouseUp",value:function(e){e.preventDefault();var t=this.props.onMouseUp;document.removeEventListener("mousemove",this.handleMouseMove,!0),document.removeEventListener("mouseup",this.handleMouseUp,!0),document.removeEventListener("touchmove",this.handleMouseMove,!0),document.removeEventListener("touchend",this.handleMouseUp,!0),this.setState({active:!1}),this.props.sliderInactive&&this.props.sliderInactive(e),t&&t(e)}},{key:"handleFocus",value:function(e){document.addEventListener("keydown",this.handleKeyPress,!0),this.props.onFocus&&this.props.onFocus(e)}},{key:"handleBlur",value:function(e){document.removeEventListener("keydown",this.handleKeyPress,!0),this.props.onBlur&&this.props.onBlur(e)}},{key:"handleClick",value:function(e){e.preventDefault(),this.props.onClick&&this.props.onClick(e)}},{key:"handleKeyPress",value:function(e){37===e.which||40===e.which?(e.preventDefault(),e.stopPropagation(),this.stepBack()):38!==e.which&&39!==e.which||(e.preventDefault(),e.stopPropagation(),this.stepForward())}},{key:"stepForward",value:function(){this.props.stepForward&&this.props.stepForward()}},{key:"stepBack",value:function(){this.props.stepBack&&this.props.stepBack()}},{key:"calculateDistance",value:function(e){var t=this.slider,n=p.getPointerPosition(t,e);return this.props.vertical?n.y:n.x}},{key:"renderChildren",value:function(){var e=this.getProgress(),t="".concat((100*e).toFixed(2),"%");return d.default.Children.map(this.props.children,(function(n){return d.default.cloneElement(n,{progress:e,percentage:t})}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.vertical,r=t.label,i=t.valuenow,a=t.valuetext;return d.default.createElement("div",{className:(0,h.default)(this.props.className,{"video-react-slider-vertical":n,"video-react-slider-horizontal":!n,"video-react-sliding":this.state.active},"video-react-slider"),ref:function(t){e.slider=t},tabIndex:"0",role:"slider",onMouseDown:this.handleMouseDown,onTouchStart:this.handleMouseDown,onFocus:this.handleFocus,onBlur:this.handleBlur,onClick:this.handleClick,"aria-label":r||"","aria-valuenow":i||"","aria-valuetext":a||"","aria-valuemin":0,"aria-valuemax":100},this.renderChildren())}}]),t}(d.Component);t.default=y,y.propTypes=v,y.displayName="Slider"},3289:function(e,t,n){"use strict";var r=n(862),i=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(693)),o=i(n(4575)),u=i(n(3913)),s=i(n(8585)),c=i(n(9754)),l=i(n(1506)),f=i(n(2205)),d=i(n(2007)),h=r(n(2791)),p=i(n(1694)),v=n(4737),y={actions:d.default.object,player:d.default.object,children:d.default.any,startTime:d.default.number,loop:d.default.bool,muted:d.default.bool,autoPlay:d.default.bool,playsInline:d.default.bool,src:d.default.string,poster:d.default.string,className:d.default.string,preload:d.default.oneOf(["auto","metadata","none"]),crossOrigin:d.default.string,onLoadStart:d.default.func,onWaiting:d.default.func,onCanPlay:d.default.func,onCanPlayThrough:d.default.func,onPlaying:d.default.func,onEnded:d.default.func,onSeeking:d.default.func,onSeeked:d.default.func,onPlay:d.default.func,onPause:d.default.func,onProgress:d.default.func,onDurationChange:d.default.func,onError:d.default.func,onSuspend:d.default.func,onAbort:d.default.func,onEmptied:d.default.func,onStalled:d.default.func,onLoadedMetadata:d.default.func,onLoadedData:d.default.func,onTimeUpdate:d.default.func,onRateChange:d.default.func,onVolumeChange:d.default.func,onResize:d.default.func},m=function(e){function t(e){var n;return(0,o.default)(this,t),(n=(0,s.default)(this,(0,c.default)(t).call(this,e))).video=null,n.play=n.play.bind((0,l.default)(n)),n.pause=n.pause.bind((0,l.default)(n)),n.seek=n.seek.bind((0,l.default)(n)),n.forward=n.forward.bind((0,l.default)(n)),n.replay=n.replay.bind((0,l.default)(n)),n.toggleFullscreen=n.toggleFullscreen.bind((0,l.default)(n)),n.getProperties=n.getProperties.bind((0,l.default)(n)),n.renderChildren=n.renderChildren.bind((0,l.default)(n)),n.handleLoadStart=n.handleLoadStart.bind((0,l.default)(n)),n.handleCanPlay=n.handleCanPlay.bind((0,l.default)(n)),n.handleCanPlayThrough=n.handleCanPlayThrough.bind((0,l.default)(n)),n.handlePlay=n.handlePlay.bind((0,l.default)(n)),n.handlePlaying=n.handlePlaying.bind((0,l.default)(n)),n.handlePause=n.handlePause.bind((0,l.default)(n)),n.handleEnded=n.handleEnded.bind((0,l.default)(n)),n.handleWaiting=n.handleWaiting.bind((0,l.default)(n)),n.handleSeeking=n.handleSeeking.bind((0,l.default)(n)),n.handleSeeked=n.handleSeeked.bind((0,l.default)(n)),n.handleFullscreenChange=n.handleFullscreenChange.bind((0,l.default)(n)),n.handleError=n.handleError.bind((0,l.default)(n)),n.handleSuspend=n.handleSuspend.bind((0,l.default)(n)),n.handleAbort=n.handleAbort.bind((0,l.default)(n)),n.handleEmptied=n.handleEmptied.bind((0,l.default)(n)),n.handleStalled=n.handleStalled.bind((0,l.default)(n)),n.handleLoadedMetaData=n.handleLoadedMetaData.bind((0,l.default)(n)),n.handleLoadedData=n.handleLoadedData.bind((0,l.default)(n)),n.handleTimeUpdate=n.handleTimeUpdate.bind((0,l.default)(n)),n.handleRateChange=n.handleRateChange.bind((0,l.default)(n)),n.handleVolumeChange=n.handleVolumeChange.bind((0,l.default)(n)),n.handleDurationChange=n.handleDurationChange.bind((0,l.default)(n)),n.handleProgress=(0,v.throttle)(n.handleProgress.bind((0,l.default)(n)),250),n.handleKeypress=n.handleKeypress.bind((0,l.default)(n)),n.handleTextTrackChange=n.handleTextTrackChange.bind((0,l.default)(n)),n}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.forceUpdate(),this.video&&this.video.textTracks&&(this.video.textTracks.onaddtrack=this.handleTextTrackChange,this.video.textTracks.onremovetrack=this.handleTextTrackChange)}},{key:"getProperties",value:function(){var e=this;return this.video?v.mediaProperties.reduce((function(t,n){return t[n]=e.video[n],t}),{}):null}},{key:"handleTextTrackChange",value:function(){var e=this.props,t=e.actions,n=e.player;if(this.video&&this.video.textTracks){var r=Array.from(this.video.textTracks).find((function(e){return"showing"===e.mode}));r!==n.activeTextTrack&&t.activateTextTrack(r)}}},{key:"play",value:function(){var e=this.video.play();void 0!==e&&e.catch((function(){})).then((function(){}))}},{key:"pause",value:function(){var e=this.video.pause();void 0!==e&&e.catch((function(){})).then((function(){}))}},{key:"load",value:function(){this.video.load()}},{key:"addTextTrack",value:function(){var e;(e=this.video).addTextTrack.apply(e,arguments)}},{key:"canPlayType",value:function(){var e;(e=this.video).canPlayType.apply(e,arguments)}},{key:"togglePlay",value:function(){this.video.paused?this.play():this.pause()}},{key:"seek",value:function(e){try{this.video.currentTime=e}catch(t){}}},{key:"forward",value:function(e){this.seek(this.video.currentTime+e)}},{key:"replay",value:function(e){this.forward(-e)}},{key:"toggleFullscreen",value:function(){var e=this.props,t=e.player;e.actions.toggleFullscreen(t)}},{key:"handleLoadStart",value:function(){var e=this.props,t=e.actions,n=e.onLoadStart;t.handleLoadStart(this.getProperties()),n&&n.apply(void 0,arguments)}},{key:"handleCanPlay",value:function(){var e=this.props,t=e.actions,n=e.onCanPlay;t.handleCanPlay(this.getProperties()),n&&n.apply(void 0,arguments)}},{key:"handleCanPlayThrough",value:function(){var e=this.props,t=e.actions,n=e.onCanPlayThrough;t.handleCanPlayThrough(this.getProperties()),n&&n.apply(void 0,arguments)}},{key:"handlePlaying",value:function(){var e=this.props,t=e.actions,n=e.onPlaying;t.handlePlaying(this.getProperties()),n&&n.apply(void 0,arguments)}},{key:"handlePlay",value:function(){var e=this.props,t=e.actions,n=e.onPlay;t.handlePlay(this.getProperties()),n&&n.apply(void 0,arguments)}},{key:"handlePause",value:function(){var e=this.props,t=e.actions,n=e.onPause;t.handlePause(this.getProperties()),n&&n.apply(void 0,arguments)}},{key:"handleDurationChange",value:function(){var e=this.props,t=e.actions,n=e.onDurationChange;t.handleDurationChange(this.getProperties()),n&&n.apply(void 0,arguments)}},{key:"handleProgress",value:function(){var e=this.props,t=e.actions,n=e.onProgress;this.video&&t.handleProgressChange(this.getProperties()),n&&n.apply(void 0,arguments)}},{key:"handleEnded",value:function(){var e=this.props,t=e.loop,n=e.player,r=e.actions,i=e.onEnded;t?(this.seek(0),this.play()):n.paused||this.pause(),r.handleEnd(this.getProperties()),i&&i.apply(void 0,arguments)}},{key:"handleWaiting",value:function(){var e=this.props,t=e.actions,n=e.onWaiting;t.handleWaiting(this.getProperties()),n&&n.apply(void 0,arguments)}},{key:"handleSeeking",value:function(){var e=this.props,t=e.actions,n=e.onSeeking;t.handleSeeking(this.getProperties()),n&&n.apply(void 0,arguments)}},{key:"handleSeeked",value:function(){var e=this.props,t=e.actions,n=e.onSeeked;t.handleSeeked(this.getProperties()),n&&n.apply(void 0,arguments)}},{key:"handleFullscreenChange",value:function(){}},{key:"handleSuspend",value:function(){var e=this.props,t=e.actions,n=e.onSuspend;t.handleSuspend(this.getProperties()),n&&n.apply(void 0,arguments)}},{key:"handleAbort",value:function(){var e=this.props,t=e.actions,n=e.onAbort;t.handleAbort(this.getProperties()),n&&n.apply(void 0,arguments)}},{key:"handleEmptied",value:function(){var e=this.props,t=e.actions,n=e.onEmptied;t.handleEmptied(this.getProperties()),n&&n.apply(void 0,arguments)}},{key:"handleStalled",value:function(){var e=this.props,t=e.actions,n=e.onStalled;t.handleStalled(this.getProperties()),n&&n.apply(void 0,arguments)}},{key:"handleLoadedMetaData",value:function(){var e=this.props,t=e.actions,n=e.onLoadedMetadata,r=e.startTime;r&&r>0&&(this.video.currentTime=r),t.handleLoadedMetaData(this.getProperties()),n&&n.apply(void 0,arguments)}},{key:"handleLoadedData",value:function(){var e=this.props,t=e.actions,n=e.onLoadedData;t.handleLoadedData(this.getProperties()),n&&n.apply(void 0,arguments)}},{key:"handleTimeUpdate",value:function(){var e=this.props,t=e.actions,n=e.onTimeUpdate;t.handleTimeUpdate(this.getProperties()),n&&n.apply(void 0,arguments)}},{key:"handleRateChange",value:function(){var e=this.props,t=e.actions,n=e.onRateChange;t.handleRateChange(this.getProperties()),n&&n.apply(void 0,arguments)}},{key:"handleVolumeChange",value:function(){var e=this.props,t=e.actions,n=e.onVolumeChange;t.handleVolumeChange(this.getProperties()),n&&n.apply(void 0,arguments)}},{key:"handleError",value:function(){var e=this.props,t=e.actions,n=e.onError;t.handleError(this.getProperties()),n&&n.apply(void 0,arguments)}},{key:"handleResize",value:function(){var e=this.props,t=e.actions,n=e.onResize;t.handleResize(this.getProperties()),n&&n.apply(void 0,arguments)}},{key:"handleKeypress",value:function(){}},{key:"renderChildren",value:function(){var e=this,t=(0,a.default)({},this.props,{video:this.video});return this.video?h.default.Children.toArray(this.props.children).filter(v.isVideoChild).map((function(n){var r;if("string"===typeof n.type){if("source"===n.type){var i=(r=(0,a.default)({},n.props)).onError;r.onError=function(){i&&i.apply(void 0,arguments),e.handleError.apply(e,arguments)}}}else r=t;return h.default.cloneElement(n,r)})):null}},{key:"render",value:function(){var e=this,t=this.props,n=t.loop,r=t.poster,i=t.preload,a=t.src,o=t.autoPlay,u=t.playsInline,s=t.muted,c=t.crossOrigin,l=t.videoId;return h.default.createElement("video",{className:(0,p.default)("video-react-video",this.props.className),id:l,crossOrigin:c,ref:function(t){e.video=t},muted:s,preload:i,loop:n,playsInline:u,autoPlay:o,poster:r,src:a,onLoadStart:this.handleLoadStart,onWaiting:this.handleWaiting,onCanPlay:this.handleCanPlay,onCanPlayThrough:this.handleCanPlayThrough,onPlaying:this.handlePlaying,onEnded:this.handleEnded,onSeeking:this.handleSeeking,onSeeked:this.handleSeeked,onPlay:this.handlePlay,onPause:this.handlePause,onProgress:this.handleProgress,onDurationChange:this.handleDurationChange,onError:this.handleError,onSuspend:this.handleSuspend,onAbort:this.handleAbort,onEmptied:this.handleEmptied,onStalled:this.handleStalled,onLoadedMetadata:this.handleLoadedMetaData,onLoadedData:this.handleLoadedData,onTimeUpdate:this.handleTimeUpdate,onRateChange:this.handleRateChange,onVolumeChange:this.handleVolumeChange,tabIndex:"-1"},this.renderChildren())}},{key:"playbackRate",get:function(){return this.video.playbackRate},set:function(e){this.video.playbackRate=e}},{key:"muted",get:function(){return this.video.muted},set:function(e){this.video.muted=e}},{key:"volume",get:function(){return this.video.volume},set:function(e){e>1&&(e=1),e<0&&(e=0),this.video.volume=e}},{key:"videoWidth",get:function(){return this.video.videoWidth}},{key:"videoHeight",get:function(){return this.video.videoHeight}}]),t}(h.Component);t.default=m,m.propTypes=y,m.displayName="Video"},7626:function(e,t,n){"use strict";var r=n(862),i=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(4575)),o=i(n(3913)),u=i(n(8585)),s=i(n(9754)),c=i(n(1506)),l=i(n(2205)),f=i(n(2007)),d=r(n(2791)),h=i(n(1694)),p=i(n(6143)),v={player:f.default.object,actions:f.default.object,className:f.default.string,offMenuText:f.default.string,showOffMenu:f.default.bool,kinds:f.default.array},y=function(e){function t(e,n){var r;return(0,a.default)(this,t),(r=(0,u.default)(this,(0,s.default)(t).call(this,e,n))).getTextTrackItems=r.getTextTrackItems.bind((0,c.default)(r)),r.updateState=r.updateState.bind((0,c.default)(r)),r.handleSelectItem=r.handleSelectItem.bind((0,c.default)(r)),r.state=r.getTextTrackItems(),r}return(0,l.default)(t,e),(0,o.default)(t,[{key:"componentDidUpdate",value:function(){this.updateState()}},{key:"getTextTrackItems",value:function(){var e=this.props,t=e.kinds,n=e.player,r=e.offMenuText,i=e.showOffMenu,a=n.textTracks,o=n.activeTextTrack,u={items:[],selectedIndex:0},s=Array.from(a||[]);return 0===s.length||(i&&u.items.push({label:r||"Off",value:null}),s.forEach((function(e){t.length&&!t.includes(e.kind)||u.items.push({label:e.label,value:e.language})})),u.selectedIndex=u.items.findIndex((function(e){return o&&o.language===e.value})),-1===u.selectedIndex&&(u.selectedIndex=0)),u}},{key:"updateState",value:function(){var e=this.getTextTrackItems();e.selectedIndex===this.state.selectedIndex&&this.textTrackItemsAreEqual(e.items,this.state.items)||this.setState(e)}},{key:"textTrackItemsAreEqual",value:function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!t[n]||e[n].label!==t[n].label||e[n].value!==t[n].value)return!1;return!0}},{key:"handleSelectItem",value:function(e){var t=this.props,n=t.player,r=t.actions,i=t.showOffMenu,a=n.textTracks;Array.from(a).forEach((function(t,n){e===(i?n+1:n)?(t.mode="showing",r.activateTextTrack(t)):t.mode="hidden"}))}},{key:"render",value:function(){var e=this.state,t=e.items,n=e.selectedIndex;return d.default.createElement(p.default,{className:(0,h.default)("video-react-closed-caption",this.props.className),onSelectItem:this.handleSelectItem,items:t,selectedIndex:n},d.default.createElement("span",{className:"video-react-control-text"},"Closed Caption"))}}]),t}(d.Component);y.propTypes=v,y.defaultProps={offMenuText:"Off",showOffMenu:!0,kinds:["captions","subtitles"]},y.displayName="ClosedCaptionButton";var m=y;t.default=m},2613:function(e,t,n){"use strict";var r=n(862),i=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(6479)),o=i(n(4575)),u=i(n(3913)),s=i(n(8585)),c=i(n(9754)),l=i(n(1506)),f=i(n(2205)),d=i(n(2007)),h=r(n(2791)),p=i(n(1694)),v=i(n(5749)),y=i(n(6441)),m=i(n(1389)),g=i(n(6062)),k=i(n(9478)),b=i(n(5683)),w=i(n(906)),x=i(n(2561)),E=i(n(4976)),_=i(n(4021)),I=i(n(5444)),T=n(4737),S={children:d.default.any,autoHide:d.default.bool,autoHideTime:d.default.number,disableDefaultControls:d.default.bool,disableCompletely:d.default.bool,className:d.default.string},C=function(e){function t(e){var n;return(0,o.default)(this,t),(n=(0,s.default)(this,(0,c.default)(t).call(this,e))).getDefaultChildren=n.getDefaultChildren.bind((0,l.default)(n)),n.getFullChildren=n.getFullChildren.bind((0,l.default)(n)),n}return(0,f.default)(t,e),(0,u.default)(t,[{key:"getDefaultChildren",value:function(){return[h.default.createElement(y.default,{key:"play-toggle",order:1}),h.default.createElement(_.default,{key:"volume-menu-button",order:4}),h.default.createElement(w.default,{key:"current-time-display",order:5.1}),h.default.createElement(E.default,{key:"time-divider",order:5.2}),h.default.createElement(x.default,{key:"duration-display",order:5.3}),h.default.createElement(v.default,{key:"progress-control",order:6}),h.default.createElement(k.default,{key:"fullscreen-toggle",order:8})]}},{key:"getFullChildren",value:function(){return[h.default.createElement(y.default,{key:"play-toggle",order:1}),h.default.createElement(g.default,{key:"replay-control",order:2}),h.default.createElement(m.default,{key:"forward-control",order:3}),h.default.createElement(_.default,{key:"volume-menu-button",order:4}),h.default.createElement(w.default,{key:"current-time-display",order:5}),h.default.createElement(E.default,{key:"time-divider",order:6}),h.default.createElement(x.default,{key:"duration-display",order:7}),h.default.createElement(v.default,{key:"progress-control",order:8}),h.default.createElement(b.default,{key:"remaining-time-display",order:9}),h.default.createElement(I.default,{rates:[1,1.25,1.5,2],key:"playback-rate",order:10}),h.default.createElement(k.default,{key:"fullscreen-toggle",order:11})]}},{key:"getChildren",value:function(){var e=h.default.Children.toArray(this.props.children),t=this.props.disableDefaultControls?[]:this.getDefaultChildren(),n=this.props,r=(n.className,(0,a.default)(n,["className"]));return(0,T.mergeAndSortChildren)(t,e,r)}},{key:"render",value:function(){var e=this.props,t=e.autoHide,n=e.className,r=e.disableCompletely,i=this.getChildren();return r?null:h.default.createElement("div",{className:(0,p.default)("video-react-control-bar",{"video-react-control-bar-auto-hide":t},n)},i)}}]),t}(h.Component);t.default=C,C.propTypes=S,C.defaultProps={autoHide:!0,disableCompletely:!1},C.displayName="ControlBar"},1389:function(e,t,n){"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=(0,r(n(3545)).default)("forward");i.displayName="ForwardControl";var a=i;t.default=a},3545:function(e,t,n){"use strict";var r=n(862),i=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(4575)),o=i(n(3913)),u=i(n(8585)),s=i(n(9754)),c=i(n(1506)),l=i(n(2205)),f=i(n(2007)),d=r(n(2791)),h={actions:f.default.object,className:f.default.string,seconds:f.default.oneOf([5,10,30])},p={seconds:10};t.default=function(e){var t=function(t){function n(e,t){var r;return(0,a.default)(this,n),(r=(0,u.default)(this,(0,s.default)(n).call(this,e,t))).handleClick=r.handleClick.bind((0,c.default)(r)),r}return(0,l.default)(n,t),(0,o.default)(n,[{key:"handleClick",value:function(){var t=this.props,n=t.actions,r=t.seconds;"forward"===e?n.forward(r):n.replay(r)}},{key:"render",value:function(){var t=this,n=this.props,r=n.seconds,i=n.className,a=["video-react-control","video-react-button","video-react-icon"];return a.push("video-react-icon-".concat(e,"-").concat(r),"video-react-".concat(e,"-control")),i&&a.push(i),d.default.createElement("button",{ref:function(e){t.button=e},className:a.join(" "),type:"button",onClick:this.handleClick},d.default.createElement("span",{className:"video-react-control-text"},"".concat(e," ").concat(r," seconds")))}}]),n}(d.Component);return t.propTypes=h,t.defaultProps=p,t}},9478:function(e,t,n){"use strict";var r=n(862),i=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(4575)),o=i(n(3913)),u=i(n(8585)),s=i(n(9754)),c=i(n(1506)),l=i(n(2205)),f=i(n(2007)),d=r(n(2791)),h=i(n(1694)),p={actions:f.default.object,player:f.default.object,className:f.default.string},v=function(e){function t(e,n){var r;return(0,a.default)(this,t),(r=(0,u.default)(this,(0,s.default)(t).call(this,e,n))).handleClick=r.handleClick.bind((0,c.default)(r)),r}return(0,l.default)(t,e),(0,o.default)(t,[{key:"handleClick",value:function(){var e=this.props,t=e.player;e.actions.toggleFullscreen(t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.player,r=t.className;return d.default.createElement("button",{className:(0,h.default)(r,{"video-react-icon-fullscreen-exit":n.isFullscreen,"video-react-icon-fullscreen":!n.isFullscreen},"video-react-fullscreen-control video-react-control video-react-button video-react-icon"),ref:function(t){e.button=t},type:"button",tabIndex:"0",onClick:this.handleClick},d.default.createElement("span",{className:"video-react-control-text"},"Non-Fullscreen"))}}]),t}(d.Component);t.default=v,v.propTypes=p,v.displayName="FullscreenToggle"},7435:function(e,t,n){"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var i=r(n(2007)),a=r(n(2791)),o=r(n(1694)),u={duration:i.default.number,buffered:i.default.object,className:i.default.string};function s(e){var t=e.buffered,n=e.duration,r=e.className;if(!t||!t.length)return null;var i=t.end(t.length-1),u={};function s(e,t){var n=e/t||0;return"".concat(100*(n>=1?1:n),"%")}i>n&&(i=n),u.width=s(i,n);for(var c=[],l=0;l<t.length;l++){var f=t.start(l),d=t.end(l),h=a.default.createElement("div",{style:{left:s(f,i),width:s(d-f,i)},key:"part-".concat(l)});c.push(h)}return 0===c.length&&(c=null),a.default.createElement("div",{style:u,className:(0,o.default)("video-react-load-progress",r)},a.default.createElement("span",{className:"video-react-control-text"},"Loaded: 0%"),c)}s.propTypes=u,s.displayName="LoadProgressBar"},979:function(e,t,n){"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(2007)),a=r(n(2791)),o=r(n(1694)),u=n(4737);function s(e){var t=e.duration,n=e.mouseTime,r=e.className,i=e.text;if(!n.time)return null;var s=i||(0,u.formatTime)(n.time,t);return a.default.createElement("div",{className:(0,o.default)("video-react-mouse-display",r),style:{left:"".concat(n.position,"px")},"data-current-time":s})}s.propTypes={duration:i.default.number,mouseTime:i.default.object,className:i.default.string},s.displayName="MouseTimeDisplay";var c=s;t.default=c},1895:function(e,t,n){"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var i=r(n(2007)),a=r(n(2791)),o=r(n(1694)),u=n(4737),s={currentTime:i.default.number,duration:i.default.number,percentage:i.default.string,className:i.default.string};function c(e){var t=e.currentTime,n=e.duration,r=e.percentage,i=e.className;return a.default.createElement("div",{"data-current-time":(0,u.formatTime)(t,n),className:(0,o.default)("video-react-play-progress video-react-slider-bar",i),style:{width:r}},a.default.createElement("span",{className:"video-react-control-text"},"Progress: ".concat(r)))}c.propTypes=s,c.displayName="PlayProgressBar"},6441:function(e,t,n){"use strict";var r=n(862),i=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(4575)),o=i(n(3913)),u=i(n(8585)),s=i(n(9754)),c=i(n(1506)),l=i(n(2205)),f=i(n(2007)),d=r(n(2791)),h=i(n(1694)),p={actions:f.default.object,player:f.default.object,className:f.default.string},v=function(e){function t(e,n){var r;return(0,a.default)(this,t),(r=(0,u.default)(this,(0,s.default)(t).call(this,e,n))).handleClick=r.handleClick.bind((0,c.default)(r)),r}return(0,l.default)(t,e),(0,o.default)(t,[{key:"handleClick",value:function(){var e=this.props,t=e.actions;e.player.paused?t.play():t.pause()}},{key:"render",value:function(){var e=this,t=this.props,n=t.player,r=t.className,i=n.paused?"Play":"Pause";return d.default.createElement("button",{ref:function(t){e.button=t},className:(0,h.default)(r,{"video-react-play-control":!0,"video-react-control":!0,"video-react-button":!0,"video-react-paused":n.paused,"video-react-playing":!n.paused}),type:"button",tabIndex:"0",onClick:this.handleClick},d.default.createElement("span",{className:"video-react-control-text"},i))}}]),t}(d.Component);t.default=v,v.propTypes=p,v.displayName="PlayToggle"},40:function(e,t,n){"use strict";var r=n(862),i=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(4575)),o=i(n(3913)),u=i(n(8585)),s=i(n(9754)),c=i(n(2205)),l=r(n(2791)),f=i(n(5444)),d=n(4737),h=function(e){function t(e,n){var r;return(0,a.default)(this,t),r=(0,u.default)(this,(0,s.default)(t).call(this,e,n)),(0,d.deprecatedWarning)("PlaybackRate","PlaybackRateMenuButton"),r}return(0,c.default)(t,e),(0,o.default)(t,[{key:"render",value:function(){return l.default.createElement(f.default,this.props)}}]),t}(l.Component);t.default=h,h.displayName="PlaybackRate"},5444:function(e,t,n){"use strict";var r=n(862),i=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(4575)),o=i(n(3913)),u=i(n(8585)),s=i(n(9754)),c=i(n(1506)),l=i(n(2205)),f=i(n(2007)),d=r(n(2791)),h=i(n(1694)),p=i(n(6143)),v={player:f.default.object,actions:f.default.object,rates:f.default.array,className:f.default.string},y=function(e){function t(e,n){var r;return(0,a.default)(this,t),(r=(0,u.default)(this,(0,s.default)(t).call(this,e,n))).handleSelectItem=r.handleSelectItem.bind((0,c.default)(r)),r}return(0,l.default)(t,e),(0,o.default)(t,[{key:"handleSelectItem",value:function(e){var t=this.props,n=t.rates,r=t.actions;e>=0&&e<n.length&&r.changeRate(n[e])}},{key:"render",value:function(){var e=this.props,t=e.rates,n=e.player,r=t.map((function(e){return{label:"".concat(e,"x"),value:e}})),i=t.indexOf(n.playbackRate)||0;return d.default.createElement(p.default,{className:(0,h.default)("video-react-playback-rate",this.props.className),onSelectItem:this.handleSelectItem,items:r,selectedIndex:i},d.default.createElement("span",{className:"video-react-control-text"},"Playback Rate"),d.default.createElement("div",{className:"video-react-playback-rate-value"},"".concat(n.playbackRate.toFixed(2),"x")))}}]),t}(d.Component);y.propTypes=v,y.defaultProps={rates:[2,1.5,1.25,1,.5,.25]},y.displayName="PlaybackRateMenuButton";var m=y;t.default=m},5749:function(e,t,n){"use strict";var r=n(862),i=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(7154)),o=i(n(4575)),u=i(n(3913)),s=i(n(8585)),c=i(n(9754)),l=i(n(1506)),f=i(n(2205)),d=i(n(2007)),h=r(n(2791)),p=i(n(1694)),v=r(n(7463)),y=i(n(9984)),m={player:d.default.object,className:d.default.string},g=function(e){function t(e,n){var r;return(0,o.default)(this,t),(r=(0,s.default)(this,(0,c.default)(t).call(this,e,n))).state={mouseTime:{time:null,position:0}},r.handleMouseMoveThrottle=r.handleMouseMove.bind((0,l.default)(r)),r}return(0,f.default)(t,e),(0,u.default)(t,[{key:"handleMouseMove",value:function(e){if(e.pageX){var t=this.props.player.duration,n=this.seekBar,r=v.getPointerPosition(n,e).x*t,i=e.pageX-v.findElPosition(n).left;this.setState({mouseTime:{time:r,position:i}})}}},{key:"render",value:function(){var e=this,t=this.props.className;return h.default.createElement("div",{onMouseMove:this.handleMouseMoveThrottle,className:(0,p.default)("video-react-progress-control video-react-control",t)},h.default.createElement(y.default,(0,a.default)({mouseTime:this.state.mouseTime,ref:function(t){e.seekBar=t}},this.props)))}}]),t}(h.Component);t.default=g,g.propTypes=m,g.displayName="ProgressControl"},6062:function(e,t,n){"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=(0,r(n(3545)).default)("replay");i.displayName="ReplayControl";var a=i;t.default=a},9984:function(e,t,n){"use strict";var r=n(862),i=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(4575)),o=i(n(3913)),u=i(n(8585)),s=i(n(9754)),c=i(n(1506)),l=i(n(2205)),f=i(n(2007)),d=r(n(2791)),h=i(n(1694)),p=i(n(6054)),v=i(n(1895)),y=i(n(7435)),m=i(n(979)),g=n(4737),k={player:f.default.object,mouseTime:f.default.object,actions:f.default.object,className:f.default.string},b=function(e){function t(e,n){var r;return(0,a.default)(this,t),(r=(0,u.default)(this,(0,s.default)(t).call(this,e,n))).getPercent=r.getPercent.bind((0,c.default)(r)),r.getNewTime=r.getNewTime.bind((0,c.default)(r)),r.stepForward=r.stepForward.bind((0,c.default)(r)),r.stepBack=r.stepBack.bind((0,c.default)(r)),r.handleMouseDown=r.handleMouseDown.bind((0,c.default)(r)),r.handleMouseMove=r.handleMouseMove.bind((0,c.default)(r)),r.handleMouseUp=r.handleMouseUp.bind((0,c.default)(r)),r}return(0,l.default)(t,e),(0,o.default)(t,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"getPercent",value:function(){var e=this.props.player,t=e.currentTime,n=(e.seekingTime||t)/e.duration;return n>=1?1:n}},{key:"getNewTime",value:function(e){var t=this.props.player.duration,n=this.slider.calculateDistance(e)*t;return n===t?n-.1:n}},{key:"handleMouseDown",value:function(){}},{key:"handleMouseUp",value:function(e){var t=this.props.actions,n=this.getNewTime(e);t.seek(n),t.handleEndSeeking(n)}},{key:"handleMouseMove",value:function(e){var t=this.props.actions,n=this.getNewTime(e);t.handleSeekingTime(n)}},{key:"stepForward",value:function(){this.props.actions.forward(5)}},{key:"stepBack",value:function(){this.props.actions.replay(5)}},{key:"render",value:function(){var e=this,t=this.props,n=t.player,r=n.currentTime,i=n.seekingTime,a=n.duration,o=n.buffered,u=t.mouseTime,s=i||r;return d.default.createElement(p.default,{ref:function(t){e.slider=t},label:"video progress bar",className:(0,h.default)("video-react-progress-holder",this.props.className),valuenow:(100*this.getPercent()).toFixed(2),valuetext:(0,g.formatTime)(s,a),onMouseDown:this.handleMouseDown,onMouseMove:this.handleMouseMove,onMouseUp:this.handleMouseUp,getPercent:this.getPercent,stepForward:this.stepForward,stepBack:this.stepBack},d.default.createElement(y.default,{buffered:o,currentTime:s,duration:a}),d.default.createElement(m.default,{duration:a,mouseTime:u}),d.default.createElement(v.default,{currentTime:s,duration:a}))}}]),t}(d.Component);t.default=b,b.propTypes=k,b.displayName="SeekBar"},4021:function(e,t,n){"use strict";var r=n(862),i=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(7154)),o=i(n(4575)),u=i(n(3913)),s=i(n(8585)),c=i(n(9754)),l=i(n(1506)),f=i(n(2205)),d=i(n(2007)),h=r(n(2791)),p=i(n(1694)),v=i(n(7984)),y=i(n(6354)),m={player:d.default.object,actions:d.default.object,vertical:d.default.bool,className:d.default.string,alwaysShowVolume:d.default.bool},g=function(e){function t(e,n){var r;return(0,o.default)(this,t),(r=(0,s.default)(this,(0,c.default)(t).call(this,e,n))).state={active:!1},r.handleClick=r.handleClick.bind((0,l.default)(r)),r.handleFocus=r.handleFocus.bind((0,l.default)(r)),r.handleBlur=r.handleBlur.bind((0,l.default)(r)),r}return(0,f.default)(t,e),(0,u.default)(t,[{key:"handleClick",value:function(){var e=this.props,t=e.player;e.actions.mute(!t.muted)}},{key:"handleFocus",value:function(){this.setState({active:!0})}},{key:"handleBlur",value:function(){this.setState({active:!1})}},{key:"render",value:function(){var e=this.props,t=e.vertical,n=e.player,r=e.className,i=!t,o=this.volumeLevel;return h.default.createElement(v.default,{className:(0,p.default)(r,{"video-react-volume-menu-button-vertical":t,"video-react-volume-menu-button-horizontal":!t,"video-react-vol-muted":n.muted,"video-react-vol-0":0===o&&!n.muted,"video-react-vol-1":1===o,"video-react-vol-2":2===o,"video-react-vol-3":3===o,"video-react-slider-active":this.props.alwaysShowVolume||this.state.active,"video-react-lock-showing":this.props.alwaysShowVolume||this.state.active},"video-react-volume-menu-button"),onClick:this.handleClick,inline:i},h.default.createElement(y.default,(0,a.default)({onFocus:this.handleFocus,onBlur:this.handleBlur},this.props)))}},{key:"volumeLevel",get:function(){var e=this.props.player,t=e.volume,n=e.muted,r=3;return 0===t||n?r=0:t<.33?r=1:t<.67&&(r=2),r}}]),t}(h.Component);g.propTypes=m,g.defaultProps={vertical:!1},g.displayName="VolumeMenuButton";var k=g;t.default=k},8866:function(e,t,n){"use strict";var r=n(862),i=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(4575)),o=i(n(3913)),u=i(n(8585)),s=i(n(9754)),c=i(n(1506)),l=i(n(2205)),f=i(n(2007)),d=r(n(2791)),h={children:f.default.any},p=function(e){function t(e,n){var r;return(0,a.default)(this,t),(r=(0,u.default)(this,(0,s.default)(t).call(this,e,n))).handleClick=r.handleClick.bind((0,c.default)(r)),r}return(0,l.default)(t,e),(0,o.default)(t,[{key:"handleClick",value:function(e){e.preventDefault()}},{key:"render",value:function(){return d.default.createElement("div",{className:"video-react-menu video-react-lock-showing",role:"presentation",onClick:this.handleClick},d.default.createElement("ul",{className:"video-react-menu-content"},this.props.children))}}]),t}(d.Component);t.default=p,p.propTypes=h,p.displayName="Menu"},6143:function(e,t,n){"use strict";var r=n(862),i=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(4575)),o=i(n(3913)),u=i(n(8585)),s=i(n(9754)),c=i(n(1506)),l=i(n(2205)),f=i(n(2007)),d=r(n(2791)),h=i(n(1694)),p=i(n(8866)),v=i(n(7673)),y=i(n(6656)),m={inline:f.default.bool,items:f.default.array,className:f.default.string,onSelectItem:f.default.func,children:f.default.any,selectedIndex:f.default.number},g=function(e){function t(e,n){var r;return(0,a.default)(this,t),(r=(0,u.default)(this,(0,s.default)(t).call(this,e,n))).state={active:!1,activateIndex:e.selectedIndex||0},r.commitSelection=r.commitSelection.bind((0,c.default)(r)),r.activateMenuItem=r.activateMenuItem.bind((0,c.default)(r)),r.handleClick=r.handleClick.bind((0,c.default)(r)),r.renderMenu=r.renderMenu.bind((0,c.default)(r)),r.handleFocus=r.handleFocus.bind((0,c.default)(r)),r.handleBlur=r.handleBlur.bind((0,c.default)(r)),r.handleUpArrow=r.handleUpArrow.bind((0,c.default)(r)),r.handleDownArrow=r.handleDownArrow.bind((0,c.default)(r)),r.handleEscape=r.handleEscape.bind((0,c.default)(r)),r.handleReturn=r.handleReturn.bind((0,c.default)(r)),r.handleTab=r.handleTab.bind((0,c.default)(r)),r.handleKeyPress=r.handleKeyPress.bind((0,c.default)(r)),r.handleSelectItem=r.handleSelectItem.bind((0,c.default)(r)),r.handleIndexChange=r.handleIndexChange.bind((0,c.default)(r)),r}return(0,l.default)(t,e),(0,o.default)(t,[{key:"componentDidUpdate",value:function(e){e.selectedIndex!==this.props.selectedIndex&&this.activateMenuItem(this.props.selectedIndex)}},{key:"commitSelection",value:function(e){this.setState({activateIndex:e}),this.handleIndexChange(e)}},{key:"activateMenuItem",value:function(e){this.setState({activateIndex:e}),this.handleIndexChange(e)}},{key:"handleIndexChange",value:function(e){(0,this.props.onSelectItem)(e)}},{key:"handleClick",value:function(){this.setState((function(e){return{active:!e.active}}))}},{key:"handleFocus",value:function(){document.addEventListener("keydown",this.handleKeyPress)}},{key:"handleBlur",value:function(){this.setState({active:!1}),document.removeEventListener("keydown",this.handleKeyPress)}},{key:"handleUpArrow",value:function(e){var t=this.props.items;if(this.state.active){e.preventDefault();var n=this.state.activateIndex-1;n<0&&(n=t.length?t.length-1:0),this.activateMenuItem(n)}}},{key:"handleDownArrow",value:function(e){var t=this.props.items;if(this.state.active){e.preventDefault();var n=this.state.activateIndex+1;n>=t.length&&(n=0),this.activateMenuItem(n)}}},{key:"handleTab",value:function(e){this.state.active&&(e.preventDefault(),this.commitSelection(this.state.activateIndex))}},{key:"handleReturn",value:function(e){e.preventDefault(),this.state.active?this.commitSelection(this.state.activateIndex):this.setState({active:!0})}},{key:"handleEscape",value:function(){this.setState({active:!1,activateIndex:0})}},{key:"handleKeyPress",value:function(e){27===e.which?this.handleEscape(e):9===e.which?this.handleTab(e):13===e.which?this.handleReturn(e):38===e.which?this.handleUpArrow(e):40===e.which&&this.handleDownArrow(e)}},{key:"handleSelectItem",value:function(e){this.commitSelection(e)}},{key:"renderMenu",value:function(){var e=this;if(!this.state.active)return null;var t=this.props.items;return d.default.createElement(p.default,null,t.map((function(t,n){return d.default.createElement(v.default,{item:t,index:n,onSelectItem:e.handleSelectItem,activateIndex:e.state.activateIndex,key:"item-".concat(n++)})})))}},{key:"render",value:function(){var e=this,t=this.props,n=t.inline,r=t.className;return d.default.createElement(y.default,{className:(0,h.default)(r,{"video-react-menu-button-inline":!!n,"video-react-menu-button-popup":!n,"video-react-menu-button-active":this.state.active},"video-react-control video-react-button video-react-menu-button"),role:"button",tabIndex:"0",ref:function(t){e.menuButton=t},onClick:this.handleClick,onFocus:this.handleFocus,onBlur:this.handleBlur},this.props.children,this.renderMenu())}}]),t}(d.Component);t.default=g,g.propTypes=m,g.displayName="MenuButton"},7673:function(e,t,n){"use strict";var r=n(862),i=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(4575)),o=i(n(3913)),u=i(n(8585)),s=i(n(9754)),c=i(n(1506)),l=i(n(2205)),f=i(n(2007)),d=r(n(2791)),h=i(n(1694)),p={item:f.default.object,index:f.default.number,activateIndex:f.default.number,onSelectItem:f.default.func},v=function(e){function t(e,n){var r;return(0,a.default)(this,t),(r=(0,u.default)(this,(0,s.default)(t).call(this,e,n))).handleClick=r.handleClick.bind((0,c.default)(r)),r}return(0,l.default)(t,e),(0,o.default)(t,[{key:"handleClick",value:function(){var e=this.props,t=e.index;(0,e.onSelectItem)(t)}},{key:"render",value:function(){var e=this.props,t=e.item,n=e.index,r=e.activateIndex;return d.default.createElement("li",{className:(0,h.default)({"video-react-menu-item":!0,"video-react-selected":n===r}),role:"menuitem",onClick:this.handleClick},t.label,d.default.createElement("span",{className:"video-react-control-text"}))}}]),t}(d.Component);t.default=v,v.propTypes=p,v.displayName="MenuItem"},2859:function(e,t,n){"use strict";var r=n(862),i=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(4575)),o=i(n(3913)),u=i(n(8585)),s=i(n(9754)),c=i(n(1506)),l=i(n(2205)),f=i(n(2007)),d=r(n(2791)),h={player:f.default.object,children:f.default.any},p=function(e){function t(e,n){var r;return(0,a.default)(this,t),(r=(0,u.default)(this,(0,s.default)(t).call(this,e,n))).handleClick=r.handleClick.bind((0,c.default)(r)),r}return(0,l.default)(t,e),(0,o.default)(t,[{key:"handleClick",value:function(e){e.preventDefault()}},{key:"render",value:function(){var e=this.props.children;return d.default.createElement("div",{className:"video-react-menu",onClick:this.handleClick},d.default.createElement("div",{className:"video-react-menu-content"},e))}}]),t}(d.Component);t.default=p,p.propTypes=h,p.displayName="Popup"},7984:function(e,t,n){"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var i=r(n(7154)),a=r(n(693)),o=r(n(2007)),u=r(n(2791)),s=r(n(1694)),c=r(n(6656)),l=r(n(2859)),f={inline:o.default.bool,onClick:o.default.func.isRequired,onFocus:o.default.func,onBlur:o.default.func,className:o.default.string};function d(e){var t=e.inline,n=e.className,r=(0,a.default)({},e);return delete r.children,delete r.inline,delete r.className,u.default.createElement(c.default,(0,i.default)({className:(0,s.default)(n,{"video-react-menu-button-inline":!!t,"video-react-menu-button-popup":!t},"video-react-control video-react-button video-react-menu-button")},r),u.default.createElement(l.default,e))}d.propTypes=f,d.defaultProps={inline:!0},d.displayName="PopupButton"},906:function(e,t,n){"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(2007)),a=r(n(2791)),o=r(n(1694)),u=n(4737),s={player:i.default.object,className:i.default.string};function c(e){var t=e.player,n=t.currentTime,r=t.duration,i=e.className,s=(0,u.formatTime)(n,r);return a.default.createElement("div",{className:(0,o.default)("video-react-current-time video-react-time-control video-react-control",i)},a.default.createElement("div",{className:"video-react-current-time-display","aria-live":"off"},a.default.createElement("span",{className:"video-react-control-text"},"Current Time "),s))}c.propTypes=s,c.displayName="CurrentTimeDisplay";var l=c;t.default=l},2561:function(e,t,n){"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(2007)),a=r(n(2791)),o=r(n(1694)),u=n(4737),s={player:i.default.object,className:i.default.string};function c(e){var t=e.player.duration,n=e.className,r=(0,u.formatTime)(t);return a.default.createElement("div",{className:(0,o.default)(n,"video-react-duration video-react-time-control video-react-control")},a.default.createElement("div",{className:"video-react-duration-display","aria-live":"off"},a.default.createElement("span",{className:"video-react-control-text"},"Duration Time "),r))}c.propTypes=s,c.displayName="DurationDisplay";var l=c;t.default=l},5683:function(e,t,n){"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(2007)),a=r(n(2791)),o=r(n(1694)),u=n(4737),s={player:i.default.object,className:i.default.string};function c(e){var t=e.player,n=t.currentTime,r=t.duration,i=e.className,s=r-n,c=(0,u.formatTime)(s);return a.default.createElement("div",{className:(0,o.default)("video-react-remaining-time video-react-time-control video-react-control",i)},a.default.createElement("div",{className:"video-react-remaining-time-display","aria-live":"off"},a.default.createElement("span",{className:"video-react-control-text"},"Remaining Time "),"-".concat(c)))}c.propTypes=s,c.displayName="RemainingTimeDisplay";var l=c;t.default=l},4976:function(e,t,n){"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var i=r(n(2007)),a=r(n(2791)),o=r(n(1694)),u={separator:i.default.string,className:i.default.string};function s(e){var t=e.separator,n=e.className,r=t||"/";return a.default.createElement("div",{className:(0,o.default)("video-react-time-control video-react-time-divider",n),dir:"ltr"},a.default.createElement("div",null,a.default.createElement("span",null,r)))}s.propTypes=u,s.displayName="TimeDivider"},6354:function(e,t,n){"use strict";var r=n(862),i=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(7154)),o=i(n(4575)),u=i(n(3913)),s=i(n(8585)),c=i(n(9754)),l=i(n(1506)),f=i(n(2205)),d=i(n(2007)),h=r(n(2791)),p=i(n(1694)),v=i(n(6054)),y=i(n(6358)),m={actions:d.default.object,player:d.default.object,className:d.default.string,onFocus:d.default.func,onBlur:d.default.func},g=function(e){function t(e,n){var r;return(0,o.default)(this,t),(r=(0,s.default)(this,(0,c.default)(t).call(this,e,n))).state={percentage:"0%"},r.handleMouseMove=r.handleMouseMove.bind((0,l.default)(r)),r.handlePercentageChange=r.handlePercentageChange.bind((0,l.default)(r)),r.checkMuted=r.checkMuted.bind((0,l.default)(r)),r.getPercent=r.getPercent.bind((0,l.default)(r)),r.stepForward=r.stepForward.bind((0,l.default)(r)),r.stepBack=r.stepBack.bind((0,l.default)(r)),r.handleFocus=r.handleFocus.bind((0,l.default)(r)),r.handleBlur=r.handleBlur.bind((0,l.default)(r)),r.handleClick=r.handleClick.bind((0,l.default)(r)),r}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){}},{key:"getPercent",value:function(){var e=this.props.player;return e.muted?0:e.volume}},{key:"checkMuted",value:function(){var e=this.props,t=e.player,n=e.actions;t.muted&&n.mute(!1)}},{key:"handleMouseMove",value:function(e){var t=this.props.actions;this.checkMuted();var n=this.slider.calculateDistance(e);t.changeVolume(n)}},{key:"stepForward",value:function(){var e=this.props,t=e.player,n=e.actions;this.checkMuted(),n.changeVolume(t.volume+.1)}},{key:"stepBack",value:function(){var e=this.props,t=e.player,n=e.actions;this.checkMuted(),n.changeVolume(t.volume-.1)}},{key:"handleFocus",value:function(e){this.props.onFocus&&this.props.onFocus(e)}},{key:"handleBlur",value:function(e){this.props.onBlur&&this.props.onBlur(e)}},{key:"handlePercentageChange",value:function(e){e!==this.state.percentage&&this.setState({percentage:e})}},{key:"handleClick",value:function(e){e.stopPropagation()}},{key:"render",value:function(){var e=this,t=this.props,n=t.player,r=t.className,i=(100*n.volume).toFixed(2);return h.default.createElement(v.default,(0,a.default)({ref:function(t){e.slider=t},label:"volume level",valuenow:i,valuetext:"".concat(i,"%"),onMouseMove:this.handleMouseMove,onFocus:this.handleFocus,onBlur:this.handleBlur,onClick:this.handleClick,sliderActive:this.handleFocus,sliderInactive:this.handleBlur,getPercent:this.getPercent,onPercentageChange:this.handlePercentageChange,stepForward:this.stepForward,stepBack:this.stepBack},this.props,{className:(0,p.default)(r,"video-react-volume-bar video-react-slider-bar")}),h.default.createElement(y.default,this.props))}}]),t}(h.Component);g.propTypes=m,g.displayName="VolumeBar";var k=g;t.default=k},6358:function(e,t,n){"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(2007)),a=r(n(2791)),o=r(n(1694)),u={percentage:i.default.string,vertical:i.default.bool,className:i.default.string};function s(e){var t=e.percentage,n=e.vertical,r=e.className,i={};return n?i.height=t:i.width=t,a.default.createElement("div",{className:(0,o.default)(r,"video-react-volume-level"),style:i},a.default.createElement("span",{className:"video-react-control-text"}))}s.propTypes=u,s.defaultProps={percentage:"100%",vertical:!1},s.displayName="VolumeLevel";var c=s;t.default=c},2932:function(e,t,n){"use strict";var r=n(862),i=n(5318);Object.defineProperty(t,"J5",{enumerable:!0,get:function(){return a.default}});var a=i(n(8549)),o=i(n(3289)),u=i(n(8453)),s=i(n(7374)),c=i(n(1517)),l=i(n(6054)),f=i(n(9635)),d=i(n(6300)),h=i(n(2613)),p=i(n(6441)),v=i(n(1389)),y=i(n(6062)),m=i(n(9478)),g=i(n(5749)),k=i(n(9984)),b=i(n(1895)),w=i(n(7435)),x=i(n(979)),E=i(n(4021)),_=i(n(5444)),I=i(n(40)),T=i(n(7626)),S=i(n(5683)),C=i(n(906)),N=i(n(2561)),P=i(n(4976)),A=i(n(6143));r(n(5726)),r(n(4534));var O=n(8518)},8518:function(e,t,n){"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return{player:(0,i.default)(e.player,t),operation:(0,a.default)(e.operation,t)}},t.operationReducer=t.playerReducer=void 0;var i=r(n(9865)),a=r(n(8164));var o=i.default;t.playerReducer=o;var u=a.default;t.operationReducer=u},8164:function(e,t,n){"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;if(t.type===a.OPERATE)return(0,i.default)({},e,{count:e.count+1,operation:(0,i.default)({},e.operation,t.operation)});return e};var i=r(n(693)),a=n(5726),o={count:0,operation:{action:"",source:""}}},9865:function(e,t,n){"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.USER_ACTIVATE:return(0,i.default)({},e,{userActivity:t.activity});case o.PLAYER_ACTIVATE:return(0,i.default)({},e,{isActive:t.activity});case o.FULLSCREEN_CHANGE:return(0,i.default)({},e,{isFullscreen:!!t.isFullscreen});case a.SEEKING_TIME:return(0,i.default)({},e,{seekingTime:t.time});case a.END_SEEKING:return(0,i.default)({},e,{seekingTime:0});case a.LOAD_START:return(0,i.default)({},e,t.videoProps,{hasStarted:!1,ended:!1});case a.CAN_PLAY:return(0,i.default)({},e,t.videoProps,{waiting:!1});case a.WAITING:return(0,i.default)({},e,t.videoProps,{waiting:!0});case a.CAN_PLAY_THROUGH:case a.PLAYING:return(0,i.default)({},e,t.videoProps,{waiting:!1});case a.PLAY:return(0,i.default)({},e,t.videoProps,{ended:!1,paused:!1,autoPaused:!1,waiting:!1,hasStarted:!0});case a.PAUSE:return(0,i.default)({},e,t.videoProps,{paused:!0});case a.END:return(0,i.default)({},e,t.videoProps,{ended:!0});case a.SEEKING:return(0,i.default)({},e,t.videoProps,{seeking:!0});case a.SEEKED:return(0,i.default)({},e,t.videoProps,{seeking:!1});case a.ERROR:return(0,i.default)({},e,t.videoProps,{error:"UNKNOWN ERROR",ended:!0});case a.DURATION_CHANGE:case a.TIME_UPDATE:case a.VOLUME_CHANGE:case a.PROGRESS_CHANGE:case a.RATE_CHANGE:case a.SUSPEND:case a.ABORT:case a.EMPTIED:case a.STALLED:case a.LOADED_META_DATA:case a.LOADED_DATA:case a.RESIZE:return(0,i.default)({},e,t.videoProps);case a.ACTIVATE_TEXT_TRACK:return(0,i.default)({},e,{activeTextTrack:t.textTrack});default:return e}};var i=r(n(693)),a=n(4534),o=n(5726),u={currentSrc:null,duration:0,currentTime:0,seekingTime:0,buffered:null,waiting:!1,seeking:!1,paused:!0,autoPaused:!1,ended:!1,playbackRate:1,muted:!1,volume:1,readyState:0,networkState:0,videoWidth:0,videoHeight:0,hasStarted:!1,userActivity:!0,isActive:!1,isFullscreen:!1,activeTextTrack:null}},5695:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IS_IOS=t.IS_IPOD=t.IS_IPHONE=t.IS_IPAD=void 0;var n="undefined"!==typeof window&&window.navigator?window.navigator.userAgent:"",r=/iPad/i.test(n);t.IS_IPAD=r;var i=/iPhone/i.test(n)&&!r;t.IS_IPHONE=i;var a=/iPod/i.test(n);t.IS_IPOD=a;var o=i||r||a;t.IS_IOS=o},7463:function(e,t){"use strict";function n(e){var t;if(e.getBoundingClientRect&&e.parentNode&&(t=e.getBoundingClientRect()),!t)return{left:0,top:0};var n=document,r=n.body,i=n.documentElement,a=i.clientLeft||r.clientLeft||0,o=window.pageXOffset||r.scrollLeft,u=t.left+o-a,s=i.clientTop||r.clientTop||0,c=window.pageYOffset||r.scrollTop,l=t.top+c-s;return{left:Math.round(u),top:Math.round(l)}}Object.defineProperty(t,"__esModule",{value:!0}),t.findElPosition=n,t.getPointerPosition=function(e,t){var r={},i=n(e),a=e.offsetWidth,o=e.offsetHeight,u=i.top,s=i.left,c=t.pageY,l=t.pageX;t.changedTouches&&(l=t.changedTouches[0].pageX,c=t.changedTouches[0].pageY);return r.y=Math.max(0,Math.min(1,(u-c+o)/o)),r.x=Math.max(0,Math.min(1,(l-s)/a)),r},t.blurNode=function(e){e&&e.blur&&e.blur()},t.focusNode=function(e){e&&e.focus&&e.focus()},t.hasClass=function(e,t){for(var n=e.className.split(" "),r=0;r<n.length;r++)if(n[r].toLowerCase()===t.toLowerCase())return!0;return!1}},4889:function(e,t,n){"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(4575)),a=r(n(3913)),o=new(function(){function e(){(0,i.default)(this,e)}return(0,a.default)(e,[{key:"request",value:function(e){e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()}},{key:"exit",value:function(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()}},{key:"addEventListener",value:function(e){document.addEventListener("fullscreenchange",e),document.addEventListener("webkitfullscreenchange",e),document.addEventListener("mozfullscreenchange",e),document.addEventListener("MSFullscreenChange",e)}},{key:"removeEventListener",value:function(e){document.removeEventListener("fullscreenchange",e),document.removeEventListener("webkitfullscreenchange",e),document.removeEventListener("mozfullscreenchange",e),document.removeEventListener("MSFullscreenChange",e)}},{key:"isFullscreen",get:function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement}},{key:"enabled",get:function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled}}]),e}());t.default=o},4737:function(e,t,n){"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.formatTime=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=Math.floor(e%60),r=Math.floor(e/60%60),i=Math.floor(e/3600),a=Math.floor(t/60%60),o=Math.floor(t/3600);(s(e)||e===1/0)&&(i="-",r="-",n="-");return i=i>0||o>0?"".concat(i,":"):"",r="".concat((i||a>=10)&&r<10?"0".concat(r):r,":"),n=n<10?"0".concat(n):n,i+r+n},t.isVideoChild=function(e){if(e.props&&e.props.isVideoChild)return!0;return"source"===e.type||"track"===e.type},t.mergeAndSortChildren=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=u.default.Children.toArray(t),s=(n.order,(0,o.default)(n,["order"]));return i.filter((function(e){return!e.props.disabled})).concat(e.filter((function(e){return!c(i,(function(t){return l(t,e)}))}))).map((function(t){var n=c(e,(function(e){return l(e,t)})),r=n?n.props:{},i=(0,a.default)({},s,r,t.props);return u.default.cloneElement(t,i,t.props.children)})).sort((function(e,t){return(e.props.order||r)-(t.props.order||r)}))},t.deprecatedWarning=function(e,t){console.warn("WARNING: ".concat(e," will be deprecated soon! Please use ").concat(t," instead."))},t.throttle=function(e,t){var n=arguments,r=!1;return function(){r||(e.apply(void 0,(0,i.default)(n)),r=!0,setTimeout((function(){r=!1}),t))}},t.mediaProperties=void 0;var i=r(n(319)),a=r(n(693)),o=r(n(6479)),u=r(n(2791)),s=Number.isNaN||function(e){return e!==e};var c=function(e,t){return e.filter(t)[0]},l=function(e,t){var n=e.type,r=t.type;return"string"===typeof n||"string"===typeof r?n===r:"function"===typeof n&&"function"===typeof r&&n.displayName===r.displayName};t.mediaProperties=["error","src","srcObject","currentSrc","crossOrigin","networkState","preload","buffered","readyState","seeking","currentTime","duration","paused","defaultPlaybackRate","playbackRate","played","seekable","ended","autoplay","loop","mediaGroup","controller","controls","volume","muted","defaultMuted","audioTracks","videoTracks","textTracks","width","height","videoWidth","videoHeight","poster"]},2391:function(e){"use strict";var t=function(){};e.exports=t},1616:function(e,t,n){"use strict";e.exports=n.p+"static/media/logo.f926e3b1de877e603e5e.png"},5485:function(e,t,n){"use strict";e.exports=n.p+"static/media/logout.062786aac05f0226f292.png"},4942:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:function(){return r}})},1413:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(4942);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return ar},SDK_VERSION:function(){return $r},_DEFAULT_ENTRY_NAME:function(){return Ur},_addComponent:function(){return qr},_addOrOverwriteComponent:function(){return zr},_apps:function(){return Vr},_clearComponents:function(){return Gr},_components:function(){return Br},_getProvider:function(){return Hr},_registerComponent:function(){return Kr},_removeServiceInstance:function(){return Wr},deleteApp:function(){return ti},getApp:function(){return Xr},getApps:function(){return ei},initializeApp:function(){return Jr},onLog:function(){return ii},registerVersion:function(){return ri},setLogLevel:function(){return ai}});var t=n(2791),r=n(4164);function i(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function u(e){i(o,r,a,u,s,"next",e)}function s(e){i(o,r,a,u,s,"throw",e)}u(void 0)}))}}var o=n(7757),u=n.n(o),s=n(1413);function c(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function l(e,t){if(null==e)return{};var n,r,i=c(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var f=n(1694),d=n.n(f),h=t.createContext(null);function p(){return p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p.apply(this,arguments)}n(2176);function v(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function y(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function m(e,n){return Object.keys(n).reduce((function(r,i){var a,o=r,u=o[v(i)],s=o[i],l=c(o,[v(i),i].map(y)),f=n[i],d=function(e,n,r){var i=(0,t.useRef)(void 0!==e),a=(0,t.useState)(n),o=a[0],u=a[1],s=void 0!==e,c=i.current;return i.current=s,!s&&c&&o!==n&&u(n),[s?e:o,(0,t.useCallback)((function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];r&&r.apply(void 0,[e].concat(n)),u(e)}),[r])]}(s,u,e[f]),h=d[0],m=d[1];return p({},l,((a={})[i]=h,a[f]=m,a))}),e)}function g(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function k(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function b(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}g.__suppressDeprecationWarning=!0,k.__suppressDeprecationWarning=!0,b.__suppressDeprecationWarning=!0;var w=/-(.)/g;var x=n(184),E=["xxl","xl","lg","md","sm","xs"],_=t.createContext({prefixes:{},breakpoints:E});_.Consumer,_.Provider;function I(e,n){var r=(0,t.useContext)(_).prefixes;return e||r[n]||n}var T=["className","bsPrefix","as"],S=function(e){return e[0].toUpperCase()+(t=e,t.replace(w,(function(e,t){return t.toUpperCase()}))).slice(1);var t};function C(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.displayName,i=void 0===r?S(e):r,a=n.Component,o=n.defaultProps,u=t.forwardRef((function(t,n){var r=t.className,i=t.bsPrefix,o=t.as,u=void 0===o?a||"div":o,c=l(t,T),f=I(i,e);return(0,x.jsx)(u,(0,s.Z)({ref:n,className:d()(r,f)},c))}));return u.defaultProps=o,u.displayName=i,u}var N=["bsPrefix","className","as"],P=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.as,a=l(e,N);n=I(n,"navbar-brand");var o=i||(a.href?"a":"span");return(0,x.jsx)(o,(0,s.Z)((0,s.Z)({},a),{},{ref:t,className:d()(r,n)}))}));P.displayName="NavbarBrand";var A=P,O=n(4942);function R(e){return e&&e.ownerDocument||document}function D(e,t){return function(e){var t=R(e);return t&&t.defaultView||window}(e).getComputedStyle(e,t)}var L=/([A-Z])/g;var M=/^ms-/;function F(e){return function(e){return e.replace(L,"-$1").toLowerCase()}(e).replace(M,"-ms-")}var U=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;var j=function(e,t){var n="",r="";if("string"===typeof t)return e.style.getPropertyValue(F(t))||D(e).getPropertyValue(F(t));Object.keys(t).forEach((function(i){var a=t[i];a||0===a?!function(e){return!(!e||!U.test(e))}(i)?n+=F(i)+": "+a+";":r+=i+"("+a+") ":e.style.removeProperty(F(i))})),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n};function V(e,t){return V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},V(e,t)}var B=!1,q=t.createContext(null),z="unmounted",K="exited",H="entering",W="entered",G="exiting",Z=function(e){var n,i;function a(t,n){var r;r=e.call(this,t,n)||this;var i,a=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?a?(i=K,r.appearStatus=H):i=W:i=t.unmountOnExit||t.mountOnEnter?z:K,r.state={status:i},r.nextCallback=null,r}i=e,(n=a).prototype=Object.create(i.prototype),n.prototype.constructor=n,V(n,i),a.getDerivedStateFromProps=function(e,t){return e.in&&t.status===z?{status:K}:null};var o=a.prototype;return o.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},o.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==H&&n!==W&&(t=H):n!==H&&n!==W||(t=G)}this.updateStatus(!1,t)},o.componentWillUnmount=function(){this.cancelNextCallback()},o.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},o.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===H?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&this.state.status===K&&this.setState({status:z})},o.performEnter=function(e){var t=this,n=this.props.enter,i=this.context?this.context.isMounting:e,a=this.props.nodeRef?[i]:[r.findDOMNode(this),i],o=a[0],u=a[1],s=this.getTimeouts(),c=i?s.appear:s.enter;!e&&!n||B?this.safeSetState({status:W},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,u),this.safeSetState({status:H},(function(){t.props.onEntering(o,u),t.onTransitionEnd(c,(function(){t.safeSetState({status:W},(function(){t.props.onEntered(o,u)}))}))})))},o.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),i=this.props.nodeRef?void 0:r.findDOMNode(this);t&&!B?(this.props.onExit(i),this.safeSetState({status:G},(function(){e.props.onExiting(i),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:K},(function(){e.props.onExited(i)}))}))}))):this.safeSetState({status:K},(function(){e.props.onExited(i)}))},o.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},o.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},o.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},o.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:r.findDOMNode(this),i=null==e&&!this.props.addEndListener;if(n&&!i){if(this.props.addEndListener){var a=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=a[0],u=a[1];this.props.addEndListener(o,u)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},o.render=function(){var e=this.state.status;if(e===z)return null;var n=this.props,r=n.children,i=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,c(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return t.createElement(q.Provider,{value:null},"function"===typeof r?r(e,i):t.cloneElement(t.Children.only(r),i))},a}(t.Component);function Q(){}Z.contextType=q,Z.propTypes={},Z.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Q,onEntering:Q,onEntered:Q,onExit:Q,onExiting:Q,onExited:Q},Z.UNMOUNTED=z,Z.EXITED=K,Z.ENTERING=H,Z.ENTERED=W,Z.EXITING=G;var Y=Z,$=!("undefined"===typeof window||!window.document||!window.document.createElement),J=!1,X=!1;try{var ee={get passive(){return J=!0},get once(){return X=J=!0}};$&&(window.addEventListener("test",ee,ee),window.removeEventListener("test",ee,!0))}catch(AN){}var te=function(e,t,n,r){if(r&&"boolean"!==typeof r&&!X){var i=r.once,a=r.capture,o=n;!X&&i&&(o=n.__once||function e(r){this.removeEventListener(t,e,a),n.call(this,r)},n.__once=o),e.addEventListener(t,o,J?r:a)}e.addEventListener(t,n,r)};var ne=function(e,t,n,r){var i=r&&"boolean"!==typeof r?r.capture:r;e.removeEventListener(t,n,i),n.__once&&e.removeEventListener(t,n.__once,i)};var re=function(e,t,n,r){return te(e,t,n,r),function(){ne(e,t,n,r)}};function ie(e,t,n){void 0===n&&(n=5);var r=!1,i=setTimeout((function(){r||function(e,t,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!0),e){var i=document.createEvent("HTMLEvents");i.initEvent(t,n,r),e.dispatchEvent(i)}}(e,"transitionend",!0)}),t+n),a=re(e,"transitionend",(function(){r=!0}),{once:!0});return function(){clearTimeout(i),a()}}function ae(e,t,n,r){null==n&&(n=function(e){var t=j(e,"transitionDuration")||"",n=-1===t.indexOf("ms")?1e3:1;return parseFloat(t)*n}(e)||0);var i=ie(e,n,r),a=re(e,"transitionend",t);return function(){i(),a()}}function oe(e,t){var n=j(e,t)||"",r=-1===n.indexOf("ms")?1e3:1;return parseFloat(n)*r}function ue(e,t){var n=oe(e,"transitionDuration"),r=oe(e,"transitionDelay"),i=ae(e,(function(n){n.target===e&&(i(),t(n))}),n+r)}var se=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return null!=e})).reduce((function(e,t){if("function"!==typeof t)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?t:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}}),null)};function ce(e){e.offsetHeight}var le=function(e){return e&&"function"!==typeof e?function(t){e.current=t}:e};var fe=function(e,n){return(0,t.useMemo)((function(){return function(e,t){var n=le(e),r=le(t);return function(e){n&&n(e),r&&r(e)}}(e,n)}),[e,n])};var de,he=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children","childRef"],pe=t.forwardRef((function(e,n){var i=e.onEnter,a=e.onEntering,o=e.onEntered,u=e.onExit,c=e.onExiting,f=e.onExited,d=e.addEndListener,h=e.children,p=e.childRef,v=l(e,he),y=(0,t.useRef)(null),m=fe(y,p),g=function(e){var t;m((t=e)&&"setState"in t?r.findDOMNode(t):null!=t?t:null)},k=function(e){return function(t){e&&y.current&&e(y.current,t)}},b=(0,t.useCallback)(k(i),[i]),w=(0,t.useCallback)(k(a),[a]),E=(0,t.useCallback)(k(o),[o]),_=(0,t.useCallback)(k(u),[u]),I=(0,t.useCallback)(k(c),[c]),T=(0,t.useCallback)(k(f),[f]),S=(0,t.useCallback)(k(d),[d]);return(0,x.jsx)(Y,(0,s.Z)((0,s.Z)({ref:n},v),{},{onEnter:b,onEntered:E,onEntering:w,onExit:_,onExited:T,onExiting:I,addEndListener:S,nodeRef:y,children:"function"===typeof h?function(e,t){return h(e,(0,s.Z)((0,s.Z)({},t),{},{ref:g}))}:t.cloneElement(h,{ref:g})}))})),ve=["onEnter","onEntering","onEntered","onExit","onExiting","className","children","dimension","getDimensionValue"],ye={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function me(e,t){var n=t["offset".concat(e[0].toUpperCase()).concat(e.slice(1))],r=ye[e];return n+parseInt(j(t,r[0]),10)+parseInt(j(t,r[1]),10)}var ge=(de={},(0,O.Z)(de,K,"collapse"),(0,O.Z)(de,G,"collapsing"),(0,O.Z)(de,H,"collapsing"),(0,O.Z)(de,W,"collapse show"),de),ke={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,getDimensionValue:me},be=t.forwardRef((function(e,n){var r=e.onEnter,i=e.onEntering,a=e.onEntered,o=e.onExit,u=e.onExiting,c=e.className,f=e.children,h=e.dimension,p=void 0===h?"height":h,v=e.getDimensionValue,y=void 0===v?me:v,m=l(e,ve),g="function"===typeof p?p():p,k=(0,t.useMemo)((function(){return se((function(e){e.style[g]="0"}),r)}),[g,r]),b=(0,t.useMemo)((function(){return se((function(e){var t="scroll".concat(g[0].toUpperCase()).concat(g.slice(1));e.style[g]="".concat(e[t],"px")}),i)}),[g,i]),w=(0,t.useMemo)((function(){return se((function(e){e.style[g]=null}),a)}),[g,a]),E=(0,t.useMemo)((function(){return se((function(e){e.style[g]="".concat(y(g,e),"px"),ce(e)}),o)}),[o,y,g]),_=(0,t.useMemo)((function(){return se((function(e){e.style[g]=null}),u)}),[g,u]);return(0,x.jsx)(pe,(0,s.Z)((0,s.Z)({ref:n,addEndListener:ue},m),{},{"aria-expanded":m.role?m.in:null,onEnter:k,onEntering:b,onEntered:w,onExit:E,onExiting:_,childRef:f.ref,children:function(e,n){return t.cloneElement(f,(0,s.Z)((0,s.Z)({},n),{},{className:d()(c,f.props.className,ge[e],"width"===g&&"collapse-horizontal")}))}}))}));be.defaultProps=ke;var we=be,xe=t.createContext(null);xe.displayName="NavbarContext";var Ee=xe,_e=["children","bsPrefix"],Ie=t.forwardRef((function(e,n){var r=e.children,i=e.bsPrefix,a=l(e,_e);i=I(i,"navbar-collapse");var o=(0,t.useContext)(Ee);return(0,x.jsx)(we,(0,s.Z)((0,s.Z)({in:!(!o||!o.expanded)},a),{},{children:(0,x.jsx)("div",{ref:n,className:i,children:r})}))}));Ie.displayName="NavbarCollapse";var Te=Ie;var Se=function(e){var n=(0,t.useRef)(e);return(0,t.useEffect)((function(){n.current=e}),[e]),n};function Ce(e){var n=Se(e);return(0,t.useCallback)((function(){return n.current&&n.current.apply(n,arguments)}),[n])}var Ne=["bsPrefix","className","children","label","as","onClick"],Pe=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.className,a=e.children,o=e.label,u=e.as,c=void 0===u?"button":u,f=e.onClick,h=l(e,Ne);r=I(r,"navbar-toggler");var p=(0,t.useContext)(Ee)||{},v=p.onToggle,y=p.expanded,m=Ce((function(e){f&&f(e),v&&v()}));return"button"===c&&(h.type="button"),(0,x.jsx)(c,(0,s.Z)((0,s.Z)({},h),{},{ref:n,onClick:m,"aria-label":o,className:d()(i,r,!y&&"collapsed"),children:a||(0,x.jsx)("span",{className:"".concat(r,"-icon")})}))}));Pe.displayName="NavbarToggle",Pe.defaultProps={label:"Toggle navigation"};var Ae=Pe;function Oe(e){if(Array.isArray(e))return e}function Re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function De(e,t){if(e){if("string"===typeof e)return Re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Re(e,t):void 0}}function Le(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Me(e,t){return Oe(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||De(e,t)||Le()}function Fe(e){void 0===e&&(e=R());try{var t=e.activeElement;return t&&t.nodeName?t:null}catch(AN){return e.body}}function Ue(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):void 0}function je(e){var n=function(e){var n=(0,t.useRef)(e);return n.current=e,n}(e);(0,t.useEffect)((function(){return function(){return n.current()}}),[])}function Ve(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Be(e){return function(e){if(Array.isArray(e))return Re(e)}(e)||Ve(e)||De(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ke(e,t,n){return t&&ze(e.prototype,t),n&&ze(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var He,We=(He="modal-open","".concat("data-rr-ui-").concat(He)),Ge=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.ownerDocument,r=t.handleContainerOverflow,i=void 0===r||r,a=t.isRTL,o=void 0!==a&&a;qe(this,e),this.handleContainerOverflow=i,this.isRTL=o,this.modals=[],this.ownerDocument=n}return Ke(e,[{key:"getScrollbarWidth",value:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}(this.ownerDocument)}},{key:"getElement",value:function(){return(this.ownerDocument||document).body}},{key:"setModalAttributes",value:function(e){}},{key:"removeModalAttributes",value:function(e){}},{key:"setContainerStyle",value:function(e){var t={overflow:"hidden"},n=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();e.style=(0,O.Z)({overflow:r.style.overflow},n,r.style[n]),e.scrollBarWidth&&(t[n]="".concat(parseInt(j(r,n)||"0",10)+e.scrollBarWidth,"px")),r.setAttribute(We,""),j(r,t)}},{key:"reset",value:function(){var e=this;Be(this.modals).forEach((function(t){return e.remove(t)}))}},{key:"removeContainerStyle",value:function(e){var t=this.getElement();t.removeAttribute(We),Object.assign(t.style,e.style)}},{key:"add",value:function(e){var t=this.modals.indexOf(e);return-1!==t?t:(t=this.modals.length,this.modals.push(e),this.setModalAttributes(e),0!==t||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t)}},{key:"remove",value:function(e){var t=this.modals.indexOf(e);-1!==t&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}},{key:"isTopModal",value:function(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}]),e}(),Ze=Ge,Qe=(0,t.createContext)($?window:void 0);Qe.Provider;function Ye(){return(0,t.useContext)(Qe)}var $e=function(e,t){var n;return $?null==e?(t||R()).body:("function"===typeof e&&(e=e()),e&&"current"in e&&(e=e.current),null!=(n=e)&&n.nodeType&&e||null):null};var Je,Xe=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","backdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function et(e){var n=Ye(),r=e||function(e){return Je||(Je=new Ze({ownerDocument:null==e?void 0:e.document})),Je}(n),i=(0,t.useRef)({dialog:null,backdrop:null});return Object.assign(i.current,{add:function(){return r.add(i.current)},remove:function(){return r.remove(i.current)},isTopModal:function(){return r.isTopModal(i.current)},setDialogRef:(0,t.useCallback)((function(e){i.current.dialog=e}),[]),setBackdropRef:(0,t.useCallback)((function(e){i.current.backdrop=e}),[])})}var tt=(0,t.forwardRef)((function(e,n){var i=e.show,a=void 0!==i&&i,o=e.role,u=void 0===o?"dialog":o,s=e.className,c=e.style,l=e.children,f=e.backdrop,d=void 0===f||f,h=e.keyboard,p=void 0===h||h,v=e.onBackdropClick,y=e.onEscapeKeyDown,m=e.transition,g=e.backdropTransition,k=e.autoFocus,b=void 0===k||k,w=e.enforceFocus,E=void 0===w||w,_=e.restoreFocus,I=void 0===_||_,T=e.restoreFocusOptions,S=e.renderDialog,C=e.renderBackdrop,N=void 0===C?function(e){return(0,x.jsx)("div",Object.assign({},e))}:C,P=e.manager,A=e.container,O=e.onShow,R=e.onHide,D=void 0===R?function(){}:R,L=e.onExit,M=e.onExited,F=e.onExiting,U=e.onEnter,j=e.onEntering,V=e.onEntered,B=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,Xe),q=function(e,n){var r=Ye(),i=Me((0,t.useState)((function(){return $e(e,null==r?void 0:r.document)})),2),a=i[0],o=i[1];if(!a){var u=$e(e);u&&o(u)}return(0,t.useEffect)((function(){n&&a&&n(a)}),[n,a]),(0,t.useEffect)((function(){var t=$e(e);t!==a&&o(t)}),[e,a]),a}(A),z=et(P),K=function(){var e=(0,t.useRef)(!0),n=(0,t.useRef)((function(){return e.current}));return(0,t.useEffect)((function(){return function(){e.current=!1}}),[]),n.current}(),H=function(e){var n=(0,t.useRef)(null);return(0,t.useEffect)((function(){n.current=e})),n.current}(a),W=Me((0,t.useState)(!a),2),G=W[0],Z=W[1],Q=(0,t.useRef)(null);(0,t.useImperativeHandle)(n,(function(){return z}),[z]),$&&!H&&a&&(Q.current=Fe()),m||a||G?a&&G&&Z(!1):Z(!0);var Y=Ce((function(){if(z.add(),ie.current=re(document,"keydown",te),ne.current=re(document,"focus",(function(){return setTimeout(X)}),!0),O&&O(),b){var e=Fe(document);z.dialog&&e&&!Ue(z.dialog,e)&&(Q.current=e,z.dialog.focus())}})),J=Ce((function(){var e;(z.remove(),null==ie.current||ie.current(),null==ne.current||ne.current(),I)&&(null==(e=Q.current)||null==e.focus||e.focus(T),Q.current=null)}));(0,t.useEffect)((function(){a&&q&&Y()}),[a,q,Y]),(0,t.useEffect)((function(){G&&J()}),[G,J]),je((function(){J()}));var X=Ce((function(){if(E&&K()&&z.isTopModal()){var e=Fe();z.dialog&&e&&!Ue(z.dialog,e)&&z.dialog.focus()}})),ee=Ce((function(e){e.target===e.currentTarget&&(null==v||v(e),!0===d&&D())})),te=Ce((function(e){p&&27===e.keyCode&&z.isTopModal()&&(null==y||y(e),e.defaultPrevented||D())})),ne=(0,t.useRef)(),ie=(0,t.useRef)(),ae=m;if(!q||!(a||ae&&!G))return null;var oe=Object.assign({role:u,ref:z.setDialogRef,"aria-modal":"dialog"===u||void 0},B,{style:c,className:s,tabIndex:-1}),ue=S?S(oe):(0,x.jsx)("div",Object.assign({},oe,{children:t.cloneElement(l,{role:"document"})}));ae&&(ue=(0,x.jsx)(ae,{appear:!0,unmountOnExit:!0,in:!!a,onExit:L,onExiting:F,onExited:function(){Z(!0),null==M||M.apply(void 0,arguments)},onEnter:U,onEntering:j,onEntered:V,children:ue}));var se=null;if(d){var ce=g;se=N({ref:z.setBackdropRef,onClick:ee}),ce&&(se=(0,x.jsx)(ce,{appear:!0,in:!!a,children:se}))}return(0,x.jsx)(x.Fragment,{children:r.createPortal((0,x.jsxs)(x.Fragment,{children:[se,ue]}),q)})}));tt.displayName="Modal";var nt,rt=Object.assign(tt,{Manager:Ze}),it=["className","children","transitionClasses"],at=(nt={},(0,O.Z)(nt,H,"show"),(0,O.Z)(nt,W,"show"),nt),ot=t.forwardRef((function(e,n){var r=e.className,i=e.children,a=e.transitionClasses,o=void 0===a?{}:a,u=l(e,it),c=(0,t.useCallback)((function(e,t){ce(e),null==u.onEnter||u.onEnter(e,t)}),[u]);return(0,x.jsx)(pe,(0,s.Z)((0,s.Z)({ref:n,addEndListener:ue},u),{},{onEnter:c,childRef:i.ref,children:function(e,n){return t.cloneElement(i,(0,s.Z)((0,s.Z)({},n),{},{className:d()("fade",r,i.props.className,at[e],o[e])}))}}))}));ot.defaultProps={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},ot.displayName="Fade";var ut,st=ot,ct=C("offcanvas-body"),lt=["bsPrefix","className","children"],ft=(ut={},(0,O.Z)(ut,H,"show"),(0,O.Z)(ut,W,"show"),ut),dt=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.className,a=e.children,o=l(e,lt);return r=I(r,"offcanvas"),(0,x.jsx)(pe,(0,s.Z)((0,s.Z)({ref:n,addEndListener:ue},o),{},{childRef:a.ref,children:function(e,n){return t.cloneElement(a,(0,s.Z)((0,s.Z)({},n),{},{className:d()(i,a.props.className,(e===H||e===G)&&"".concat(r,"-toggling"),ft[e])}))}}))}));dt.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1},dt.displayName="OffcanvasToggling";var ht=dt,pt=t.createContext({onHide:function(){}}),vt=n(2007),yt=n.n(vt),mt=["className","variant"],gt={"aria-label":yt().string,onClick:yt().func,variant:yt().oneOf(["white"])},kt=t.forwardRef((function(e,t){var n=e.className,r=e.variant,i=l(e,mt);return(0,x.jsx)("button",(0,s.Z)({ref:t,type:"button",className:d()("btn-close",r&&"btn-close-".concat(r),n)},i))}));kt.displayName="CloseButton",kt.propTypes=gt,kt.defaultProps={"aria-label":"Close"};var bt=kt,wt=["closeLabel","closeVariant","closeButton","onHide","children"],xt=t.forwardRef((function(e,n){var r=e.closeLabel,i=e.closeVariant,a=e.closeButton,o=e.onHide,u=e.children,c=l(e,wt),f=(0,t.useContext)(pt),d=Ce((function(){null==f||f.onHide(),null==o||o()}));return(0,x.jsxs)("div",(0,s.Z)((0,s.Z)({ref:n},c),{},{children:[u,a&&(0,x.jsx)(bt,{"aria-label":r,variant:i,onClick:d})]}))}));xt.defaultProps={closeLabel:"Close",closeButton:!1};var Et=xt,_t=["bsPrefix","className"],It=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=l(e,_t);return n=I(n,"offcanvas-header"),(0,x.jsx)(Et,(0,s.Z)((0,s.Z)({ref:t},i),{},{className:d()(r,n)}))}));It.displayName="OffcanvasHeader",It.defaultProps={closeLabel:"Close",closeButton:!1};var Tt=It,St=function(e){return t.forwardRef((function(t,n){return(0,x.jsx)("div",(0,s.Z)((0,s.Z)({},t),{},{ref:n,className:d()(t.className,e)}))}))},Ct=C("offcanvas-title",{Component:St("h5")});function Nt(e){return Nt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Nt(e)}function Pt(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Nt(e)););return e}function At(){return At="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=Pt(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},At.apply(this,arguments)}function Ot(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V(e,t)}function Rt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(AN){return!1}}function Dt(e){return Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dt(e)}function Lt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mt(e,t){if(t&&("object"===Dt(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Lt(e)}function Ft(e){var t=Rt();return function(){var n,r=Nt(e);if(t){var i=Nt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Mt(this,n)}}var Ut=Function.prototype.bind.call(Function.prototype.call,[].slice);function jt(e,t){return Ut(e.querySelectorAll(t))}function Vt(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var Bt,qt=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",zt=".sticky-top",Kt=".navbar-toggler",Ht=function(e){Ot(n,e);var t=Ft(n);function n(){return qe(this,n),t.apply(this,arguments)}return Ke(n,[{key:"adjustAndStore",value:function(e,t,n){var r=t.style[e];t.dataset[e]=r,j(t,(0,O.Z)({},e,"".concat(parseFloat(j(t,e))+n,"px")))}},{key:"restore",value:function(e,t){var n=t.dataset[e];void 0!==n&&(delete t.dataset[e],j(t,(0,O.Z)({},e,n)))}},{key:"setContainerStyle",value:function(e){var t=this;At(Nt(n.prototype),"setContainerStyle",this).call(this,e);var r,i,a=this.getElement();if(i="modal-open",(r=a).classList?r.classList.add(i):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(r,i)||("string"===typeof r.className?r.className=r.className+" "+i:r.setAttribute("class",(r.className&&r.className.baseVal||"")+" "+i)),e.scrollBarWidth){var o=this.isRTL?"paddingLeft":"paddingRight",u=this.isRTL?"marginLeft":"marginRight";jt(a,qt).forEach((function(n){return t.adjustAndStore(o,n,e.scrollBarWidth)})),jt(a,zt).forEach((function(n){return t.adjustAndStore(u,n,-e.scrollBarWidth)})),jt(a,Kt).forEach((function(n){return t.adjustAndStore(u,n,e.scrollBarWidth)}))}}},{key:"removeContainerStyle",value:function(e){var t=this;At(Nt(n.prototype),"removeContainerStyle",this).call(this,e);var r,i,a=this.getElement();i="modal-open",(r=a).classList?r.classList.remove(i):"string"===typeof r.className?r.className=Vt(r.className,i):r.setAttribute("class",Vt(r.className&&r.className.baseVal||"",i));var o=this.isRTL?"paddingLeft":"paddingRight",u=this.isRTL?"marginLeft":"marginRight";jt(a,qt).forEach((function(e){return t.restore(o,e)})),jt(a,zt).forEach((function(e){return t.restore(u,e)})),jt(a,Kt).forEach((function(e){return t.restore(u,e)}))}}]),n}(Ze);var Wt=Ht,Gt=["bsPrefix","className","children","aria-labelledby","placement","show","backdrop","keyboard","scroll","onEscapeKeyDown","onShow","onHide","container","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","onEntered","onExit","onExiting","onEnter","onEntering","onExited","backdropClassName","manager"];function Zt(e){return(0,x.jsx)(ht,(0,s.Z)({},e))}function Qt(e){return(0,x.jsx)(st,(0,s.Z)({},e))}var Yt=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.className,a=e.children,o=e["aria-labelledby"],u=e.placement,c=e.show,f=e.backdrop,h=e.keyboard,p=e.scroll,v=e.onEscapeKeyDown,y=e.onShow,m=e.onHide,g=e.container,k=e.autoFocus,b=e.enforceFocus,w=e.restoreFocus,E=e.restoreFocusOptions,_=e.onEntered,T=e.onExit,S=e.onExiting,C=e.onEnter,N=e.onEntering,P=e.onExited,A=e.backdropClassName,O=e.manager,R=l(e,Gt),D=(0,t.useRef)();r=I(r,"offcanvas");var L=((0,t.useContext)(Ee)||{}).onToggle,M=Ce((function(){null==L||L(),null==m||m()})),F=(0,t.useMemo)((function(){return{onHide:M}}),[M]);var U=(0,t.useCallback)((function(e){return(0,x.jsx)("div",(0,s.Z)((0,s.Z)({},e),{},{className:d()("".concat(r,"-backdrop"),A)}))}),[A,r]);return(0,x.jsx)(pt.Provider,{value:F,children:(0,x.jsx)(rt,{show:c,ref:n,backdrop:f,container:g,keyboard:h,autoFocus:k,enforceFocus:b&&!p,restoreFocus:w,restoreFocusOptions:E,onEscapeKeyDown:v,onShow:y,onHide:M,onEnter:function(e){e&&(e.style.visibility="visible");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];null==C||C.apply(void 0,[e].concat(n))},onEntering:N,onEntered:_,onExit:T,onExiting:S,onExited:function(e){e&&(e.style.visibility="");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];null==P||P.apply(void 0,n)},manager:O||(p?(D.current||(D.current=new Wt({handleContainerOverflow:!1})),D.current):function(e){return Bt||(Bt=new Ht(e)),Bt}()),transition:Zt,backdropTransition:Qt,renderBackdrop:U,renderDialog:function(e){return(0,x.jsx)("div",(0,s.Z)((0,s.Z)((0,s.Z)({role:"dialog"},e),R),{},{className:d()(i,r,"".concat(r,"-").concat(u)),"aria-labelledby":o,children:a}))}})})}));Yt.displayName="Offcanvas",Yt.defaultProps={show:!1,backdrop:!0,keyboard:!0,scroll:!1,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,placement:"start"};var $t=Object.assign(Yt,{Body:ct,Header:Tt,Title:Ct}),Jt=t.forwardRef((function(e,n){var r=(0,t.useContext)(Ee);return(0,x.jsx)($t,(0,s.Z)({ref:n,show:!(null==r||!r.expanded)},e))}));Jt.displayName="NavbarOffcanvas";var Xt=Jt,en=["bsPrefix","expand","variant","bg","fixed","sticky","className","as","expanded","onToggle","onSelect","collapseOnSelect"],tn=C("navbar-text",{Component:"span"}),nn=t.forwardRef((function(e,n){var r=m(e,{expanded:"onToggle"}),i=r.bsPrefix,a=r.expand,o=r.variant,u=r.bg,c=r.fixed,f=r.sticky,p=r.className,v=r.as,y=void 0===v?"nav":v,g=r.expanded,k=r.onToggle,b=r.onSelect,w=r.collapseOnSelect,E=l(r,en),_=I(i,"navbar"),T=(0,t.useCallback)((function(){null==b||b.apply(void 0,arguments),w&&g&&(null==k||k(!1))}),[b,w,g,k]);void 0===E.role&&"nav"!==y&&(E.role="navigation");var S="".concat(_,"-expand");"string"===typeof a&&(S="".concat(S,"-").concat(a));var C=(0,t.useMemo)((function(){return{onToggle:function(){return null==k?void 0:k(!g)},bsPrefix:_,expanded:!!g}}),[_,g,k]);return(0,x.jsx)(Ee.Provider,{value:C,children:(0,x.jsx)(h.Provider,{value:T,children:(0,x.jsx)(y,(0,s.Z)((0,s.Z)({ref:n},E),{},{className:d()(p,_,a&&S,o&&"".concat(_,"-").concat(o),u&&"bg-".concat(u),f&&"sticky-".concat(f),c&&"fixed-".concat(c))}))})})}));nn.defaultProps={expand:!0,variant:"light",collapseOnSelect:!1},nn.displayName="Navbar";var rn,an=Object.assign(nn,{Brand:A,Collapse:Te,Offcanvas:Xt,Text:tn,Toggle:Ae}),on=n(1616),un=n(5485);!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(rn||(rn={}));var sn=function(e){return e};var cn="beforeunload",ln="popstate";function fn(e){e.preventDefault(),e.returnValue=""}function dn(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function hn(){return Math.random().toString(36).substr(2,8)}function pn(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function vn(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function yn(e,t){if(!e)throw new Error(t)}var mn=(0,t.createContext)(null);var gn=(0,t.createContext)(null);var kn=(0,t.createContext)({outlet:null,matches:[]});function bn(e){var n=e.to,r=e.replace,i=e.state;_n()||yn(!1);var a=Tn();return(0,t.useEffect)((function(){a(n,{replace:r,state:i})})),null}function wn(e){yn(!1)}function xn(e){var n=e.basename,r=void 0===n?"/":n,i=e.children,a=void 0===i?null:i,o=e.location,u=e.navigationType,s=void 0===u?rn.Pop:u,c=e.navigator,l=e.static,f=void 0!==l&&l;_n()&&yn(!1);var d=Un(r),h=(0,t.useMemo)((function(){return{basename:d,navigator:c,static:f}}),[d,c,f]);"string"===typeof o&&(o=vn(o));var p=o,v=p.pathname,y=void 0===v?"/":v,m=p.search,g=void 0===m?"":m,k=p.hash,b=void 0===k?"":k,w=p.state,x=void 0===w?null:w,E=p.key,_=void 0===E?"default":E,I=(0,t.useMemo)((function(){var e=Mn(y,d);return null==e?null:{pathname:e,search:g,hash:b,state:x,key:_}}),[d,y,g,b,x,_]);return null==I?null:(0,t.createElement)(mn.Provider,{value:h},(0,t.createElement)(gn.Provider,{children:a,value:{location:I,navigationType:s}}))}function En(e){var n=e.children,r=e.location;return function(e,n){_n()||yn(!1);var r=(0,t.useContext)(kn).matches,i=r[r.length-1],a=i?i.params:{},o=(i&&i.pathname,i?i.pathnameBase:"/");i&&i.route;0;var u,s=In();if(n){var c,l="string"===typeof n?vn(n):n;"/"===o||(null==(c=l.pathname)?void 0:c.startsWith(o))||yn(!1),u=l}else u=s;var f=u.pathname||"/",d="/"===o?f:f.slice(o.length)||"/",h=function(e,t,n){void 0===n&&(n="/");var r=Mn(("string"===typeof t?vn(t):t).pathname||"/",n);if(null==r)return null;var i=Cn(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=On(i[o],r);return a}(e,{pathname:d});0;return Rn(h&&h.map((function(e){return Object.assign({},e,{params:Object.assign({},a,e.params),pathname:Fn([o,e.pathname]),pathnameBase:"/"===e.pathnameBase?o:Fn([o,e.pathnameBase])})})),r)}(Sn(n),r)}function _n(){return null!=(0,t.useContext)(gn)}function In(){return _n()||yn(!1),(0,t.useContext)(gn).location}function Tn(){_n()||yn(!1);var e=(0,t.useContext)(mn),n=e.basename,r=e.navigator,i=(0,t.useContext)(kn).matches,a=In().pathname,o=JSON.stringify(i.map((function(e){return e.pathnameBase}))),u=(0,t.useRef)(!1);(0,t.useEffect)((function(){u.current=!0}));var s=(0,t.useCallback)((function(e,t){if(void 0===t&&(t={}),u.current)if("number"!==typeof e){var i=Ln(e,JSON.parse(o),a);"/"!==n&&(i.pathname=Fn([n,i.pathname])),(t.replace?r.replace:r.push)(i,t.state)}else r.go(e)}),[n,r,o,a]);return s}function Sn(e){var n=[];return t.Children.forEach(e,(function(e){if((0,t.isValidElement)(e))if(e.type!==t.Fragment){e.type!==wn&&yn(!1);var r={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(r.children=Sn(e.props.children)),n.push(r)}else n.push.apply(n,Sn(e.props.children))})),n}function Cn(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(a.relativePath.startsWith(r)||yn(!1),a.relativePath=a.relativePath.slice(r.length));var o=Fn([r,a.relativePath]),u=n.concat(a);e.children&&e.children.length>0&&(!0===e.index&&yn(!1),Cn(e.children,t,u,o)),(null!=e.path||e.index)&&t.push({path:o,score:An(o,e.index),routesMeta:u})})),t}var Nn=/^:\w+$/,Pn=function(e){return"*"===e};function An(e,t){var n=e.split("/"),r=n.length;return n.some(Pn)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!Pn(e)})).reduce((function(e,t){return e+(Nn.test(t)?3:""===t?1:10)}),r)}function On(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=Dn({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:Fn([i,l.pathname]),pathnameBase:Un(Fn([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=Fn([i,l.pathnameBase]))}return a}function Rn(e,n){return void 0===n&&(n=[]),null==e?null:e.reduceRight((function(r,i,a){return(0,t.createElement)(kn.Provider,{children:void 0!==i.route.element?i.route.element:r,value:{outlet:r,matches:n.concat(e.slice(0,a+1))}})}),null)}function Dn(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)";return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=Me(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],s=u.replace(/(.)\/+$/,"$1"),c=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return e}}(c[n]||""),e}),{}),pathname:u,pathnameBase:s,pattern:e}}function Ln(e,t,n){var r,i="string"===typeof e?vn(e):e,a=""===e||""===i.pathname?"/":i.pathname;if(null==a)r=n;else{var o=t.length-1;if(a.startsWith("..")){for(var u=a.split("/");".."===u[0];)u.shift(),o-=1;i.pathname=u.join("/")}r=o>=0?t[o]:"/"}var s=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?vn(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:jn(a),hash:Vn(u)}}(i,r);return a&&"/"!==a&&a.endsWith("/")&&!s.pathname.endsWith("/")&&(s.pathname+="/"),s}function Mn(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}var Fn=function(e){return e.join("/").replace(/\/\/+/g,"/")},Un=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},jn=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},Vn=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""};function Bn(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=De(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function qn(e,t,n){return qn=Rt()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&V(i,n.prototype),i},qn.apply(null,arguments)}function zn(e){var t="function"===typeof Map?new Map:void 0;return zn=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return qn(e,arguments,Nt(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),V(n,e)},zn(e)}var Kn=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Hn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,d=(15&u)<<2|c>>6,h=63&c;s||(h=64,o||(d=64)),r.push(n[l],n[f],n[d],n[h])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Kn(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Wn=function(e){var t=Kn(e);return Hn.encodeByteArray(t,!0)},Gn=function(e){return Wn(e).replace(/\./g,"")},Zn=function(e){try{return Hn.decodeString(e,!0)}catch(AN){console.error("base64Decode failed: ",AN)}return null};function Qn(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Qn(e[n],t[n]));return e}var Yn=function(){function e(){var t=this;qe(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return Ke(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function $n(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Gn(JSON.stringify({alg:"none",type:"JWT"})),Gn(JSON.stringify(a)),""].join(".")}function Jn(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Xn(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Jn())}function er(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(AN){return!1}}function tr(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function nr(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function rr(){var e=Jn();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function ir(){return"object"===typeof indexedDB}var ar=function(e){Ot(n,e);var t=Ft(n);function n(e,r,i){var a;return qe(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(Lt(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(Lt(a),or.prototype.create),a}return Ke(n)}(zn(Error)),or=function(){function e(t,n,r){qe(this,e),this.service=t,this.serviceName=n,this.errors=r}return Ke(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?ur(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new ar(n,a,t);return o}}]),e}();function ur(e,t){return e.replace(sr,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var sr=/\{\$([^}]+)}/g;function cr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function lr(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(fr(u)&&fr(s)){if(!lr(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function fr(e){return null!==e&&"object"===typeof e}function dr(e){for(var t=[],n=function(){var e=Me(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function hr(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=Me(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function pr(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function vr(e,t){var n=new yr(e,t);return n.subscribe.bind(n)}var yr=function(){function e(t,n){var r=this;qe(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return Ke(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=Bn(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=mr),void 0===r.error&&(r.error=mr),void 0===r.complete&&(r.complete=mr);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(AN){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(AN){"undefined"!==typeof console&&console.error&&console.error(AN)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function mr(){}function gr(e){return e&&e._delegate?e._delegate:e}var kr=function(){function e(t,n,r){qe(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return Ke(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),br="[DEFAULT]",wr=function(){function e(t,n){qe(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return Ke(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Yn;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(AN){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(AN){if(r)return null;throw AN}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:br})}catch(AN){}var t,n=Bn(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=Me(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(AN){}}}catch(s){n.e(s)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:br;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=a(o.mark((function e(){var t;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(Be(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),Be(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:br;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:br;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=Bn(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=Me(i.value,2),s=u[0],c=u[1],l=this.normalizeInstanceIdentifier(s);r===l&&c.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=Bn(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(sT){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===br?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(sT){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:br;return this.component?this.component.multipleInstances?e:br:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var xr,Er,_r=function(){function e(t){qe(this,e),this.name=t,this.providers=new Map}return Ke(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new wr(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Ir=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Er||(Er={}));var Tr={debug:Er.DEBUG,verbose:Er.VERBOSE,info:Er.INFO,warn:Er.WARN,error:Er.ERROR,silent:Er.SILENT},Sr=Er.INFO,Cr=(xr={},(0,O.Z)(xr,Er.DEBUG,"log"),(0,O.Z)(xr,Er.VERBOSE,"log"),(0,O.Z)(xr,Er.INFO,"info"),(0,O.Z)(xr,Er.WARN,"warn"),(0,O.Z)(xr,Er.ERROR,"error"),xr),Nr=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Cr[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Pr=function(){function e(t){qe(this,e),this.name=t,this._logLevel=Sr,this._logHandler=Nr,this._userLogHandler=null,Ir.push(this)}return Ke(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Er))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Tr[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Er.DEBUG].concat(t)),this._logHandler.apply(this,[this,Er.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Er.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Er.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Er.INFO].concat(t)),this._logHandler.apply(this,[this,Er.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Er.WARN].concat(t)),this._logHandler.apply(this,[this,Er.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Er.ERROR].concat(t)),this._logHandler.apply(this,[this,Er.ERROR].concat(t))}}]),e}();var Ar,Or,Rr=n(1753),Dr=function(){function e(t){qe(this,e),this.container=t}return Ke(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Lr="@firebase/app",Mr="0.7.18",Fr=new Pr("@firebase/app"),Ur="[DEFAULT]",jr=(Ar={},(0,O.Z)(Ar,Lr,"fire-core"),(0,O.Z)(Ar,"@firebase/app-compat","fire-core-compat"),(0,O.Z)(Ar,"@firebase/analytics","fire-analytics"),(0,O.Z)(Ar,"@firebase/analytics-compat","fire-analytics-compat"),(0,O.Z)(Ar,"@firebase/app-check","fire-app-check"),(0,O.Z)(Ar,"@firebase/app-check-compat","fire-app-check-compat"),(0,O.Z)(Ar,"@firebase/auth","fire-auth"),(0,O.Z)(Ar,"@firebase/auth-compat","fire-auth-compat"),(0,O.Z)(Ar,"@firebase/database","fire-rtdb"),(0,O.Z)(Ar,"@firebase/database-compat","fire-rtdb-compat"),(0,O.Z)(Ar,"@firebase/functions","fire-fn"),(0,O.Z)(Ar,"@firebase/functions-compat","fire-fn-compat"),(0,O.Z)(Ar,"@firebase/installations","fire-iid"),(0,O.Z)(Ar,"@firebase/installations-compat","fire-iid-compat"),(0,O.Z)(Ar,"@firebase/messaging","fire-fcm"),(0,O.Z)(Ar,"@firebase/messaging-compat","fire-fcm-compat"),(0,O.Z)(Ar,"@firebase/performance","fire-perf"),(0,O.Z)(Ar,"@firebase/performance-compat","fire-perf-compat"),(0,O.Z)(Ar,"@firebase/remote-config","fire-rc"),(0,O.Z)(Ar,"@firebase/remote-config-compat","fire-rc-compat"),(0,O.Z)(Ar,"@firebase/storage","fire-gcs"),(0,O.Z)(Ar,"@firebase/storage-compat","fire-gcs-compat"),(0,O.Z)(Ar,"@firebase/firestore","fire-fst"),(0,O.Z)(Ar,"@firebase/firestore-compat","fire-fst-compat"),(0,O.Z)(Ar,"fire-js","fire-js"),(0,O.Z)(Ar,"firebase","fire-js-all"),Ar),Vr=new Map,Br=new Map;function qr(e,t){try{e.container.addComponent(t)}catch(AN){Fr.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),AN)}}function zr(e,t){e.container.addOrOverwriteComponent(t)}function Kr(e){var t=e.name;if(Br.has(t))return Fr.debug("There were multiple attempts to register component ".concat(t,".")),!1;Br.set(t,e);var n,r=Bn(Vr.values());try{for(r.s();!(n=r.n()).done;){qr(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Hr(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Wr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ur;Hr(e,t).clearInstance(n)}function Gr(){Br.clear()}var Zr=(Or={},(0,O.Z)(Or,"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),(0,O.Z)(Or,"bad-app-name","Illegal App name: '{$appName}"),(0,O.Z)(Or,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),(0,O.Z)(Or,"app-deleted","Firebase App named '{$appName}' already deleted"),(0,O.Z)(Or,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),(0,O.Z)(Or,"invalid-log-argument","First argument to `onLog` must be null or a function."),(0,O.Z)(Or,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),(0,O.Z)(Or,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),(0,O.Z)(Or,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),(0,O.Z)(Or,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),Or),Qr=new or("app","Firebase",Zr),Yr=function(){function e(t,n,r){var i=this;qe(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new kr("app",(function(){return i}),"PUBLIC"))}return Ke(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Qr.create("app-deleted",{appName:this._name})}}]),e}(),$r="9.6.8";function Jr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:Ur,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Qr.create("bad-app-name",{appName:String(i)});var a=Vr.get(i);if(a){if(lr(e,a.options)&&lr(r,a.config))return a;throw Qr.create("duplicate-app",{appName:i})}var o,u=new _r(i),s=Bn(Br.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new Yr(e,r,u);return Vr.set(i,l),l}function Xr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ur,t=Vr.get(e);if(!t)throw Qr.create("no-app",{appName:e});return t}function ei(){return Array.from(Vr.values())}function ti(e){return ni.apply(this,arguments)}function ni(){return ni=a(o.mark((function e(t){var n;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Vr.has(n)){e.next=6;break}return Vr.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)}))),ni.apply(this,arguments)}function ri(e,t,n){var r,i=null!==(r=jr[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Fr.warn(u.join(" "))}Kr(new kr("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function ii(e,t){if(null!==e&&"function"!==typeof e)throw Qr.create("invalid-log-argument");!function(e,t){var n,r=Bn(Ir);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Tr[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Er[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function ai(e){var t;t=e,Ir.forEach((function(e){e.setLogLevel(t)}))}var oi="firebase-heartbeat-store",ui=null;function si(){return ui||(ui=(0,Rr.openDb)("firebase-heartbeat-database",1,(function(e){if(0===e.oldVersion)e.createObjectStore(oi)})).catch((function(e){throw Qr.create("storage-open",{originalErrorMessage:e.message})}))),ui}function ci(e){return li.apply(this,arguments)}function li(){return li=a(o.mark((function e(t){var n;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,si();case 3:return n=e.sent,e.abrupt("return",n.transaction(oi).objectStore(oi).get(vi(t)));case 7:throw e.prev=7,e.t0=e.catch(0),Qr.create("storage-get",{originalErrorMessage:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),li.apply(this,arguments)}function fi(e,t){return di.apply(this,arguments)}function di(){return di=a(o.mark((function e(t,n){var r,i,a;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,si();case 3:return r=e.sent,i=r.transaction(oi,"readwrite"),a=i.objectStore(oi),e.next=8,a.put(n,vi(t));case 8:return e.abrupt("return",i.complete);case 11:throw e.prev=11,e.t0=e.catch(0),Qr.create("storage-set",{originalErrorMessage:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),di.apply(this,arguments)}function hi(e){return pi.apply(this,arguments)}function pi(){return pi=a(o.mark((function e(t){var n,r;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,si();case 3:return n=e.sent,r=n.transaction(oi,"readwrite"),e.next=7,r.objectStore(oi).delete(vi(t));case 7:return e.abrupt("return",r.complete);case 10:throw e.prev=10,e.t0=e.catch(0),Qr.create("storage-delete",{originalErrorMessage:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),pi.apply(this,arguments)}function vi(e){return"".concat(e.name,"!").concat(e.options.appId)}var yi=function(){function e(t){var n=this;qe(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new wi(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return Ke(e,[{key:"triggerHeartbeat",value:function(){var e=a(o.mark((function e(){var t,n,r;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=mi(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(!this._heartbeatsCache.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.push({date:r,userAgent:n});case 12:return this._heartbeatsCache=this._heartbeatsCache.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=a(o.mark((function e(){var t,n,r,i;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache){e.next=5;break}return e.abrupt("return","");case 5:if(t=gi(this._heartbeatsCache),n=t.heartbeatsToSend,r=t.unsentEntries,i=Wn(JSON.stringify({version:2,heartbeats:n})),!(r.length>0)){e.next=13;break}return this._heartbeatsCache=r,e.next=11,this._storage.overwrite(this._heartbeatsCache);case 11:e.next=15;break;case 13:this._heartbeatsCache=null,this._storage.deleteAll();case 15:return e.abrupt("return",i);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function mi(){return(new Date).toISOString().substring(0,10)}function gi(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=Bn(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.userAgent===e.userAgent}));if(a){if(a.dates.push(e.date),xi(r)>n)return a.dates.pop(),"break"}else if(r.push({userAgent:e.userAgent,dates:[e.date]}),xi(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var ki,bi,wi=function(){function e(t){qe(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return Ke(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=a(o.mark((function e(){return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ir()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=a(o.mark((function e(){var t;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",[]);case 7:return e.next=9,ci(this.app);case 9:return t=e.sent,e.abrupt("return",(null===t||void 0===t?void 0:t.heartbeats)||[]);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=a(o.mark((function e(t){return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.abrupt("return",fi(this.app,{heartbeats:t}));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=a(o.mark((function e(t){var n;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return n=e.sent,e.abrupt("return",fi(this.app,{heartbeats:[].concat(Be(n),Be(t))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=a(o.mark((function e(t){var n;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return n=e.sent,e.abrupt("return",fi(this.app,{heartbeats:n.filter((function(e){return!t.includes(e)}))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteAll",value:function(){var e=a(o.mark((function e(){return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.abrupt("return",hi(this.app));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function xi(e){return Wn(JSON.stringify({version:2,heartbeats:e})).length}ki="",Kr(new kr("platform-logger",(function(e){return new Dr(e)}),"PRIVATE")),Kr(new kr("heartbeat",(function(e){return new yi(e)}),"PRIVATE")),ri(Lr,Mr,ki),ri(Lr,Mr,"esm2017"),ri("fire-js","");var Ei=function(){function e(t,n){var r=this;qe(this,e),this._delegate=t,this.firebase=n,qr(t,new kr("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return Ke(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),ti(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ur;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ur;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){qr(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){zr(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),_i=(bi={},(0,O.Z)(bi,"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),(0,O.Z)(bi,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),bi),Ii=new or("app-compat","Firebase",_i);var Ti=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Jr(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(cr(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:ri,setLogLevel:ai,onLog:ii,apps:null,SDK_VERSION:$r,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Kr(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Ii.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&Qn(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!cr(n,e=e||Ur))throw Ii.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(Ei);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Qn(n,e)},createSubscribe:vr,ErrorFactory:or,deepExtend:Qn}),n}(),Si=new Pr("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Si.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Ci=self.firebase.SDK_VERSION;Ci&&Ci.indexOf("LITE")>=0&&Si.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Ni=Ti;!function(e){ri("@firebase/app-compat","0.1.19",e)}();Ni.registerVersion("firebase","9.6.8","app-compat");function Pi(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var Ai;Object.create;var Oi="facebook.com",Ri="github.com",Di="google.com",Li="password",Mi="twitter.com",Fi="EMAIL_SIGNIN",Ui="PASSWORD_RESET",ji="RECOVER_EMAIL",Vi="REVERT_SECOND_FACTOR_ADDITION",Bi="VERIFY_AND_CHANGE_EMAIL",qi="VERIFY_EMAIL";function zi(){return(0,O.Z)({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Ki=function(){var e;return e={},(0,O.Z)(e,"admin-restricted-operation","This operation is restricted to administrators only."),(0,O.Z)(e,"argument-error",""),(0,O.Z)(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),(0,O.Z)(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),(0,O.Z)(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),(0,O.Z)(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),(0,O.Z)(e,"cordova-not-ready","Cordova framework is not ready."),(0,O.Z)(e,"cors-unsupported","This browser is not supported."),(0,O.Z)(e,"credential-already-in-use","This credential is already associated with a different user account."),(0,O.Z)(e,"custom-token-mismatch","The custom token corresponds to a different audience."),(0,O.Z)(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),(0,O.Z)(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),(0,O.Z)(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),(0,O.Z)(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),(0,O.Z)(e,"email-already-in-use","The email address is already in use by another account."),(0,O.Z)(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),(0,O.Z)(e,"expired-action-code","The action code has expired."),(0,O.Z)(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),(0,O.Z)(e,"internal-error","An internal AuthError has occurred."),(0,O.Z)(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),(0,O.Z)(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),(0,O.Z)(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),(0,O.Z)(e,"invalid-auth-event","An internal AuthError has occurred."),(0,O.Z)(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),(0,O.Z)(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),(0,O.Z)(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),(0,O.Z)(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),(0,O.Z)(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),(0,O.Z)(e,"invalid-email","The email address is badly formatted."),(0,O.Z)(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),(0,O.Z)(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),(0,O.Z)(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),(0,O.Z)(e,"invalid-credential","The supplied auth credential is malformed or has expired."),(0,O.Z)(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),(0,O.Z)(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),(0,O.Z)(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),(0,O.Z)(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),(0,O.Z)(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),(0,O.Z)(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),(0,O.Z)(e,"wrong-password","The password is invalid or the user does not have a password."),(0,O.Z)(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),(0,O.Z)(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),(0,O.Z)(e,"invalid-provider-id","The specified provider ID is invalid."),(0,O.Z)(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),(0,O.Z)(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),(0,O.Z)(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),(0,O.Z)(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),(0,O.Z)(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),(0,O.Z)(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),(0,O.Z)(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),(0,O.Z)(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),(0,O.Z)(e,"missing-continue-uri","A continue URL must be provided in the request."),(0,O.Z)(e,"missing-iframe-start","An internal AuthError has occurred."),(0,O.Z)(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),(0,O.Z)(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),(0,O.Z)(e,"missing-multi-factor-info","No second factor identifier is provided."),(0,O.Z)(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),(0,O.Z)(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),(0,O.Z)(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),(0,O.Z)(e,"app-deleted","This instance of FirebaseApp has been deleted."),(0,O.Z)(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),(0,O.Z)(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),(0,O.Z)(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),(0,O.Z)(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),(0,O.Z)(e,"no-auth-event","An internal AuthError has occurred."),(0,O.Z)(e,"no-such-provider","User was not linked to an account with the given provider."),(0,O.Z)(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),(0,O.Z)(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),(0,O.Z)(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),(0,O.Z)(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),(0,O.Z)(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),(0,O.Z)(e,"provider-already-linked","User can only be linked to one identity for the given provider."),(0,O.Z)(e,"quota-exceeded","The project's quota for this operation has been exceeded."),(0,O.Z)(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),(0,O.Z)(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),(0,O.Z)(e,"rejected-credential","The request contains malformed or mismatching credentials."),(0,O.Z)(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),(0,O.Z)(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),(0,O.Z)(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),(0,O.Z)(e,"timeout","The operation has timed out."),(0,O.Z)(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),(0,O.Z)(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),(0,O.Z)(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),(0,O.Z)(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),(0,O.Z)(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),(0,O.Z)(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),(0,O.Z)(e,"unverified-email","The operation requires a verified email."),(0,O.Z)(e,"user-cancelled","The user did not grant your application the permissions it requested."),(0,O.Z)(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),(0,O.Z)(e,"user-disabled","The user account has been disabled by an administrator."),(0,O.Z)(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),(0,O.Z)(e,"user-signed-out",""),(0,O.Z)(e,"weak-password","The password must be 6 characters long or more."),(0,O.Z)(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),(0,O.Z)(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},Hi=zi,Wi=new or("auth","Firebase",zi()),Gi=new Pr("@firebase/auth");function Zi(e){if(Gi.logLevel<=Er.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Gi.error.apply(Gi,["Auth (".concat($r,"): ").concat(e)].concat(n))}}function Qi(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Xi.apply(void 0,[e].concat(n))}function Yi(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Xi.apply(void 0,[e].concat(n))}function $i(e,t,n){var r=Object.assign(Object.assign({},Hi()),(0,O.Z)({},t,n));return new or("auth","Firebase",r).create(t,{appName:e.name})}function Ji(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Qi(e,"argument-error"),$i(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Xi(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=Be(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(Be(o)))}return Wi.create.apply(Wi,[e].concat(n))}function ea(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Xi.apply(void 0,[t].concat(r))}}function ta(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Zi(t),new Error(t)}function na(e,t){e||ta(t)}var ra=new Map;function ia(e){na(e instanceof Function,"Expected a class definition");var t=ra.get(e);return t?(na(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ra.set(e,t),t)}function aa(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function oa(){return"http:"===ua()||"https:"===ua()}function ua(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var sa=function(){function e(t,n){qe(this,e),this.shortDelay=t,this.longDelay=n,na(n>t,"Short delay should be less than long delay!"),this.isMobile=Xn()||nr()}return Ke(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(oa()||tr()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function ca(e,t){na(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var la=function(){function e(){qe(this,e)}return Ke(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void ta("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void ta("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void ta("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),fa=(Ai={},(0,O.Z)(Ai,"CREDENTIAL_MISMATCH","custom-token-mismatch"),(0,O.Z)(Ai,"MISSING_CUSTOM_TOKEN","internal-error"),(0,O.Z)(Ai,"INVALID_IDENTIFIER","invalid-email"),(0,O.Z)(Ai,"MISSING_CONTINUE_URI","internal-error"),(0,O.Z)(Ai,"INVALID_PASSWORD","wrong-password"),(0,O.Z)(Ai,"MISSING_PASSWORD","internal-error"),(0,O.Z)(Ai,"EMAIL_EXISTS","email-already-in-use"),(0,O.Z)(Ai,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),(0,O.Z)(Ai,"INVALID_IDP_RESPONSE","invalid-credential"),(0,O.Z)(Ai,"INVALID_PENDING_TOKEN","invalid-credential"),(0,O.Z)(Ai,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),(0,O.Z)(Ai,"MISSING_REQ_TYPE","internal-error"),(0,O.Z)(Ai,"EMAIL_NOT_FOUND","user-not-found"),(0,O.Z)(Ai,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),(0,O.Z)(Ai,"EXPIRED_OOB_CODE","expired-action-code"),(0,O.Z)(Ai,"INVALID_OOB_CODE","invalid-action-code"),(0,O.Z)(Ai,"MISSING_OOB_CODE","internal-error"),(0,O.Z)(Ai,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),(0,O.Z)(Ai,"INVALID_ID_TOKEN","invalid-user-token"),(0,O.Z)(Ai,"TOKEN_EXPIRED","user-token-expired"),(0,O.Z)(Ai,"USER_NOT_FOUND","user-token-expired"),(0,O.Z)(Ai,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),(0,O.Z)(Ai,"INVALID_CODE","invalid-verification-code"),(0,O.Z)(Ai,"INVALID_SESSION_INFO","invalid-verification-id"),(0,O.Z)(Ai,"INVALID_TEMPORARY_PROOF","invalid-credential"),(0,O.Z)(Ai,"MISSING_SESSION_INFO","missing-verification-id"),(0,O.Z)(Ai,"SESSION_EXPIRED","code-expired"),(0,O.Z)(Ai,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),(0,O.Z)(Ai,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),(0,O.Z)(Ai,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),(0,O.Z)(Ai,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),(0,O.Z)(Ai,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),(0,O.Z)(Ai,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),(0,O.Z)(Ai,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),(0,O.Z)(Ai,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),(0,O.Z)(Ai,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),(0,O.Z)(Ai,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),(0,O.Z)(Ai,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Ai),da=new sa(3e4,6e4);function ha(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function pa(e,t,n,r){return va.apply(this,arguments)}function va(){return va=a(u().mark((function e(t,n,r,i){var o,s=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=s.length>4&&void 0!==s[4]?s[4]:{},e.abrupt("return",ya(t,o,a(u().mark((function e(){var a,o,s,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),s=dr(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(c=e.sent)["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",la.fetch()(ba(t,t.config.apiHost,r,s),Object.assign({method:n,headers:c,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),va.apply(this,arguments)}function ya(e,t,n){return ma.apply(this,arguments)}function ma(){return ma=a(u().mark((function e(t,n,r){var i,a,o,s,c,l,f,d,h,p;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},fa),n),e.prev=2,a=new wa(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw xa(t,"account-exists-with-different-credential",s);case 13:if(!o.ok||"errorMessage"in s){e.next=17;break}return e.abrupt("return",s);case 17:if(c=o.ok?s.errorMessage:s.error.message,l=c.split(" : "),f=Me(l,2),d=f[0],h=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==d){e.next=23;break}throw xa(t,"credential-already-in-use",s);case 23:if("EMAIL_EXISTS"!==d){e.next=25;break}throw xa(t,"email-already-in-use",s);case 25:if(p=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-"),!h){e.next=30;break}throw $i(t,p,h);case 30:Qi(t,p);case 31:e.next=38;break;case 33:if(e.prev=33,e.t0=e.catch(2),!(e.t0 instanceof ar)){e.next=37;break}throw e.t0;case 37:Qi(t,"network-request-failed");case 38:case"end":return e.stop()}}),e,null,[[2,33]])}))),ma.apply(this,arguments)}function ga(e,t,n,r){return ka.apply(this,arguments)}function ka(){return ka=a(u().mark((function e(t,n,r,i){var a,o,s=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,pa(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Qi(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),ka.apply(this,arguments)}function ba(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?ca(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var wa=function(){function e(t){var n=this;qe(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Yi(n.auth,"network-request-failed"))}),da.get())}))}return Ke(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function xa(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Yi(e,t,r);return i.customData._tokenResponse=n,i}function Ea(e,t){return _a.apply(this,arguments)}function _a(){return _a=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pa(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),_a.apply(this,arguments)}function Ia(e,t){return Ta.apply(this,arguments)}function Ta(){return Ta=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pa(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Ta.apply(this,arguments)}function Sa(e,t){return Ca.apply(this,arguments)}function Ca(){return Ca=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pa(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),Ca.apply(this,arguments)}function Na(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(AN){}}function Pa(){return Pa=a(u().mark((function e(t){var n,r,i,a,o,s,c=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]&&c[1],r=gr(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,ea((a=Oa(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Na(Aa(a.auth_time)),issuedAtTime:Na(Aa(a.iat)),expirationTime:Na(Aa(a.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Pa.apply(this,arguments)}function Aa(e){return 1e3*Number(e)}function Oa(e){var t=Me(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return Zi("JWT malformed, contained fewer than 3 sections"),null;try{var a=Zn(r);return a?JSON.parse(a):(Zi("Failed to decode base64 JWT payload"),null)}catch(AN){return Zi("Caught error parsing JWT payload as JSON",AN),null}}function Ra(e,t){return Da.apply(this,arguments)}function Da(){return Da=a(u().mark((function e(t,n){var r=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof ar&&La(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Da.apply(this,arguments)}function La(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Ma=function(){function e(t){qe(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return Ke(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(a(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=a(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Fa=function(){function e(t,n){qe(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return Ke(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Na(this.lastLoginAt),this.creationTime=Na(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Ua(e){return ja.apply(this,arguments)}function ja(){return ja=a(u().mark((function e(t){var n,r,i,a,o,s,c,l,f,d,h;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Ra(t,Sa(r,{idToken:i}));case 6:ea(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),s=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?qa(o.providerUserInfo):[],c=Ba(t.providerData,s),l=t.isAnonymous,f=!(t.email&&o.passwordHash)&&!(null===c||void 0===c?void 0:c.length),d=!!l&&f,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Fa(o.createdAt,o.lastLoginAt),isAnonymous:d},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),ja.apply(this,arguments)}function Va(){return(Va=a(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=gr(t),e.next=3,Ua(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ba(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(Be(n),Be(t))}function qa(e){return e.map((function(e){var t=e.providerId,n=Pi(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function za(e,t){return Ka.apply(this,arguments)}function Ka(){return Ka=a(u().mark((function e(t,n){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ya(t,{},a(u().mark((function e(){var r,i,a,o,s,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=dr({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,s=ba(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(c=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",la.fetch()(s,{method:"POST",headers:c,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),Ka.apply(this,arguments)}var Ha=function(){function e(){qe(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return Ke(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){ea(e.idToken,"internal-error"),ea("undefined"!==typeof e.idToken,"internal-error"),ea("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=Oa(e);return ea(t,"internal-error"),ea("undefined"!==typeof t.exp,"internal-error"),ea("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=a(u().mark((function e(t){var n,r=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],ea(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=a(u().mark((function e(t,n){var r,i,a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,za(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return ta("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(ea("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(ea("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(ea("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Wa(e,t){ea("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Ga=function(){function e(t){qe(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Pi(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ma(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?Be(a.providerData):[],this.metadata=new Fa(a.createdAt||void 0,a.lastLoginAt||void 0)}return Ke(e,[{key:"getIdToken",value:function(){var e=a(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ra(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(ea(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Pa.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Va.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(ea(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){ea(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=a(u().mark((function e(t){var n,r,i=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Ua(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=a(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Ra(this,Ea(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,d=null!==(i=n.email)&&void 0!==i?i:void 0,h=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,x=n.providerData,E=n.stsTokenManager;ea(k&&E,t,"internal-error");var _=Ha.fromJSON(this.name,E);ea("string"===typeof k,t,"internal-error"),Wa(f,t.name),Wa(d,t.name),ea("boolean"===typeof b,t,"internal-error"),ea("boolean"===typeof w,t,"internal-error"),Wa(h,t.name),Wa(p,t.name),Wa(v,t.name),Wa(y,t.name),Wa(m,t.name),Wa(g,t.name);var I=new e({uid:k,auth:t,email:d,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:h,tenantId:v,stsTokenManager:_,createdAt:m,lastLoginAt:g});return x&&Array.isArray(x)&&(I.providerData=x.map((function(e){return Object.assign({},e)}))),y&&(I._redirectEventId=y),I}},{key:"_fromIdTokenResponse",value:function(){var t=a(u().mark((function t(n,r){var i,a,o,s=arguments;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],(a=new Ha).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Ua(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Za=function(){function e(){qe(this,e),this.type="NONE",this.storage={}}return Ke(e,[{key:"_isAvailable",value:function(){var e=a(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=a(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Za.type="NONE";var Qa=Za;function Ya(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var $a=function(){function e(t,n,r){qe(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Ya(this.userKey,a.apiKey,o),this.fullPersistenceKey=Ya("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return Ke(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=a(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Ga._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=a(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=a(u().mark((function t(n,r){var i,o,s,c,l,f,d,h,p,v,y,m=arguments;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=m.length>2&&void 0!==m[2]?m[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(ia(Qa),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:o=t.sent.filter((function(e){return e})),s=o[0]||ia(Qa),c=Ya(i,n.config.apiKey,n.name),l=null,f=Bn(r),t.prev=10,f.s();case 12:if((d=f.n()).done){t.next=29;break}return h=d.value,t.prev=14,t.next=17,h._get(c);case 17:if(!(p=t.sent)){t.next=23;break}return v=Ga._fromJSON(n,p),h!==s&&(l=v),s=h,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),f.e(t.t1);case 34:return t.prev=34,f.f(),t.finish(34);case 37:if(y=o.filter((function(e){return e._shouldAllowMigration})),s._shouldAllowMigration&&y.length){t.next=40;break}return t.abrupt("return",new e(s,n,i));case 40:if(s=y[0],!l){t.next=44;break}return t.next=44,s._set(c,l.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===s){e.next=8;break}return e.prev=1,e.next=4,t._remove(c);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(s,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Ja(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(no(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Xa(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(io(t))return"Blackberry";if(ao(t))return"Webos";if(eo(t))return"Safari";if((t.includes("chrome/")||to(t))&&!t.includes("edge/"))return"Chrome";if(ro(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Xa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jn();return/firefox\//i.test(e)}function eo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jn(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function to(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jn();return/crios\//i.test(e)}function no(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jn();return/iemobile/i.test(e)}function ro(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jn();return/android/i.test(e)}function io(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jn();return/blackberry/i.test(e)}function ao(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jn();return/webos/i.test(e)}function oo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jn();return/iphone|ipad|ipod/i.test(e)}function uo(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jn();return oo(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function so(){return rr()&&10===document.documentMode}function co(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jn();return oo(e)||ro(e)||ao(e)||io(e)||/windows phone/i.test(e)||no(e)}function lo(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Ja(Jn());break;case"Worker":t="".concat(Ja(Jn()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat($r,"/").concat(r)}var fo=function(){function e(t,n){qe(this,e),this.app=t,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new po(this),this.idTokenSubscription=new po(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Wi,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=n.sdkClientVersion}return Ke(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=ia(t)),this._initializationPromise=this.queue(a(u().mark((function r(){var i,a;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,$a.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=a(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=a(u().mark((function e(t){var n,r,i,a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,!t||!this.config.authDomain){e.next=12;break}return e.next=6,this.getOrInitRedirectPersistenceManager();case 6:return i=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,a=null===r||void 0===r?void 0:r._redirectEventId,e.next=10,this.tryRedirectSignIn(t);case 10:o=e.sent,i&&i!==a||!(null===o||void 0===o?void 0:o.user)||(r=o.user);case 12:if(r){e.next=14;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 14:if(r._redirectEventId){e.next=16;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 16:return ea(this._popupRedirectResolver,this,"argument-error"),e.next=19,this.getOrInitRedirectPersistenceManager();case 19:if(!this.redirectUser||this.redirectUser._redirectEventId!==r._redirectEventId){e.next=21;break}return e.abrupt("return",this.directlySetCurrentUser(r));case 21:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=a(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ua(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=a(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=a(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?gr(t):null)&&ea(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=a(u().mark((function e(t){var n=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return t&&ea(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e.abrupt("return",this.queue(a(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.directlySetCurrentUser(t);case 2:n.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=a(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=3;break}return e.next=3,this._setRedirectUser(null);case 3:return e.abrupt("return",this._updateCurrentUser(null));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(a(u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(ia(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new or("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=a(u().mark((function e(t,n){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=a(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return ea(n=t&&ia(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,$a.create(this,[ia(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=a(u().mark((function e(t){var n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(a(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=a(u().mark((function e(t){var n=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(a(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return ea(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return ea(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=lo(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=a(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,O.Z)({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId),e.abrupt("return",t);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function ho(e){return gr(e)}var po=function(){function e(t){var n=this;qe(this,e),this.auth=t,this.observer=null,this.addObserver=vr((function(e){return n.observer=e}))}return Ke(e,[{key:"next",get:function(){return ea(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function vo(e,t,n){var r=ho(e);ea(r._canInitEmulator,r,"emulator-config-failed"),ea(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=yo(t),o=function(e){var t=yo(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:mo(r.substr(a.length+1))}}var o=Me(r.split(":"),2);return{host:o[0],port:mo(o[1])}}(t),u=o.host,s=o.port,c=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function yo(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function mo(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var go=function(){function e(t,n){qe(this,e),this.providerId=t,this.signInMethod=n}return Ke(e,[{key:"toJSON",value:function(){return ta("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return ta("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return ta("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return ta("not implemented")}}]),e}();function ko(e,t){return bo.apply(this,arguments)}function bo(){return bo=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pa(t,"POST","/v1/accounts:resetPassword",ha(t,n)));case 1:case"end":return e.stop()}}),e)}))),bo.apply(this,arguments)}function wo(e,t){return xo.apply(this,arguments)}function xo(){return xo=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pa(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),xo.apply(this,arguments)}function Eo(e,t){return _o.apply(this,arguments)}function _o(){return _o=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pa(t,"POST","/v1/accounts:update",ha(t,n)));case 1:case"end":return e.stop()}}),e)}))),_o.apply(this,arguments)}function Io(e,t){return To.apply(this,arguments)}function To(){return To=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ga(t,"POST","/v1/accounts:signInWithPassword",ha(t,n)));case 1:case"end":return e.stop()}}),e)}))),To.apply(this,arguments)}function So(e,t){return Co.apply(this,arguments)}function Co(){return Co=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pa(t,"POST","/v1/accounts:sendOobCode",ha(t,n)));case 1:case"end":return e.stop()}}),e)}))),Co.apply(this,arguments)}function No(e,t){return Po.apply(this,arguments)}function Po(){return Po=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",So(t,n));case 1:case"end":return e.stop()}}),e)}))),Po.apply(this,arguments)}function Ao(e,t){return Oo.apply(this,arguments)}function Oo(){return Oo=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",So(t,n));case 1:case"end":return e.stop()}}),e)}))),Oo.apply(this,arguments)}function Ro(e,t){return Do.apply(this,arguments)}function Do(){return Do=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",So(t,n));case 1:case"end":return e.stop()}}),e)}))),Do.apply(this,arguments)}function Lo(e,t){return Mo.apply(this,arguments)}function Mo(){return Mo=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",So(t,n));case 1:case"end":return e.stop()}}),e)}))),Mo.apply(this,arguments)}function Fo(e,t){return Uo.apply(this,arguments)}function Uo(){return Uo=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ga(t,"POST","/v1/accounts:signInWithEmailLink",ha(t,n)));case 1:case"end":return e.stop()}}),e)}))),Uo.apply(this,arguments)}function jo(e,t){return Vo.apply(this,arguments)}function Vo(){return Vo=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ga(t,"POST","/v1/accounts:signInWithEmailLink",ha(t,n)));case 1:case"end":return e.stop()}}),e)}))),Vo.apply(this,arguments)}var Bo=function(e){Ot(n,e);var t=Ft(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return qe(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return Ke(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Io(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Fo(t,{email:this._email,oobCode:this._password}));case 5:Qi(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",wo(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",jo(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Qi(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(go);function qo(e,t){return zo.apply(this,arguments)}function zo(){return zo=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ga(t,"POST","/v1/accounts:signInWithIdp",ha(t,n)));case 1:case"end":return e.stop()}}),e)}))),zo.apply(this,arguments)}var Ko=function(e){Ot(n,e);var t=Ft(n);function n(){var e;return qe(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return Ke(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return qo(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,qo(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,qo(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=dr(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Qi("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Pi(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(go);function Ho(e,t){return Wo.apply(this,arguments)}function Wo(){return Wo=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pa(t,"POST","/v1/accounts:sendVerificationCode",ha(t,n)));case 1:case"end":return e.stop()}}),e)}))),Wo.apply(this,arguments)}function Go(){return Go=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ga(t,"POST","/v1/accounts:signInWithPhoneNumber",ha(t,n)));case 1:case"end":return e.stop()}}),e)}))),Go.apply(this,arguments)}function Zo(){return Zo=a(u().mark((function e(t,n){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ga(t,"POST","/v1/accounts:signInWithPhoneNumber",ha(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw xa(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),Zo.apply(this,arguments)}var Qo=(0,O.Z)({},"USER_NOT_FOUND","user-not-found");function Yo(){return Yo=a(u().mark((function e(t,n){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",ga(t,"POST","/v1/accounts:signInWithPhoneNumber",ha(t,r),Qo));case 2:case"end":return e.stop()}}),e)}))),Yo.apply(this,arguments)}var $o=function(e){Ot(n,e);var t=Ft(n);function n(e){var r;return qe(this,n),(r=t.call(this,"phone","phone")).params=e,r}return Ke(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Go.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Zo.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Yo.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(go);var Jo=function(){function e(t){var n,r,i,a,o,u;qe(this,e);var s=hr(pr(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);ea(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return Ke(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=hr(pr(e)).link,n=t?hr(pr(t)).deep_link_id:null,r=hr(pr(e)).deep_link_id;return(r?hr(pr(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(sT){return null}}}]),e}();var Xo=function(){function e(){qe(this,e),this.providerId=e.PROVIDER_ID}return Ke(e,null,[{key:"credential",value:function(e,t){return Bo._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Jo.parseLink(t);return ea(n,"argument-error"),Bo._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Xo.PROVIDER_ID="password",Xo.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Xo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var eu=function(){function e(t){qe(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return Ke(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),tu=function(e){Ot(n,e);var t=Ft(n);function n(){var e;return qe(this,n),(e=t.apply(this,arguments)).scopes=[],e}return Ke(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return Be(this.scopes)}}]),n}(eu),nu=function(e){Ot(n,e);var t=Ft(n);function n(){return qe(this,n),t.apply(this,arguments)}return Ke(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return ea(e.idToken||e.accessToken,"argument-error"),Ko._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return ea("providerId"in t&&"signInMethod"in t,"argument-error"),Ko._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(AN){return null}}}]),n}(tu),ru=function(e){Ot(n,e);var t=Ft(n);function n(){return qe(this,n),t.call(this,"facebook.com")}return Ke(n,null,[{key:"credential",value:function(e){return Ko._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(sT){return null}}}]),n}(tu);ru.FACEBOOK_SIGN_IN_METHOD="facebook.com",ru.PROVIDER_ID="facebook.com";var iu=function(e){Ot(n,e);var t=Ft(n);function n(){var e;return qe(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return Ke(n,null,[{key:"credential",value:function(e,t){return Ko._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(sT){return null}}}]),n}(tu);iu.GOOGLE_SIGN_IN_METHOD="google.com",iu.PROVIDER_ID="google.com";var au=function(e){Ot(n,e);var t=Ft(n);function n(){return qe(this,n),t.call(this,"github.com")}return Ke(n,null,[{key:"credential",value:function(e){return Ko._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(sT){return null}}}]),n}(tu);au.GITHUB_SIGN_IN_METHOD="github.com",au.PROVIDER_ID="github.com";var ou=function(e){Ot(n,e);var t=Ft(n);function n(e,r){var i;return qe(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return Ke(n,[{key:"_getIdTokenResponse",value:function(e){return qo(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,qo(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,qo(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(go),uu=function(e){Ot(n,e);var t=Ft(n);function n(e){return qe(this,n),ea(e.startsWith("saml."),"argument-error"),t.call(this,e)}return Ke(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=ou.fromJSON(e);return ea(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return ou._create(r,n)}catch(AN){return null}}}]),n}(eu),su=function(e){Ot(n,e);var t=Ft(n);function n(){return qe(this,n),t.call(this,"twitter.com")}return Ke(n,null,[{key:"credential",value:function(e,t){return Ko._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(sT){return null}}}]),n}(tu);function cu(e,t){return lu.apply(this,arguments)}function lu(){return lu=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ga(t,"POST","/v1/accounts:signUp",ha(t,n)));case 1:case"end":return e.stop()}}),e)}))),lu.apply(this,arguments)}su.TWITTER_SIGN_IN_METHOD="twitter.com",su.PROVIDER_ID="twitter.com";var fu=function(){function e(t){qe(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return Ke(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=a(u().mark((function t(n,r,i){var a,o,s,c,l=arguments;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=l.length>3&&void 0!==l[3]&&l[3],t.next=3,Ga._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,s=du(i),c=new e({user:o,providerId:s,_tokenResponse:i,operationType:r}),t.abrupt("return",c);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=a(u().mark((function t(n,r,i){var a;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=du(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function du(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function hu(){return hu=a(u().mark((function e(t){var n,r,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ho(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new fu({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,cu(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,fu._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),hu.apply(this,arguments)}var pu=function(e){Ot(n,e);var t=Ft(n);function n(e,r,i,a){var o,u;return qe(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(Lt(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return Ke(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(ar);function vu(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw pu._fromErrorAndOperation(e,n,t,r);throw n}))}function yu(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function mu(e,t){return gu.apply(this,arguments)}function gu(){return gu=a(u().mark((function e(t,n){var r,i,a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gr(t),e.next=3,wu(!0,r,n);case 3:return e.t0=Ia,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=yu(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),gu.apply(this,arguments)}function ku(e,t){return bu.apply(this,arguments)}function bu(){return bu=a(u().mark((function e(t,n){var r,i,a=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Ra,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",fu._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),bu.apply(this,arguments)}function wu(e,t,n){return xu.apply(this,arguments)}function xu(){return(xu=a(u().mark((function e(t,n,r){var i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ua(n);case 2:i=yu(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",ea(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Eu(e,t){return _u.apply(this,arguments)}function _u(){return _u=a(u().mark((function e(t,n){var r,i,a,o,s,c,l=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]&&l[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,Ra(t,vu(i,a,n,t),r);case 6:return ea((o=e.sent).idToken,i,"internal-error"),ea(s=Oa(o.idToken),i,"internal-error"),c=s.sub,ea(t.uid===c,i,"user-mismatch"),e.abrupt("return",fu._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&Qi(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),_u.apply(this,arguments)}function Iu(e,t){return Tu.apply(this,arguments)}function Tu(){return Tu=a(u().mark((function e(t,n){var r,i,a,o,s=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i="signIn",e.next=4,vu(t,i,n);case 4:return a=e.sent,e.next=7,fu._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),Tu.apply(this,arguments)}function Su(e,t){return Cu.apply(this,arguments)}function Cu(){return Cu=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Iu(ho(t),n));case 1:case"end":return e.stop()}}),e)}))),Cu.apply(this,arguments)}function Nu(e,t){return Pu.apply(this,arguments)}function Pu(){return(Pu=a(u().mark((function e(t,n){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gr(t),e.next=3,wu(!1,r,n.providerId);case 3:return e.abrupt("return",ku(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Au(e,t){return Ou.apply(this,arguments)}function Ou(){return(Ou=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Eu(gr(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ru(e,t){return Du.apply(this,arguments)}function Du(){return Du=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ga(t,"POST","/v1/accounts:signInWithCustomToken",ha(t,n)));case 1:case"end":return e.stop()}}),e)}))),Du.apply(this,arguments)}function Lu(){return Lu=a(u().mark((function e(t,n){var r,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ho(t),e.next=3,Ru(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,fu._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),Lu.apply(this,arguments)}var Mu=function(){function e(t,n){qe(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return Ke(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?Fu._fromServerResponse(e,t):Qi(e,"internal-error")}}]),e}(),Fu=function(e){Ot(n,e);var t=Ft(n);function n(e){var r;return qe(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return Ke(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(Mu);function Uu(e,t,n){var r;ea((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),ea("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(ea(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(ea(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function ju(){return ju=a(u().mark((function e(t,n,r){var i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=gr(t),a={requestType:"PASSWORD_RESET",email:n},r&&Uu(i,a,r),e.next=5,Ao(i,a);case 5:case"end":return e.stop()}}),e)}))),ju.apply(this,arguments)}function Vu(){return Vu=a(u().mark((function e(t,n,r){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ko(gr(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),Vu.apply(this,arguments)}function Bu(){return Bu=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Eo(gr(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),Bu.apply(this,arguments)}function qu(e,t){return zu.apply(this,arguments)}function zu(){return zu=a(u().mark((function e(t,n){var r,i,a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gr(t),e.next=3,ko(r,{oobCode:n});case 3:i=e.sent,ea(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return ea(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:ea(i.mfaInfo,r,"internal-error");case 13:ea(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=Mu._fromServerResponse(ho(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)}))),zu.apply(this,arguments)}function Ku(){return Ku=a(u().mark((function e(t,n){var r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qu(gr(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),Ku.apply(this,arguments)}function Hu(e,t,n){return Wu.apply(this,arguments)}function Wu(){return Wu=a(u().mark((function e(t,n,r){var i,a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ho(t),e.next=3,cu(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,fu._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),Wu.apply(this,arguments)}function Gu(){return Gu=a(u().mark((function e(t,n,r){var i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=gr(t),a={requestType:"EMAIL_SIGNIN",email:n},ea(r.handleCodeInApp,i,"argument-error"),r&&Uu(i,a,r),e.next=6,Ro(i,a);case 6:case"end":return e.stop()}}),e)}))),Gu.apply(this,arguments)}function Zu(){return Zu=a(u().mark((function e(t,n,r){var i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=gr(t),ea((a=Xo.credentialWithLink(n,r||aa()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",Su(i,a));case 4:case"end":return e.stop()}}),e)}))),Zu.apply(this,arguments)}function Qu(e,t){return Yu.apply(this,arguments)}function Yu(){return Yu=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pa(t,"POST","/v1/accounts:createAuthUri",ha(t,n)));case 1:case"end":return e.stop()}}),e)}))),Yu.apply(this,arguments)}function $u(){return $u=a(u().mark((function e(t,n){var r,i,a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=oa()?aa():"http://localhost",i={identifier:n,continueUri:r},e.next=4,Qu(gr(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),$u.apply(this,arguments)}function Ju(){return(Ju=a(u().mark((function e(t,n){var r,i,a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gr(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&Uu(r.auth,a,n),e.next=8,No(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xu(){return(Xu=a(u().mark((function e(t,n,r){var i,a,o,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=gr(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&Uu(i.auth,o,r),e.next=8,Lo(i.auth,o);case 8:if(s=e.sent,s.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function es(e,t){return ts.apply(this,arguments)}function ts(){return ts=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pa(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),ts.apply(this,arguments)}function ns(){return(ns=a(u().mark((function e(t,n){var r,i,a,o,s,c,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=gr(t),e.next=6,a.getIdToken();case 6:return o=e.sent,s={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Ra(a,es(a.auth,s));case 10:return c=e.sent,a.displayName=c.displayName||null,a.photoURL=c.photoUrl||null,(l=a.providerData.find((function(e){return"password"===e.providerId})))&&(l.displayName=a.displayName,l.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(c);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rs(e,t,n){return is.apply(this,arguments)}function is(){return is=a(u().mark((function e(t,n,r){var i,a,o,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,Ra(t,wo(i,o));case 9:return s=e.sent,e.next=12,t._updateTokensIfNecessary(s,!0);case 12:case"end":return e.stop()}}),e)}))),is.apply(this,arguments)}var as=Ke((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};qe(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),os=function(e){Ot(n,e);var t=Ft(n);function n(e,r,i,a){var o;return qe(this,n),(o=t.call(this,e,r,i)).username=a,o}return Ke(n)}(as),us=function(e){Ot(n,e);var t=Ft(n);function n(e,r){return qe(this,n),t.call(this,e,"facebook.com",r)}return Ke(n)}(as),ss=function(e){Ot(n,e);var t=Ft(n);function n(e,r){return qe(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return Ke(n)}(os),cs=function(e){Ot(n,e);var t=Ft(n);function n(e,r){return qe(this,n),t.call(this,e,"google.com",r)}return Ke(n)}(as),ls=function(e){Ot(n,e);var t=Ft(n);function n(e,r,i){return qe(this,n),t.call(this,e,"twitter.com",r,i)}return Ke(n)}(os);function fs(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=Oa(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new as(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new us(a,i);case"github.com":return new ss(a,i);case"google.com":return new cs(a,i);case"twitter.com":return new ls(a,i,e.screenName||null);case"custom":case"anonymous":return new as(a,null);default:return new as(a,r,i)}}(n)}var ds=function(){function e(t,n){qe(this,e),this.type=t,this.credential=n}return Ke(e,[{key:"toJSON",value:function(){var e="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:(0,O.Z)({},e,this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),hs=function(){function e(t,n,r){qe(this,e),this.session=t,this.hints=n,this.signInResolver=r}return Ke(e,[{key:"resolveSignIn",value:function(){var e=a(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=ho(t),i=n.customData._serverResponse,o=(i.mfaInfo||[]).map((function(e){return Mu._fromServerResponse(r,e)}));ea(i.mfaPendingCredential,r,"internal-error");var s=ds._fromMfaPendingCredential(i.mfaPendingCredential);return new e(s,o,function(){var e=a(u().mark((function e(t){var a,o,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,s);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,o=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,fu._fromIdTokenResponse(r,n.operationType,o);case 11:return c=e.sent,e.next=14,r._updateCurrentUser(c.user);case 14:return e.abrupt("return",c);case 15:return ea(n.user,r,"internal-error"),e.abrupt("return",fu._forOperation(n.user,n.operationType,o));case 17:Qi(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function ps(e,t){return pa(e,"POST","/v2/accounts/mfaEnrollment:start",ha(e,t))}function vs(e,t){return pa(e,"POST","/v2/accounts/mfaEnrollment:withdraw",ha(e,t))}var ys=function(){function e(t){var n=this;qe(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return Mu._fromServerResponse(t.auth,e)})))}))}return Ke(e,[{key:"getSession",value:function(){var e=a(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=ds,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=a(u().mark((function e(t,n){var r,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Ra(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=a(u().mark((function e(t){var n,r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.next=6,Ra(this.user,vs(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 6:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=10,this.user._updateTokensIfNecessary(i);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),e.t0.code==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),ms=new WeakMap;var gs="__sak",ks=function(){function e(t,n){qe(this,e),this.storageRetriever=t,this.type=n}return Ke(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(gs,"1"),this.storage.removeItem(gs),Promise.resolve(!0)):Promise.resolve(!1)}catch(sT){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var bs=function(e){Ot(n,e);var t=Ft(n);function n(){var e;return qe(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Jn();return eo(e)||oo(e)}()&&function(){try{return!(!window||window===window.top)}catch(AN){return!1}}(),e.fallbackToPolling=co(),e._shouldAllowMigration=!0,e}return Ke(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);so()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=a(u().mark((function e(t,r){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,At(Nt(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=a(u().mark((function e(t){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,At(Nt(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,At(Nt(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(ks);bs.type="LOCAL";var ws=bs,xs=function(e){Ot(n,e);var t=Ft(n);function n(){return qe(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return Ke(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(ks);xs.type="SESSION";var Es=xs;function _s(e){return Promise.all(e.map(function(){var e=a(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Is=function(){function e(t){qe(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return Ke(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=a(u().mark((function e(t){var n,r,i,o,s,c,l,f;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,o=r.eventType,s=r.data,null===(c=this.handlersMap[o])||void 0===c?void 0:c.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:o}),l=Array.from(c).map(function(){var e=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,s));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,_s(l);case 9:f=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:f});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Ts(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Is.receivers=[];var Ss=function(){function e(t){qe(this,e),this.target=t,this.handlers=new Set}return Ke(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=a(u().mark((function e(t,n){var r,i,a,o,s=this,c=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>2&&void 0!==c[2]?c[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,u){var c=Ts("",20);i.port1.start();var l=setTimeout((function(){u(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){u(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),u(new Error("invalid_response"))}}},s.handlers.add(o),i.port1.addEventListener("message",o.onMessage),s.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&s.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Cs(){return window}function Ns(){return"undefined"!==typeof Cs().WorkerGlobalScope&&"function"===typeof Cs().importScripts}function Ps(){return As.apply(this,arguments)}function As(){return(As=a(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Os(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Rs="firebaseLocalStorageDb",Ds="firebaseLocalStorage",Ls="fbase_key",Ms=function(){function e(t){qe(this,e),this.request=t}return Ke(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Fs(e,t){return e.transaction([Ds],t?"readwrite":"readonly").objectStore(Ds)}function Us(){var e=indexedDB.deleteDatabase(Rs);return new Ms(e).toPromise()}function js(){var e=indexedDB.open(Rs,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Ds,{keyPath:Ls})}catch(AN){n(AN)}})),e.addEventListener("success",a(u().mark((function n(){var r;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Ds)){n.next=12;break}return r.close(),n.next=5,Us();case 5:return n.t0=t,n.next=8,js();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Vs(e,t,n){return Bs.apply(this,arguments)}function Bs(){return Bs=a(u().mark((function e(t,n,r){var i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Fs(t,!0).put((i={},(0,O.Z)(i,Ls,n),(0,O.Z)(i,"value",r),i)),e.abrupt("return",new Ms(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),Bs.apply(this,arguments)}function qs(e,t){return zs.apply(this,arguments)}function zs(){return zs=a(u().mark((function e(t,n){var r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Fs(t,!1).get(n),e.next=3,new Ms(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),zs.apply(this,arguments)}function Ks(e,t){var n=Fs(e,!0).delete(t);return new Ms(n).toPromise()}var Hs=function(){function e(){qe(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return Ke(e,[{key:"_openDb",value:function(){var e=a(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,js();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=a(u().mark((function e(t){var n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=a(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ns()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=a(u().mark((function e(){var t=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Is._getInstance(Ns()?self:null),this.receiver._subscribe("keyChanged",function(){var e=a(u().mark((function e(n,r){var i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=a(u().mark((function e(){var t,n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ps();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Ss(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Os()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=a(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,js();case 5:return t=e.sent,e.next=8,Vs(t,gs,"1");case 8:return e.next=10,Ks(t,gs);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=a(u().mark((function e(t,n){var r=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(a(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Vs(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=a(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return qs(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=a(u().mark((function e(t){var n=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(a(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Ks(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=a(u().mark((function e(){var t,n,r,i,a,o,s,c,l,f,d;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Fs(e,!1).getAll();return new Ms(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=Bn(t);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.fbase_key,c=o.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(c)&&(this.notifyListeners(s,c),n.push(s))}catch(u){i.e(u)}finally{i.f()}for(l=0,f=Object.keys(this.localCache);l<f.length;l++)d=f[l],this.localCache[d]&&!r.has(d)&&(this.notifyListeners(d,null),n.push(d));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(a(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Hs.type="LOCAL";var Ws=Hs;function Gs(e,t){return pa(e,"POST","/v2/accounts/mfaSignIn:start",ha(e,t))}function Zs(e){return Qs.apply(this,arguments)}function Qs(){return Qs=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pa(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),Qs.apply(this,arguments)}function Ys(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Yi("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function $s(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Js=1e12,Xs=function(){function e(t){qe(this,e),this.auth=t,this.counter=Js,this._widgets=new Map}return Ke(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new ec(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||Js;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||Js;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=a(u().mark((function e(t){var n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||Js,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),ec=function(){function e(t,n,r){var i=this;qe(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;ea(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return Ke(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(AN){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(AN){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var tc=$s("rcb"),nc=new sa(3e4,6e4),rc="https://www.google.com/recaptcha/api.js?",ic=function(){function e(){qe(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Cs().grecaptcha}return Ke(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return ea(ac(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Cs().grecaptcha):new Promise((function(r,i){var a=Cs().setTimeout((function(){i(Yi(e,"network-request-failed"))}),nc.get());Cs()[tc]=function(){Cs().clearTimeout(a),delete Cs()[tc];var o=Cs().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(Yi(e,"internal-error"))},Ys("".concat(rc,"?").concat(dr({onload:tc,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(Yi(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!Cs().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function ac(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var oc=function(){function e(){qe(this,e)}return Ke(e,[{key:"load",value:function(){var e=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Xs(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),uc="recaptcha",sc={theme:"light",type:"image"},cc=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},sc),r=arguments.length>2?arguments[2]:void 0;qe(this,e),this.parameters=n,this.type=uc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ho(r),this.isInvisible="invisible"===this.parameters.size,ea("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;ea(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new oc:new ic,this.validateStartingState()}return Ke(e,[{key:"verify",value:function(){var e=a(u().mark((function e(){var t,n,r,i=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(AN){return Promise.reject(AN)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){ea(!this.parameters.sitekey,this.auth,"argument-error"),ea(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ea("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=Cs()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){ea(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=a(u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=a(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ea(oa()&&!Ns(),this.auth,"internal-error"),e.next=3,lc();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,Zs(this.auth);case 8:ea(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return ea(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function lc(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var fc=function(){function e(t,n){qe(this,e),this.verificationId=t,this.onConfirmation=n}return Ke(e,[{key:"confirm",value:function(e){var t=$o._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function dc(){return dc=a(u().mark((function e(t,n,r){var i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ho(t),e.next=3,yc(i,n,gr(r));case 3:return a=e.sent,e.abrupt("return",new fc(a,(function(e){return Su(i,e)})));case 5:case"end":return e.stop()}}),e)}))),dc.apply(this,arguments)}function hc(e,t,n){return pc.apply(this,arguments)}function pc(){return(pc=a(u().mark((function e(t,n,r){var i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=gr(t),e.next=3,wu(!1,i,"phone");case 3:return e.next=5,yc(i.auth,n,gr(r));case 5:return a=e.sent,e.abrupt("return",new fc(a,(function(e){return Nu(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vc(){return(vc=a(u().mark((function e(t,n,r){var i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=gr(t),e.next=3,yc(i.auth,n,gr(r));case 3:return a=e.sent,e.abrupt("return",new fc(a,(function(e){return Au(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yc(e,t,n){return mc.apply(this,arguments)}function mc(){return mc=a(u().mark((function e(t,n,r){var i,a,o,s,c,l,f,d,h;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,ea("string"===typeof a,t,"argument-error"),ea(r.type===uc,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(s=o.session,!("phoneNumber"in o)){e.next=17;break}return ea("enroll"===s.type,t,"internal-error"),e.next=13,ps(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return c=e.sent,e.abrupt("return",c.phoneSessionInfo.sessionInfo);case 17:return ea("signin"===s.type,t,"internal-error"),ea(l=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Gs(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:l,phoneSignInInfo:{recaptchaToken:a}});case 22:return f=e.sent,e.abrupt("return",f.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Ho(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return d=e.sent,h=d.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),mc.apply(this,arguments)}function gc(){return(gc=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ku(gr(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var kc=function(){function e(t){qe(this,e),this.providerId=e.PROVIDER_ID,this.auth=ho(t)}return Ke(e,[{key:"verifyPhoneNumber",value:function(e,t){return yc(this.auth,e,gr(t))}}],[{key:"credential",value:function(e,t){return $o._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?$o._fromTokenResponse(n,r):null}}]),e}();function bc(e,t){return t?ia(t):(ea(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}kc.PROVIDER_ID="phone",kc.PHONE_SIGN_IN_METHOD="phone";var wc=function(e){Ot(n,e);var t=Ft(n);function n(e){var r;return qe(this,n),(r=t.call(this,"custom","custom")).params=e,r}return Ke(n,[{key:"_getIdTokenResponse",value:function(e){return qo(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return qo(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return qo(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(go);function xc(e){return Iu(e.auth,new wc(e),e.bypassAuthState)}function Ec(e){var t=e.auth,n=e.user;return ea(n,t,"internal-error"),Eu(n,new wc(e),e.bypassAuthState)}function _c(e){return Ic.apply(this,arguments)}function Ic(){return Ic=a(u().mark((function e(t){var n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,ea(r=t.user,n,"internal-error"),e.abrupt("return",ku(r,new wc(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),Ic.apply(this,arguments)}var Tc=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];qe(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return Ke(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=a(u().mark((function t(n,r){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=a(u().mark((function e(t){var n,r,i,a,o,s,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,s=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return c={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(s)(c);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return xc;case"linkViaPopup":case"linkViaRedirect":return _c;case"reauthViaPopup":case"reauthViaRedirect":return Ec;default:Qi(this.auth,"internal-error")}}},{key:"resolve",value:function(e){na(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){na(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Sc=new sa(2e3,1e4);function Cc(e,t,n){return Nc.apply(this,arguments)}function Nc(){return Nc=a(u().mark((function e(t,n,r){var i,a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ho(t),Ji(t,n,eu),a=bc(i,r),o=new Rc(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),Nc.apply(this,arguments)}function Pc(){return(Pc=a(u().mark((function e(t,n,r){var i,a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ji((i=gr(t)).auth,n,eu),a=bc(i.auth,r),o=new Rc(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ac(e,t,n){return Oc.apply(this,arguments)}function Oc(){return(Oc=a(u().mark((function e(t,n,r){var i,a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ji((i=gr(t)).auth,n,eu),a=bc(i.auth,r),o=new Rc(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Rc=function(e){Ot(n,e);var t=Ft(n);function n(e,r,i,a,o){var u;return qe(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=Lt(u),u}return Ke(n,[{key:"executeNotNull",value:function(){var e=a(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return ea(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=a(u().mark((function e(){var t,n=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return na(1===this.filter.length,"Popup operations only handle one event"),t=Ts(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Yi(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Yi(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Yi(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,Sc.get())}()}}]),n}(Tc);Rc.currentPopupAction=null;var Dc=new Map,Lc=function(e){Ot(n,e);var t=Ft(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return qe(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return Ke(n,[{key:"execute",value:function(){var e=a(u().mark((function e(){var t,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Dc.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Mc(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,At(Nt(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Dc.set(this.auth._key(),t);case 21:return this.bypassAuthState||Dc.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=a(u().mark((function e(t){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",At(Nt(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",At(Nt(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=a(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(Tc);function Mc(e,t){return Fc.apply(this,arguments)}function Fc(){return Fc=a(u().mark((function e(t,n){var r,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Bc(n),i=Vc(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),Fc.apply(this,arguments)}function Uc(e,t){return jc.apply(this,arguments)}function jc(){return jc=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vc(t)._set(Bc(n),"true"));case 1:case"end":return e.stop()}}),e)}))),jc.apply(this,arguments)}function Vc(e){return ia(e._redirectPersistence)}function Bc(e){return Ya("pendingRedirect",e.config.apiKey,e.name)}function qc(e,t,n){return function(e,t,n){return zc.apply(this,arguments)}(e,t,n)}function zc(){return zc=a(u().mark((function e(t,n,r){var i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ho(t),Ji(t,n,eu),a=bc(i,r),e.next=5,Uc(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)}))),zc.apply(this,arguments)}function Kc(e,t,n){return function(e,t,n){return Hc.apply(this,arguments)}(e,t,n)}function Hc(){return(Hc=a(u().mark((function e(t,n,r){var i,a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ji((i=gr(t)).auth,n,eu),a=bc(i.auth,r),e.next=5,Uc(a,i.auth);case 5:return e.next=7,Jc(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wc(e,t,n){return function(e,t,n){return Gc.apply(this,arguments)}(e,t,n)}function Gc(){return(Gc=a(u().mark((function e(t,n,r){var i,a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ji((i=gr(t)).auth,n,eu),a=bc(i.auth,r),e.next=5,wu(!1,i,n.providerId);case 5:return e.next=7,Uc(a,i.auth);case 7:return e.next=9,Jc(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zc(e,t){return Qc.apply(this,arguments)}function Qc(){return Qc=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ho(t)._initializationPromise;case 2:return e.abrupt("return",Yc(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),Qc.apply(this,arguments)}function Yc(e,t){return $c.apply(this,arguments)}function $c(){return $c=a(u().mark((function e(t,n){var r,i,a,o,s,c=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=ho(t),a=bc(i,n),o=new Lc(i,a,r),e.next=6,o.execute();case 6:if(!(s=e.sent)||r){e.next=13;break}return delete s.user._redirectEventId,e.next=11,i._persistUserIfCurrent(s.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)}))),$c.apply(this,arguments)}function Jc(e){return Xc.apply(this,arguments)}function Xc(){return(Xc=a(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ts("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var el=function(){function e(t){qe(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return Ke(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nl(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!nl(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Yi(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(tl(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(tl(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function tl(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function nl(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function rl(e){return il.apply(this,arguments)}function il(){return il=a(u().mark((function e(t){var n,r=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",pa(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),il.apply(this,arguments)}var al=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ol=/^https?/;function ul(){return ul=a(u().mark((function e(t){var n,r,i,a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,rl(t);case 4:n=e.sent,r=n.authorizedDomains,i=Bn(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!sl(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Qi(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),ul.apply(this,arguments)}function sl(e){var t=aa(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!ol.test(r))return!1;if(al.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var cl=new sa(3e4,6e4);function ll(){var e=Cs().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=Be(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var fl=null;function dl(e){return fl=fl||function(e){return new Promise((function(t,n){var r,i,a;function o(){ll(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){ll(),n(Yi(e,"network-request-failed"))},timeout:cl.get()})}if(null===(i=null===(r=Cs().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Cs().gapi)||void 0===a?void 0:a.load)){var u=$s("iframefcb");return Cs()[u]=function(){gapi.load?o():n(Yi(e,"network-request-failed"))},Ys("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw fl=null,e}))}(e),fl}var hl=new sa(5e3,15e3),pl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vl=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yl(e){var t=e.config;ea(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?ca(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:$r},i=vl.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(dr(r).slice(1))}function ml(e){return gl.apply(this,arguments)}function gl(){return gl=a(u().mark((function e(t){var n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dl(t);case 2:return n=e.sent,ea(r=Cs().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:yl(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pl,dontclear:!0},(function(e){return new Promise(function(){var n=a(u().mark((function n(r,i){var a,o,s;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){Cs().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Yi(t,"network-request-failed"),o=Cs().setTimeout((function(){i(a)}),hl.get()),e.ping(s).then(s,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),gl.apply(this,arguments)}var kl={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},bl="_blank",wl="http://localhost",xl=function(){function e(t){qe(this,e),this.window=t,this.associatedEvent=null}return Ke(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(AN){}}}]),e}();function El(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},kl),{width:r.toString(),height:i.toString(),top:a,left:o}),c=Jn().toLowerCase();n&&(u=to(c)?bl:n),Xa(c)&&(t=t||wl,s.scrollbars="yes");var l=Object.entries(s).reduce((function(e,t){var n=Me(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(uo(c)&&"_self"!==u)return _l(t||"",u),new xl(null);var f=window.open(t||"",u,l);ea(f,e,"popup-blocked");try{f.focus()}catch(AN){}return new xl(f)}function _l(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var Il="__/auth/handler",Tl="emulator/auth/handler";function Sl(e,t,n,r,i,a){ea(e.config.authDomain,e,"auth-domain-config-required"),ea(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:$r,eventId:i};if(t instanceof eu){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,s=Object.entries(a||{});u<s.length;u++){var c=Me(s[u],2),l=c[0],f=c[1];o[l]=f}}if(t instanceof tu){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var h=o,p=0,v=Object.keys(h);p<v.length;p++){var y=v[p];void 0===h[y]&&delete h[y]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Il);return ca(t,Tl)}(e),"?").concat(dr(h).slice(1))}var Cl="webStorageSupport",Nl=function(){function e(){qe(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Es,this._completeRedirectFn=Yc}return Ke(e,[{key:"_openPopup",value:function(){var e=a(u().mark((function e(t,n,r,i){var a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return na(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=Sl(t,n,r,aa(),i),e.abrupt("return",El(t,o,Ts()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=a(u().mark((function e(t,n,r,i){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=Sl(t,n,r,aa(),i),Cs().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(na(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=a(u().mark((function e(t){var n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ml(t);case 2:return n=e.sent,r=new el(t),n.register("authEvent",(function(e){return ea(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Cl,{type:Cl},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),Qi(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return ul.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return co()||eo()||oo()}}]),e}(),Pl=Nl,Al=function(){function e(t){qe(this,e),this.factorId=t}return Ke(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return ta("unexpected MultiFactorSessionType")}}}]),e}(),Ol=function(e){Ot(n,e);var t=Ft(n);function n(e){var r;return qe(this,n),(r=t.call(this,"phone")).credential=e,r}return Ke(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return pa(e,"POST","/v2/accounts/mfaEnrollment:finalize",ha(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return pa(e,"POST","/v2/accounts/mfaSignIn:finalize",ha(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(Al),Rl=function(){function e(){qe(this,e)}return Ke(e,null,[{key:"assertion",value:function(e){return Ol._fromCredential(e)}}]),e}();Rl.FACTOR_ID="phone";var Dl,Ll="@firebase/auth",Ml="0.19.9",Fl=function(){function e(t){qe(this,e),this.auth=t,this.internalListeners=new Map}return Ke(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=a(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){ea(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function Ul(){return window}Dl="Browser",Kr(new kr("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=r.options,a=i.apiKey,o=i.authDomain;return function(e){ea(a&&!a.includes(":"),"invalid-api-key",{appName:e.name}),ea(!(null===o||void 0===o?void 0:o.includes(":")),"argument-error",{appName:e.name});var t={apiKey:a,authDomain:o,clientPlatform:Dl,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:lo(Dl)},r=new fo(e,t);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ia);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(r,n),r}(r)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Kr(new kr("auth-internal",(function(e){return function(e){return new Fl(e)}(ho(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),ri(Ll,Ml,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Dl)),ri(Ll,Ml,"esm2017");function jl(e,t,n){return Vl.apply(this,arguments)}function Vl(){return Vl=a(u().mark((function e(t,n,r){var i,a,o,s,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ul(),o=a.BuildInfo,na(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,Wl(n.sessionId);case 4:return s=e.sent,c={},oo()?c.ibi=o.packageName:ro()?c.apn=o.packageName:Qi(t,"operation-not-supported-in-this-environment"),o.displayName&&(c.appDisplayName=o.displayName),c.sessionId=s,e.abrupt("return",Sl(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,c));case 10:case"end":return e.stop()}}),e)}))),Vl.apply(this,arguments)}function Bl(){return Bl=a(u().mark((function e(t){var n,r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ul(),r=n.BuildInfo,i={},oo()?i.iosBundleId=r.packageName:ro()?i.androidPackageName=r.packageName:Qi(t,"operation-not-supported-in-this-environment"),e.next=5,rl(t,i);case 5:case"end":return e.stop()}}),e)}))),Bl.apply(this,arguments)}function ql(e){var t=Ul().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jn();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function zl(e,t,n){return Kl.apply(this,arguments)}function Kl(){return Kl=a(u().mark((function e(t,n,r){var i,a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ul(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(Yi(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),ro()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),Kl.apply(this,arguments)}function Hl(e){var t,n,r,i,a,o,u,s,c,l,f=Ul();ea("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ea("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ea("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ea("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ea("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function Wl(e){return Gl.apply(this,arguments)}function Gl(){return(Gl=a(u().mark((function e(t){var n,r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Zl(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zl(e){if(na(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var Ql=function(e){Ot(n,e);var t=Ft(n);function n(){var e;return qe(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return Ke(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),At(Nt(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=a(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(el);function Yl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:tf(),postBody:null,tenantId:e.tenantId,error:Yi(e,"no-auth-event")}}function $l(e,t){return nf()._set(rf(e),t)}function Jl(e){return Xl.apply(this,arguments)}function Xl(){return Xl=a(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nf()._get(rf(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,nf()._remove(rf(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),Xl.apply(this,arguments)}function ef(e,t){var n,r,i=function(e){var t=af(e),n=t.link?decodeURIComponent(t.link):void 0,r=af(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return af(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=af(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(AN){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?Yi(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function tf(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function nf(){return ia(ws)}function rf(e){return Ya("authEvent",e.config.apiKey,e.name)}function af(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=Oe(t=n)||Ve(t)||De(t)||Le();r[0];return hr(r.slice(1).join("?"))}var of=function(){function e(){qe(this,e),this._redirectPersistence=Es,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Yc}return Ke(e,[{key:"_initialize",value:function(){var e=a(u().mark((function e(t){var n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new Ql(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Qi(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=a(u().mark((function e(t,n,r,i){var a,o,s,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Hl(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),Dc.clear(),e.next=10,this._originValidation(t);case 10:return o=Yl(t,r,i),e.next=13,$l(t,o);case 13:return e.next=15,jl(t,o,n);case 15:return s=e.sent,e.next=18,ql(s);case 18:return c=e.sent,e.abrupt("return",zl(t,a,c));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Bl.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=Ul(),r=n.universalLinks,i=n.handleOpenURL,o=n.BuildInfo,s=setTimeout(a(u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Jl(e);case 2:t.onEvent(sf());case 3:case"end":return n.stop()}}),n)}))),500),c=function(){var n=a(u().mark((function n(r){var i,a;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(s),n.next=3,Jl(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=ef(i,r.url)),t.onEvent(a||sf());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,c);var l=i,f="".concat(o.packageName.toLowerCase(),"://");Ul().handleOpenURL=function(){var e=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(f)&&c({url:t}),"function"===typeof l)try{l(t)}catch(AN){console.error(AN)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),uf=of;function sf(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Yi("no-auth-event")}}function cf(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function lf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jn();return!("file:"!==cf()&&"ionic:"!==cf()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function ff(){return rr()&&11===(null===document||void 0===document?void 0:document.documentMode)}function df(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jn();return/Edge\/\d+/.test(e)}function hf(){try{var e=self.localStorage,t=Ts();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jn();return ff()||df(e)}()||ir()}catch(AN){return pf()&&ir()}return!1}function pf(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function vf(){return("http:"===cf()||"https:"===cf()||tr()||lf())&&!(nr()||er())&&hf()&&!pf()}function yf(){return lf()&&"undefined"!==typeof document}function mf(){return gf.apply(this,arguments)}function gf(){return(gf=a(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(yf()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var kf={LOCAL:"local",NONE:"none",SESSION:"session"},bf=ea,wf="persistence";function xf(e,t){bf(Object.values(kf).includes(t),e,"invalid-persistence-type"),nr()?bf(t!==kf.SESSION,e,"unsupported-persistence-type"):er()?bf(t===kf.NONE,e,"unsupported-persistence-type"):pf()?bf(t===kf.NONE||t===kf.LOCAL&&ir(),e,"unsupported-persistence-type"):bf(t===kf.NONE||hf(),e,"unsupported-persistence-type")}function Ef(e){return _f.apply(this,arguments)}function _f(){return _f=a(u().mark((function e(t){var n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=If(),r=Ya(wf,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),_f.apply(this,arguments)}function If(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(AN){return null}}var Tf=ea,Sf=function(){function e(){qe(this,e),this.browserResolver=ia(Pl),this.cordovaResolver=ia(uf),this.underlyingResolver=null,this._redirectPersistence=Es,this._completeRedirectFn=Yc}return Ke(e,[{key:"_initialize",value:function(){var e=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=a(u().mark((function e(t,n,r,i){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=a(u().mark((function e(t,n,r,i){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return yf()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return Tf(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=a(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,mf();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Cf(e){return e.unwrap()}function Nf(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new Df(e,function(e,t){var n,r=gr(e),i=t;return ea(t.customData.operationType,r,"argument-error"),ea(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),hs._fromError(r,i)}(e,t));else if(r){var i=Pf(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function Pf(e){var t=(e instanceof ar?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof ar)&&"temporaryProof"in t&&"phoneNumber"in t)return kc.credentialFromResult(e);var n,r=t.providerId;if(!r||r===Li)return null;switch(r){case Di:n=iu;break;case Oi:n=ru;break;case Ri:n=au;break;case Mi:n=su;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?ou._create(r,u):Ko._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new nu(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof ar?n.credentialFromError(e):n.credentialFromResult(e)}function Af(e,t){return t.catch((function(t){throw t instanceof ar&&Nf(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,Pf(t)),additionalUserInfo:fs(e),user:Lf.getOrCreate(r)}}))}function Of(e,t){return Rf.apply(this,arguments)}function Rf(){return Rf=a(u().mark((function e(t,n){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return Af(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),Rf.apply(this,arguments)}var Df=function(){function e(t,n){qe(this,e),this.resolver=n,this.auth=t.wrapped()}return Ke(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return Af(Cf(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),Lf=function(){function e(t){qe(this,e),this._delegate=t,this.multiFactor=function(e){var t=gr(e);return ms.has(t)||ms.set(t,ys._fromUser(t)),ms.get(t)}(t)}return Ke(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Af(this.auth,Nu(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Of(this.auth,hc(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Af(this.auth,Ac(this._delegate,t,Sf)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ef(ho(this.auth));case 2:return e.abrupt("return",Wc(this._delegate,t,Sf));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Af(this.auth,Au(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Of(this.auth,function(e,t,n){return vc.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return Af(this.auth,function(e,t,n){return Pc.apply(this,arguments)}(this._delegate,e,Sf))}},{key:"reauthenticateWithRedirect",value:function(){var e=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ef(ho(this.auth));case 2:return e.abrupt("return",Kc(this._delegate,t,Sf));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return Ju.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mu(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return rs(gr(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return rs(gr(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return gc.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return ns.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return Xu.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();Lf.USER_MAP=new WeakMap;var Mf=ea,Ff=function(){function e(t,n){if(qe(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;Mf(r,"invalid-api-key",{appName:t.name}),Mf(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?Sf:void 0;this._delegate=n.initialize({options:{persistence:jf(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(Ki),this.linkUnderlyingAuth()}return Ke(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?Lf.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){vo(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return Bu.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return qu(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return Vu.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Af(this._delegate,Hu(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return $u.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=Jo.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=a(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Mf(vf(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Zc(this._delegate,Sf);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",Af(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){ho(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=Uf(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=Uf(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Gu.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return ju.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=a(u().mark((function e(t){var n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:xf(this._delegate,t),e.t0=t,e.next=e.t0===kf.SESSION?4:e.t0===kf.LOCAL?6:e.t0===kf.NONE?11:13;break;case 4:return n=Es,e.abrupt("break",14);case 6:return e.next=8,ia(Ws)._isAvailable();case 8:return r=e.sent,n=r?Ws:ws,e.abrupt("break",14);case 11:return n=Qa,e.abrupt("break",14);case 13:return e.abrupt("return",Qi("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return Af(this._delegate,function(e){return hu.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return Af(this._delegate,Su(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return Af(this._delegate,function(e,t){return Lu.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return Af(this._delegate,function(e,t,n){return Su(gr(e),Xo.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return Af(this._delegate,function(e,t,n){return Zu.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Of(this._delegate,function(e,t,n){return dc.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Mf(vf(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",Af(this._delegate,Cc(this._delegate,t,Sf)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Mf(vf(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Ef(this._delegate);case 3:return e.abrupt("return",qc(this._delegate,t,Sf));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return Ku.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function Uf(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&Lf.getOrCreate(e))},error:t,complete:n}}function jf(e,t){var n=function(e,t){var n=If();if(!n)return[];var r=Ya(wf,e,t);switch(n.getItem(r)){case kf.NONE:return[Qa];case kf.LOCAL:return[Ws,Es];case kf.SESSION:return[Es];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Ws)||n.push(Ws),"undefined"!==typeof window)for(var r=0,i=[ws,Es];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(Qa)||n.push(Qa),n}Ff.Persistence=kf;var Vf=function(){function e(){qe(this,e),this.providerId="phone",this._delegate=new kc(Cf(Ni.auth()))}return Ke(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return kc.credential(e,t)}}]),e}();Vf.PHONE_SIGN_IN_METHOD=kc.PHONE_SIGN_IN_METHOD,Vf.PROVIDER_ID=kc.PROVIDER_ID;var Bf,qf=ea,zf=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ni.app();qe(this,e),qf(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new cc(t,n,i.auth()),this.type=this._delegate.type}return Ke(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(Bf=Ni).INTERNAL.registerComponent(new kr("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Ff(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Fi,PASSWORD_RESET:Ui,RECOVER_EMAIL:ji,REVERT_SECOND_FACTOR_ADDITION:Vi,VERIFY_AND_CHANGE_EMAIL:Bi,VERIFY_EMAIL:qi}},EmailAuthProvider:Xo,FacebookAuthProvider:ru,GithubAuthProvider:au,GoogleAuthProvider:iu,OAuthProvider:nu,SAMLAuthProvider:uu,PhoneAuthProvider:Vf,PhoneMultiFactorGenerator:Rl,RecaptchaVerifier:zf,TwitterAuthProvider:su,Auth:Ff,AuthCredential:go,Error:ar}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Bf.registerVersion("@firebase/auth-compat","0.2.9");var Kf,Hf="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Wf={},Gf=Gf||{},Zf=Hf||self;function Qf(){}function Yf(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function $f(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Jf="closure_uid_"+(1e9*Math.random()>>>0),Xf=0;function ed(e,t,n){return e.call.apply(e.bind,arguments)}function td(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function nd(e,t,n){return(nd=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ed:td).apply(null,arguments)}function rd(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function id(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function ad(){this.s=this.s,this.o=this.o}var od={};ad.prototype.s=!1,ad.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,Jf)&&e[Jf]||(e[Jf]=++Xf)}(this);delete od[e]}},ad.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var ud=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},sd=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function cd(e){return Array.prototype.concat.apply([],arguments)}function ld(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function fd(e){return/^[\s\xa0]*$/.test(e)}var dd,hd=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function pd(e,t){return-1!=e.indexOf(t)}function vd(e,t){return e<t?-1:e>t?1:0}e:{var yd=Zf.navigator;if(yd){var md=yd.userAgent;if(md){dd=md;break e}}dd=""}function gd(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function kd(e){var t={};for(var n in e)t[n]=e[n];return t}var bd="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function wd(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<bd.length;a++)n=bd[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function xd(e){return xd[" "](e),e}xd[" "]=Qf;var Ed,_d=pd(dd,"Opera"),Id=pd(dd,"Trident")||pd(dd,"MSIE"),Td=pd(dd,"Edge"),Sd=Td||Id,Cd=pd(dd,"Gecko")&&!(pd(dd.toLowerCase(),"webkit")&&!pd(dd,"Edge"))&&!(pd(dd,"Trident")||pd(dd,"MSIE"))&&!pd(dd,"Edge"),Nd=pd(dd.toLowerCase(),"webkit")&&!pd(dd,"Edge");function Pd(){var e=Zf.document;return e?e.documentMode:void 0}e:{var Ad="",Od=function(){var e=dd;return Cd?/rv:([^\);]+)(\)|;)/.exec(e):Td?/Edge\/([\d\.]+)/.exec(e):Id?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Nd?/WebKit\/(\S+)/.exec(e):_d?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Od&&(Ad=Od?Od[1]:""),Id){var Rd=Pd();if(null!=Rd&&Rd>parseFloat(Ad)){Ed=String(Rd);break e}}Ed=Ad}var Dd,Ld={};function Md(){return function(e){var t=Ld;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=hd(String(Ed)).split("."),n=hd("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=vd(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||vd(0==a[2].length,0==o[2].length)||vd(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(Zf.document&&Id){var Fd=Pd();Dd=Fd||(parseInt(Ed,10)||void 0)}else Dd=void 0;var Ud=Dd,jd=function(){if(!Zf.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Zf.addEventListener("test",Qf,t),Zf.removeEventListener("test",Qf,t)}catch(n){}return e}();function Vd(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Bd(e,t){if(Vd.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Cd){e:{try{xd(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:qd[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Bd.Z.h.call(this)}}Vd.prototype.h=function(){this.defaultPrevented=!0},id(Bd,Vd);var qd={2:"touch",3:"pen",4:"mouse"};Bd.prototype.h=function(){Bd.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var zd="closure_listenable_"+(1e6*Math.random()|0),Kd=0;function Hd(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Kd,this.ca=this.fa=!1}function Wd(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Gd(e){this.src=e,this.g={},this.h=0}function Zd(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=ud(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Wd(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Qd(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}Gd.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Qd(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Hd(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var Yd="closure_lm_"+(1e6*Math.random()|0),$d={};function Jd(e,t,n,r,i){if(r&&r.once)return eh(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Jd(e,t[a],n,r,i);return null}return n=uh(n),e&&e[zd]?e.N(t,n,$f(r)?!!r.capture:!!r,i):Xd(e,t,n,!1,r,i)}function Xd(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=$f(i)?!!i.capture:!!i,u=ah(e);if(u||(e[Yd]=u=new Gd(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=ih;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)jd||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(rh(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function eh(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)eh(e,t[a],n,r,i);return null}return n=uh(n),e&&e[zd]?e.O(t,n,$f(r)?!!r.capture:!!r,i):Xd(e,t,n,!0,r,i)}function th(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)th(e,t[a],n,r,i);else r=$f(r)?!!r.capture:!!r,n=uh(n),e&&e[zd]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Qd(a=e.g[t],n,r,i))&&(Wd(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=ah(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Qd(t,n,r,i)),(n=-1<e?t[e]:null)&&nh(n))}function nh(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[zd])Zd(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(rh(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ah(t))?(Zd(n,e),0==n.h&&(n.src=null,t[Yd]=null)):Wd(e)}}}function rh(e){return e in $d?$d[e]:$d[e]="on"+e}function ih(e,t){if(e.ca)e=!0;else{t=new Bd(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&nh(e),e=n.call(r,t)}return e}function ah(e){return(e=e[Yd])instanceof Gd?e:null}var oh="__closure_events_fn_"+(1e9*Math.random()>>>0);function uh(e){return"function"===typeof e?e:(e[oh]||(e[oh]=function(t){return e.handleEvent(t)}),e[oh])}function sh(){ad.call(this),this.i=new Gd(this),this.P=this,this.I=null}function ch(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Vd(t,e);else if(t instanceof Vd)t.target=t.target||e;else{var i=t;wd(t=new Vd(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=lh(o,r,!0,t)&&i}if(i=lh(o=t.g=e,r,!0,t)&&i,i=lh(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=lh(o=t.g=n[a],r,!1,t)&&i}function lh(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&Zd(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}id(sh,ad),sh.prototype[zd]=!0,sh.prototype.removeEventListener=function(e,t,n,r){th(this,e,t,n,r)},sh.prototype.M=function(){if(sh.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Wd(n[r]);delete t.g[e],t.h--}}this.I=null},sh.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},sh.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var fh=Zf.JSON.stringify;function dh(){var e=bh,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var hh,ph=function(){function e(){qe(this,e),this.h=this.g=null}return Ke(e,[{key:"add",value:function(e,t){var n=vh.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),vh=new(function(){function e(t,n){qe(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return Ke(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new yh}),(function(e){return e.reset()})),yh=function(){function e(){qe(this,e),this.next=this.g=this.h=null}return Ke(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function mh(e){Zf.setTimeout((function(){throw e}),0)}function gh(e,t){hh||function(){var e=Zf.Promise.resolve(void 0);hh=function(){e.then(wh)}}(),kh||(hh(),kh=!0),bh.add(e,t)}var kh=!1,bh=new ph;function wh(){for(var e;e=dh();){try{e.h.call(e.g)}catch(n){mh(n)}var t=vh;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}kh=!1}function xh(e,t){sh.call(this),this.h=e||1,this.g=t||Zf,this.j=nd(this.kb,this),this.l=Date.now()}function Eh(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function _h(e,t,n){if("function"===typeof e)n&&(e=nd(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=nd(e.handleEvent,e)}return 2147483647<Number(t)?-1:Zf.setTimeout(e,t||0)}function Ih(e){e.g=_h((function(){e.g=null,e.i&&(e.i=!1,Ih(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}id(xh,sh),(Kf=xh.prototype).da=!1,Kf.S=null,Kf.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ch(this,"tick"),this.da&&(Eh(this),this.start()))}},Kf.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Kf.M=function(){xh.Z.M.call(this),Eh(this),delete this.g};var Th=function(e){Ot(n,e);var t=Ft(n);function n(e,r){var i;return qe(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return Ke(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Ih(this)}},{key:"M",value:function(){At(Nt(n.prototype),"M",this).call(this),this.g&&(Zf.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(ad);function Sh(e){ad.call(this),this.h=e,this.g={}}id(Sh,ad);var Ch=[];function Nh(e,t,n,r){Array.isArray(n)||(n&&(Ch[0]=n.toString()),n=Ch);for(var i=0;i<n.length;i++){var a=Jd(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Ph(e){gd(e.g,(function(e,t){this.g.hasOwnProperty(t)&&nh(e)}),e),e.g={}}function Ah(){this.g=!0}function Oh(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return fh(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}Sh.prototype.M=function(){Sh.Z.M.call(this),Ph(this)},Sh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ah.prototype.Aa=function(){this.g=!1},Ah.prototype.info=function(){};var Rh={},Dh=null;function Lh(){return Dh=Dh||new sh}function Mh(e){Vd.call(this,Rh.Ma,e)}function Fh(e){var t=Lh();ch(t,new Mh(t,e))}function Uh(e,t){Vd.call(this,Rh.STAT_EVENT,e),this.stat=t}function jh(e){var t=Lh();ch(t,new Uh(t,e))}function Vh(e,t){Vd.call(this,Rh.Na,e),this.size=t}function Bh(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Zf.setTimeout((function(){e()}),t)}Rh.Ma="serverreachability",id(Mh,Vd),Rh.STAT_EVENT="statevent",id(Uh,Vd),Rh.Na="timingevent",id(Vh,Vd);var qh={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},zh={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Kh(){}function Hh(e){return e.h||(e.h=e.i())}function Wh(){}Kh.prototype.h=null;var Gh,Zh={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Qh(){Vd.call(this,"d")}function Yh(){Vd.call(this,"c")}function $h(){}function Jh(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Sh(this),this.P=ep,e=Sd?125:void 0,this.W=new xh(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Xh}function Xh(){this.i=null,this.g="",this.h=!1}id(Qh,Vd),id(Yh,Vd),id($h,Kh),$h.prototype.g=function(){return new XMLHttpRequest},$h.prototype.i=function(){return{}},Gh=new $h;var ep=45e3,tp={},np={};function rp(e,t,n){e.K=1,e.v=Tp(bp(t)),e.s=n,e.U=!0,ip(e,null)}function ip(e,t){e.F=Date.now(),sp(e),e.A=bp(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),jp(n.h,"t",r),e.C=0,n=e.l.H,e.h=new Xh,e.g=Bv(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Th(nd(e.Ia,e,e.g),e.O)),Nh(e.V,e.g,"readystatechange",e.gb),t=e.H?kd(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Fh(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function ap(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function op(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=up(e,n))==np){4==t&&(e.o=4,jh(14),i=!1),Oh(e.j,e.m,null,"[Incomplete Response]");break}if(r==tp){e.o=4,jh(15),Oh(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Oh(e.j,e.m,r,null),hp(e,r)}ap(e)&&r!=np&&r!=tp&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,jh(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Rv(t),t.L=!0,jh(11))):(Oh(e.j,e.m,n,"[Invalid Chunked Response]"),dp(e),fp(e))}function up(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?np:(n=Number(t.substring(n,r)),isNaN(n)?tp:(r+=1)+n>t.length?np:(t=t.substr(r,n),e.C=r+n,t))}function sp(e){e.Y=Date.now()+e.P,cp(e,e.P)}function cp(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Bh(nd(e.eb,e),t)}function lp(e){e.B&&(Zf.clearTimeout(e.B),e.B=null)}function fp(e){0==e.l.G||e.I||Mv(e.l,e)}function dp(e){lp(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Eh(e.W),Ph(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function hp(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Gp(n.i,e)))if(n.I=e.N,!e.J&&Gp(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Lv(n),_v(n)}Ov(n),jh(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Bh(nd(n.ab,n),6e3));if(1>=Wp(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else Uv(n,11)}else if((e.J||n.g==e)&&Lv(n),!fd(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(pd(l,"spdy")||pd(l,"quic")||pd(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(Zp(f,f.h),f.h=null))}if(r.D){var d=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;d&&(r.sa=d,Ip(r.F,r.D,d))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var h=e;if((r=n).oa=Vv(r,r.H?r.la:null,r.W),h.J){Qp(r.i,h);var p=h,v=r.K;v&&p.setTimeout(v),p.B&&(lp(p),sp(p)),r.g=h}else Av(r);0<n.l.length&&Sv(n)}else"stop"!=a[0]&&"close"!=a[0]||Uv(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Uv(n,7):Ev(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}Fh(4)}catch(a){}}function pp(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Yf(e)||"string"===typeof e)sd(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(Yf(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(Yf(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function vp(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof vp)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function yp(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];mp(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)mp(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function mp(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Kf=Jh.prototype).setTimeout=function(e){this.P=e},Kf.gb=function(e){e=e.target;var t=this.L;t&&3==gv(e)?t.l():this.Ia(e)},Kf.Ia=function(e){try{if(e==this.g)e:{var t=gv(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||Sd||this.g&&(this.h.h||this.g.ga()||kv(this.g)))){this.I||4!=t||7==n||Fh(8==n||0>=r?3:2),lp(this);var i=this.g.ba();this.N=i;t:if(ap(this)){var a=kv(this.g);e="";var o=a.length,u=4==gv(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){dp(this),fp(this);var s="";break t}this.h.i=new Zf.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!fd(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,jh(12),dp(this),fp(this);break e}Oh(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,hp(this,i)}this.U?(op(this,t,s),Sd&&this.i&&3==t&&(Nh(this.V,this.W,"tick",this.fb),this.W.start())):(Oh(this.j,this.m,s,null),hp(this,s)),4==t&&dp(this),this.i&&!this.I&&(4==t?Mv(this.l,this):(this.i=!1,sp(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,jh(12)):(this.o=0,jh(13)),dp(this),fp(this)}}}catch(t){}},Kf.fb=function(){if(this.g){var e=gv(this.g),t=this.g.ga();this.C<t.length&&(lp(this),op(this,e,t),this.i&&4!=e&&sp(this))}},Kf.cancel=function(){this.I=!0,dp(this)},Kf.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Fh(3),jh(17)),dp(this),this.o=2,fp(this)):cp(this,this.Y-e)},(Kf=vp.prototype).R=function(){yp(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Kf.T=function(){return yp(this),this.g.concat()},Kf.get=function(e,t){return mp(this.h,e)?this.h[e]:t},Kf.set=function(e,t){mp(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Kf.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var gp=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function kp(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof kp){this.g=void 0!==t?t:e.g,wp(this,e.j),this.s=e.s,xp(this,e.i),Ep(this,e.m),this.l=e.l,t=e.h;var n=new Lp;n.i=t.i,t.g&&(n.g=new vp(t.g),n.h=t.h),_p(this,n),this.o=e.o}else e&&(n=String(e).match(gp))?(this.g=!!t,wp(this,n[1]||"",!0),this.s=Sp(n[2]||""),xp(this,n[3]||"",!0),Ep(this,n[4]),this.l=Sp(n[5]||"",!0),_p(this,n[6]||"",!0),this.o=Sp(n[7]||"")):(this.g=!!t,this.h=new Lp(null,this.g))}function bp(e){return new kp(e)}function wp(e,t,n){e.j=n?Sp(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function xp(e,t,n){e.i=n?Sp(t,!0):t}function Ep(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function _p(e,t,n){t instanceof Lp?(e.h=t,function(e,t){t&&!e.j&&(Mp(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Fp(this,t),jp(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=Cp(t,Rp)),e.h=new Lp(t,e.g))}function Ip(e,t,n){e.h.set(t,n)}function Tp(e){return Ip(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Sp(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Cp(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Np),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Np(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}kp.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Cp(t,Pp,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Cp(t,Pp,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Cp(n,"/"==n.charAt(0)?Op:Ap,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Cp(n,Dp)),e.join("")};var Pp=/[#\/\?@]/g,Ap=/[#\?:]/g,Op=/[#\?]/g,Rp=/[#\?@]/g,Dp=/#/g;function Lp(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Mp(e){e.g||(e.g=new vp,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Fp(e,t){Mp(e),t=Vp(e,t),mp(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,mp((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&yp(e)))}function Up(e,t){return Mp(e),t=Vp(e,t),mp(e.g.h,t)}function jp(e,t,n){Fp(e,t),0<n.length&&(e.i=null,e.g.set(Vp(e,t),ld(n)),e.h+=n.length)}function Vp(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Kf=Lp.prototype).add=function(e,t){Mp(this),this.i=null,e=Vp(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Kf.forEach=function(e,t){Mp(this),this.g.forEach((function(n,r){sd(n,(function(n){e.call(t,n,r,this)}),this)}),this)},Kf.T=function(){Mp(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Kf.R=function(e){Mp(this);var t=[];if("string"===typeof e)Up(this,e)&&(t=cd(t,this.g.get(Vp(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=cd(t,e[n])}return t},Kf.set=function(e,t){return Mp(this),this.i=null,Up(this,e=Vp(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Kf.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Kf.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var Bp=Ke((function e(t,n){qe(this,e),this.h=t,this.g=n}));function qp(e){this.l=e||Kp,Zf.PerformanceNavigationTiming?e=0<(e=Zf.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Zf.g&&Zf.g.Ea&&Zf.g.Ea()&&Zf.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var zp,Kp=10;function Hp(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Wp(e){return e.h?1:e.g?e.g.size:0}function Gp(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Zp(e,t){e.g?e.g.add(t):e.h=t}function Qp(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Yp(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=Bn(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return ld(e.i)}function $p(){}function Jp(){this.g=new $p}function Xp(e,t,n){var r=n||"";try{pp(e,(function(e,n){var i=e;$f(e)&&(i=fh(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(AN){throw t.push(r+"type="+encodeURIComponent("_badmap")),AN}}function ev(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function tv(e){this.l=e.$b||null,this.j=e.ib||!1}function nv(e,t){sh.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=rv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}qp.prototype.cancel=function(){if(this.i=Yp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=Bn(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},$p.prototype.stringify=function(e){return Zf.JSON.stringify(e,void 0)},$p.prototype.parse=function(e){return Zf.JSON.parse(e,void 0)},id(tv,Kh),tv.prototype.g=function(){return new nv(this.l,this.j)},tv.prototype.i=(zp={},function(){return zp}),id(nv,sh);var rv=0;function iv(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function av(e){e.readyState=4,e.l=null,e.j=null,e.A=null,ov(e)}function ov(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Kf=nv.prototype).open=function(e,t){if(this.readyState!=rv)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,ov(this)},Kf.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Zf).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Kf.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,av(this)),this.readyState=rv},Kf.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,ov(this)),this.g&&(this.readyState=3,ov(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof Zf.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;iv(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Kf.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?av(this):ov(this),3==this.readyState&&iv(this)}},Kf.Ua=function(e){this.g&&(this.response=this.responseText=e,av(this))},Kf.Ta=function(e){this.g&&(this.response=e,av(this))},Kf.ha=function(){this.g&&av(this)},Kf.setRequestHeader=function(e,t){this.v.append(e,t)},Kf.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Kf.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(nv.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var uv=Zf.JSON.parse;function sv(e){sh.call(this),this.headers=new vp,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=cv,this.K=this.L=!1}id(sv,sh);var cv="",lv=/^https?$/i,fv=["POST","PUT"];function dv(e){return"content-type"==e.toLowerCase()}function hv(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,pv(e),yv(e)}function pv(e){e.D||(e.D=!0,ch(e,"complete"),ch(e,"error"))}function vv(e){if(e.h&&"undefined"!=typeof Gf&&(!e.C[1]||4!=gv(e)||2!=e.ba()))if(e.v&&4==gv(e))_h(e.Fa,0,e);else if(ch(e,"readystatechange"),4==gv(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(gp)[1]||null;if(!a&&Zf.self&&Zf.self.location){var o=Zf.self.location.protocol;a=o.substr(0,o.length-1)}i=!lv.test(a?a.toLowerCase():"")}t=i}if(t)ch(e,"complete"),ch(e,"success");else{e.m=6;try{var u=2<gv(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.ba()+"]",pv(e)}}finally{yv(e)}}}function yv(e,t){if(e.g){mv(e);var n=e.g,r=e.C[0]?Qf:null;e.g=null,e.C=null,t||ch(e,"ready");try{n.onreadystatechange=r}catch(AN){}}}function mv(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Zf.clearTimeout(e.A),e.A=null)}function gv(e){return e.g?e.g.readyState:0}function kv(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case cv:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function bv(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return gd(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Ip(e,t,n))}function wv(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function xv(e){this.za=0,this.l=[],this.h=new Ah,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=wv("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=wv("baseRetryDelayMs",5e3,e),this.$a=wv("retryDelaySeedMs",1e4,e),this.Ya=wv("forwardChannelMaxRetries",2,e),this.ra=wv("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new qp(e&&e.concurrentRequestLimit),this.Ca=new Jp,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Ev(e){if(Iv(e),3==e.G){var t=e.V++,n=bp(e.F);Ip(n,"SID",e.J),Ip(n,"RID",t),Ip(n,"TYPE","terminate"),Nv(e,n),(t=new Jh(e,e.h,t,void 0)).K=2,t.v=Tp(bp(n)),n=!1,Zf.navigator&&Zf.navigator.sendBeacon&&(n=Zf.navigator.sendBeacon(t.v.toString(),"")),!n&&Zf.Image&&((new Image).src=t.v,n=!0),n||(t.g=Bv(t.l,null),t.g.ea(t.v)),t.F=Date.now(),sp(t)}jv(e)}function _v(e){e.g&&(Rv(e),e.g.cancel(),e.g=null)}function Iv(e){_v(e),e.u&&(Zf.clearTimeout(e.u),e.u=null),Lv(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Zf.clearTimeout(e.m),e.m=null)}function Tv(e,t){e.l.push(new Bp(e.Za++,t)),3==e.G&&Sv(e)}function Sv(e){Hp(e.i)||e.m||(e.m=!0,gh(e.Ha,e),e.C=0)}function Cv(e,t){var n;n=t?t.m:e.V++;var r=bp(e.F);Ip(r,"SID",e.J),Ip(r,"RID",n),Ip(r,"AID",e.U),Nv(e,r),e.o&&e.s&&bv(r,e.o,e.s),n=new Jh(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Pv(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Zp(e.i,n),rp(n,r,t)}function Nv(e,t){e.j&&pp({},(function(e,n){Ip(t,n,e)}))}function Pv(e,t,n){n=Math.min(e.l.length,n);var r=e.j?nd(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{Xp(l,o,"req"+c+"_")}catch(vy){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Av(e){e.g||e.u||(e.Y=1,gh(e.Ga,e),e.A=0)}function Ov(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=Bh(nd(e.Ga,e),Fv(e,e.A)),e.A++,!0)}function Rv(e){null!=e.B&&(Zf.clearTimeout(e.B),e.B=null)}function Dv(e){e.g=new Jh(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=bp(e.oa);Ip(t,"RID","rpc"),Ip(t,"SID",e.J),Ip(t,"CI",e.N?"0":"1"),Ip(t,"AID",e.U),Nv(e,t),Ip(t,"TYPE","xmlhttp"),e.o&&e.s&&bv(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Tp(bp(t)),n.s=null,n.U=!0,ip(n,e)}function Lv(e){null!=e.v&&(Zf.clearTimeout(e.v),e.v=null)}function Mv(e,t){var n=null;if(e.g==t){Lv(e),Rv(e),e.g=null;var r=2}else{if(!Gp(e.i,t))return;n=t.D,Qp(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;ch(r=Lh(),new Vh(r,n,t,i)),Sv(e)}else Av(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(Wp(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=Bh(nd(e.Ha,e,t),Fv(e,e.C)),e.C++,!0))}(e,t)||2==r&&Ov(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Uv(e,5);break;case 4:Uv(e,10);break;case 3:Uv(e,6);break;default:Uv(e,2)}}function Fv(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Uv(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=nd(e.jb,e);n||(n=new kp("//www.google.com/images/cleardot.gif"),Zf.location&&"http"==Zf.location.protocol||wp(n,"https"),Tp(n)),function(e,t){var n=new Ah;if(Zf.Image){var r=new Image;r.onload=rd(ev,n,r,"TestLoadImage: loaded",!0,t),r.onerror=rd(ev,n,r,"TestLoadImage: error",!1,t),r.onabort=rd(ev,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=rd(ev,n,r,"TestLoadImage: timeout",!1,t),Zf.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else jh(2);e.G=0,e.j&&e.j.va(t),jv(e),Iv(e)}function jv(e){e.G=0,e.I=-1,e.j&&(0==Yp(e.i).length&&0==e.l.length||(e.i.i.length=0,ld(e.l),e.l.length=0),e.j.ua())}function Vv(e,t,n){var r=function(e){return e instanceof kp?bp(e):new kp(e,void 0)}(n);if(""!=r.i)t&&xp(r,t+"."+r.i),Ep(r,r.m);else{var i=Zf.location;r=function(e,t,n,r){var i=new kp(null,void 0);return e&&wp(i,e),t&&xp(i,t),n&&Ep(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&gd(e.aa,(function(e,t){Ip(r,t,e)})),t=e.D,n=e.sa,t&&n&&Ip(r,t,n),Ip(r,"VER",e.ma),Nv(e,r),r}function Bv(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new sv(new tv({ib:!0})):new sv(e.qa)).L=e.H,t}function qv(){}function zv(){if(Id&&!(10<=Number(Ud)))throw Error("Environmental error: no available transport.")}function Kv(e,t){sh.call(this),this.g=new xv(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!fd(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!fd(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Gv(this)}function Hv(e){Qh.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Wv(){Yh.call(this),this.status=1}function Gv(e){this.g=e}(Kf=sv.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Gh.g(),this.C=this.u?Hh(this.u):Hh(Gh),this.g.onreadystatechange=nd(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void hv(this,a)}e=n||"";var i=new vp(this.headers);r&&pp(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=dv,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=Zf.FormData&&e instanceof Zf.FormData,!(0<=ud(fv,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{mv(this),0<this.B&&((this.K=function(e){return Id&&Md()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=nd(this.pa,this)):this.A=_h(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){hv(this,a)}},Kf.pa=function(){"undefined"!=typeof Gf&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ch(this,"timeout"),this.abort(8))},Kf.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,ch(this,"complete"),ch(this,"abort"),yv(this))},Kf.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),yv(this,!0)),sv.Z.M.call(this)},Kf.Fa=function(){this.s||(this.F||this.v||this.l?vv(this):this.cb())},Kf.cb=function(){vv(this)},Kf.ba=function(){try{return 2<gv(this)?this.g.status:-1}catch(zp){return-1}},Kf.ga=function(){try{return this.g?this.g.responseText:""}catch(zp){return""}},Kf.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),uv(t)}},Kf.Da=function(){return this.m},Kf.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(Kf=xv.prototype).ma=8,Kf.G=1,Kf.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},Kf.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new Jh(this,this.h,e,void 0),n=this.s;if(this.P&&(n?wd(n=kd(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Pv(this,t,r),Ip(i=bp(this.F),"RID",e),Ip(i,"CVER",22),this.D&&Ip(i,"X-HTTP-Session-Id",this.D),Nv(this,i),this.o&&n&&bv(i,this.o,n),Zp(this.i,t),this.Ra&&Ip(i,"TYPE","init"),this.ja?(Ip(i,"$req",r),Ip(i,"SID","null"),t.$=!0,rp(t,i,null)):rp(t,i,r),this.G=2}}else 3==this.G&&(e?Cv(this,e):0==this.l.length||Hp(this.i)||Cv(this))},Kf.Ga=function(){if(this.u=null,Dv(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Bh(nd(this.bb,this),e)}},Kf.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,jh(10),_v(this),Dv(this))},Kf.ab=function(){null!=this.v&&(this.v=null,_v(this),Ov(this),jh(19))},Kf.jb=function(e){e?(this.h.info("Successfully pinged google.com"),jh(2)):(this.h.info("Failed to ping google.com"),jh(1))},(Kf=qv.prototype).xa=function(){},Kf.wa=function(){},Kf.va=function(){},Kf.ua=function(){},Kf.Oa=function(){},zv.prototype.g=function(e,t){return new Kv(e,t)},id(Kv,sh),Kv.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),gh(nd(e.hb,e,t))),jh(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Vv(e,null,e.W),Sv(e)},Kv.prototype.close=function(){Ev(this.g)},Kv.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,Tv(this.g,t)}else this.v?((t={}).__data__=fh(e),Tv(this.g,t)):Tv(this.g,e)},Kv.prototype.M=function(){this.g.j=null,delete this.j,Ev(this.g),delete this.g,Kv.Z.M.call(this)},id(Hv,Qh),id(Wv,Yh),id(Gv,qv),Gv.prototype.xa=function(){ch(this.g,"a")},Gv.prototype.wa=function(e){ch(this.g,new Hv(e))},Gv.prototype.va=function(e){ch(this.g,new Wv(e))},Gv.prototype.ua=function(){ch(this.g,"b")},zv.prototype.createWebChannel=zv.prototype.g,Kv.prototype.send=Kv.prototype.u,Kv.prototype.open=Kv.prototype.m,Kv.prototype.close=Kv.prototype.close,qh.NO_ERROR=0,qh.TIMEOUT=8,qh.HTTP_ERROR=6,zh.COMPLETE="complete",Wh.EventType=Zh,Zh.OPEN="a",Zh.CLOSE="b",Zh.ERROR="c",Zh.MESSAGE="d",sh.prototype.listen=sh.prototype.N,sv.prototype.listenOnce=sv.prototype.O,sv.prototype.getLastError=sv.prototype.La,sv.prototype.getLastErrorCode=sv.prototype.Da,sv.prototype.getStatus=sv.prototype.ba,sv.prototype.getResponseJson=sv.prototype.Qa,sv.prototype.getResponseText=sv.prototype.ga,sv.prototype.send=sv.prototype.ea;var Zv=Wf.createWebChannelTransport=function(){return new zv},Qv=Wf.getStatEventTarget=function(){return Lh()},Yv=Wf.ErrorCode=qh,$v=Wf.EventType=zh,Jv=Wf.Event=Rh,Xv=Wf.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},ey=Wf.FetchXmlHttpFactory=tv,ty=Wf.WebChannel=Wh,ny=Wf.XhrIo=sv,ry="@firebase/firestore",iy=function(){function e(t){qe(this,e),this.uid=t}return Ke(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();iy.UNAUTHENTICATED=new iy(null),iy.GOOGLE_CREDENTIALS=new iy("google-credentials-uid"),iy.FIRST_PARTY=new iy("first-party-uid"),iy.MOCK_USER=new iy("mock-user");var ay="9.6.7",oy=new Pr("@firebase/firestore");function uy(){return oy.logLevel}function sy(e){if(oy.logLevel<=Er.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(fy);oy.debug.apply(oy,["Firestore (".concat(ay,"): ").concat(e)].concat(Be(i)))}}function cy(e){if(oy.logLevel<=Er.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(fy);oy.error.apply(oy,["Firestore (".concat(ay,"): ").concat(e)].concat(Be(i)))}}function ly(e){if(oy.logLevel<=Er.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(fy);oy.warn.apply(oy,["Firestore (".concat(ay,"): ").concat(e)].concat(Be(i)))}}function fy(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function dy(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(ay,") INTERNAL ASSERTION FAILED: ")+e;throw cy(t),new Error(t)}function hy(e,t){e||dy()}function py(e,t){return e}var vy={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},yy=function(e){Ot(n,e);var t=Ft(n);function n(e,r){var i;return qe(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return Ke(n)}(ar),my=Ke((function e(){var t=this;qe(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),gy=Ke((function e(t,n){qe(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),ky=function(){function e(){qe(this,e)}return Ke(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(iy.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),by=function(){function e(t){qe(this,e),this.token=t,this.changeListener=null}return Ke(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),wy=function(){function e(t){qe(this,e),this.t=t,this.currentUser=iy.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return Ke(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},o=new my;this.o=function(){n.i++,n.currentUser=n.u(),o.resolve(),o=new my,e.enqueueRetryable((function(){return i(n.currentUser)}))};var s=function(){var t=o;e.enqueueRetryable(a(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},c=function(e){sy("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),s()};this.t.onInit((function(e){return c(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?c(e):(sy("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new my)}}),0),s()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(sy("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(hy("string"==typeof n.accessToken),new gy(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return hy(null===e||"string"==typeof e),new iy(e)}}]),e}(),xy=Ke((function e(t,n,r){qe(this,e),this.type="FirstParty",this.user=iy.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),Ey=function(){function e(t,n,r){qe(this,e),this.h=t,this.l=n,this.m=r}return Ke(e,[{key:"getToken",value:function(){return Promise.resolve(new xy(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(iy.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),_y=Ke((function e(t){qe(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Iy=function(){function e(t){qe(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return Ke(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&sy("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,sy("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){sy("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):sy("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(hy("string"==typeof t.token),e.p=t.token,new _y(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),Ty=function(){function e(t,n){var r=this;qe(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.I(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return Ke(e,[{key:"I",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function Sy(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}Ty.A=-1;var Cy=function(){function e(){qe(this,e)}return Ke(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Sy(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Ny(e,t){return e<t?-1:e>t?1:0}function Py(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Ay(e){return e+"\0"}var Oy=function(){function e(t,n){if(qe(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new yy(vy.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new yy(vy.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new yy(vy.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new yy(vy.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return Ke(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Ny(this.nanoseconds,e.nanoseconds):Ny(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Ry=function(){function e(t){qe(this,e),this.timestamp=t}return Ke(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Oy(0,0))}}]),e}();function Dy(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ly(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function My(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Fy=function(){function e(t,n,r){qe(this,e),void 0===n?n=0:n>t.length&&dy(),void 0===r?r=t.length-n:r>t.length-n&&dy(),this.segments=t,this.offset=n,this.len=r}return Ke(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Uy=function(e){Ot(n,e);var t=Ft(n);function n(){return qe(this,n),t.apply(this,arguments)}return Ke(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new yy(vy.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,Be(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Fy),jy=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Vy=function(e){Ot(n,e);var t=Ft(n);function n(){return qe(this,n),t.apply(this,arguments)}return Ke(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return jy.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new yy(vy.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new yy(vy.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new yy(vy.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new yy(vy.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Fy),By=function(){function e(t){qe(this,e),this.fields=t,t.sort(Vy.comparator)}return Ke(e,[{key:"covers",value:function(e){var t,n=Bn(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Py(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}();var qy=function(e){function t(e){qe(this,t),this.binaryString=e}return Ke(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Ny(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();qy.EMPTY_BYTE_STRING=new qy("");var zy=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ky(e){if(hy(!!e),"string"==typeof e){var t=0,n=zy.exec(e);if(hy(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Hy(e.seconds),nanos:Hy(e.nanos)}}function Hy(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Wy(e){return"string"==typeof e?qy.fromBase64String(e):qy.fromUint8Array(e)}function Gy(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Zy(e){var t=e.mapValue.fields.__previous_value__;return Gy(t)?Zy(t):t}function Qy(e){var t=Ky(e.mapValue.fields.__local_write_time__.timestampValue);return new Oy(t.seconds,t.nanos)}var Yy=Ke((function e(t,n,r,i,a,o,u,s){qe(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),$y=function(){function e(t,n){qe(this,e),this.projectId=t,this.database=n||"(default)"}return Ke(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function Jy(e){return null==e}function Xy(e){return 0===e&&1/e==-1/0}function em(e){return"number"==typeof e&&Number.isInteger(e)&&!Xy(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var tm=function(){function e(t){qe(this,e),this.path=t}return Ke(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Uy.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Uy.fromString(t))}},{key:"fromName",value:function(t){return new e(Uy.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Uy.emptyPath())}},{key:"comparator",value:function(e,t){return Uy.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Uy(t.slice()))}}]),e}(),nm={mapValue:{fields:{__type__:{stringValue:"__max___"}}}};function rm(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Gy(e)?4:10:dy()}function im(e,t){if(e===t)return!0;var n=rm(e);if(n!==rm(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Qy(e).isEqual(Qy(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Ky(e.timestampValue),r=Ky(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Wy(e.bytesValue).isEqual(Wy(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Hy(e.geoPointValue.latitude)===Hy(t.geoPointValue.latitude)&&Hy(e.geoPointValue.longitude)===Hy(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Hy(e.integerValue)===Hy(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Hy(e.doubleValue),r=Hy(t.doubleValue);return n===r?Xy(n)===Xy(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Py(e.arrayValue.values||[],t.arrayValue.values||[],im);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Dy(n)!==Dy(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!im(n[i],r[i])))return!1;return!0}(e,t);default:return dy()}}function am(e,t){return void 0!==(e.values||[]).find((function(e){return im(e,t)}))}function om(e,t){if(e===t)return 0;var n=rm(e),r=rm(t);if(n!==r)return Ny(n,r);switch(n){case 0:return 0;case 1:return Ny(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Hy(e.integerValue||e.doubleValue),r=Hy(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return um(e.timestampValue,t.timestampValue);case 4:return um(Qy(e),Qy(t));case 5:return Ny(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Wy(e),r=Wy(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Ny(n[i],r[i]);if(0!==a)return a}return Ny(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Ny(Hy(e.latitude),Hy(t.latitude));return 0!==n?n:Ny(Hy(e.longitude),Hy(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=om(n[i],r[i]);if(a)return a}return Ny(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Ny(r[o],a[o]);if(0!==u)return u;var s=om(n[r[o]],i[a[o]]);if(0!==s)return s}return Ny(r.length,a.length)}(e.mapValue,t.mapValue);default:throw dy()}}function um(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Ny(e,t);var n=Ky(e),r=Ky(t),i=Ny(n.seconds,r.seconds);return 0!==i?i:Ny(n.nanos,r.nanos)}function sm(e){return cm(e)}function cm(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Ky(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Wy(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,tm.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=Bn(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=cm(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=Bn(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(cm(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):dy();var t,n}function lm(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function fm(e){return!!e&&"integerValue"in e}function dm(e){return!!e&&"arrayValue"in e}function hm(e){return!!e&&"nullValue"in e}function pm(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function vm(e){return!!e&&"mapValue"in e}function ym(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Ly(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=ym(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=ym(e.arrayValue.values[r]);return n}return Object.assign({},e)}var mm=function(){function e(t){qe(this,e),this.value=t}return Ke(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!vm(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ym(t)}},{key:"setAll",value:function(e){var t=this,n=Vy.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=ym(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());vm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return im(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];vm(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Ly(t,(function(t,n){return e[t]=n}));var r,i=Bn(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(ym(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function gm(e){var t=[];return Ly(e.fields,(function(e,n){var r=new Vy([e]);if(vm(n)){var i=gm(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=Bn(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new By(t)}var km=function(){function e(t,n,r,i,a,o){qe(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return Ke(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=mm.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=mm.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Ry.min(),Ry.min(),mm.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,Ry.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Ry.min(),mm.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Ry.min(),mm.empty(),2)}}]),e}(),bm=Ke((function e(t,n,r,i){qe(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));bm.UNKNOWN_ID=-1;var wm=Ke((function e(t,n){qe(this,e),this.fieldPath=t,this.kind=n})),xm=function(){function e(t,n){qe(this,e),this.sequenceNumber=t,this.offset=n}return Ke(e,null,[{key:"empty",value:function(){return new e(0,Em.min())}}]),e}(),Em=function(){function e(t,n,r){qe(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return Ke(e,null,[{key:"min",value:function(){return new e(Ry.min(),tm.empty(),-1)}}]),e}(),_m=Ke((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;qe(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.P=null}));function Im(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new _m(e,t,n,r,i,a,o)}function Tm(e){var t=py(e);if(null===t.P){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+sm(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Jy(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return sm(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return sm(e)})).join(",")),t.P=n}return t.P}function Sm(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Vm(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!im(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!qm(e.startAt,t.startAt)&&qm(e.endAt,t.endAt)}function Cm(e){return tm.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var Nm=function(e){Ot(n,e);var t=Ft(n);function n(e,r,i){var a;return qe(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return Ke(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.V(om(t,this.value)):null!==t&&rm(this.value)===rm(t)&&this.V(om(t,this.value))}},{key:"V",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return dy()}}},{key:"S",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.v(e,t,r):new Pm(e,t,r):"array-contains"===t?new Dm(e,r):"in"===t?new Lm(e,r):"not-in"===t?new Mm(e,r):"array-contains-any"===t?new Fm(e,r):new n(e,t,r)}},{key:"v",value:function(e,t,n){return"in"===t?new Am(e,n):new Om(e,n)}}]),n}(function(){return Ke((function e(){qe(this,e)}))}()),Pm=function(e){Ot(n,e);var t=Ft(n);function n(e,r,i){var a;return qe(this,n),(a=t.call(this,e,r,i)).key=tm.fromName(i.referenceValue),a}return Ke(n,[{key:"matches",value:function(e){var t=tm.comparator(e.key,this.key);return this.V(t)}}]),n}(Nm),Am=function(e){Ot(n,e);var t=Ft(n);function n(e,r){var i;return qe(this,n),(i=t.call(this,e,"in",r)).keys=Rm("in",r),i}return Ke(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Nm),Om=function(e){Ot(n,e);var t=Ft(n);function n(e,r){var i;return qe(this,n),(i=t.call(this,e,"not-in",r)).keys=Rm("not-in",r),i}return Ke(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Nm);function Rm(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return tm.fromName(e.referenceValue)}))}var Dm=function(e){Ot(n,e);var t=Ft(n);function n(e,r){return qe(this,n),t.call(this,e,"array-contains",r)}return Ke(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return dm(t)&&am(t.arrayValue,this.value)}}]),n}(Nm),Lm=function(e){Ot(n,e);var t=Ft(n);function n(e,r){return qe(this,n),t.call(this,e,"in",r)}return Ke(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&am(this.value.arrayValue,t)}}]),n}(Nm),Mm=function(e){Ot(n,e);var t=Ft(n);function n(e,r){return qe(this,n),t.call(this,e,"not-in",r)}return Ke(n,[{key:"matches",value:function(e){if(am(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!am(this.value.arrayValue,t)}}]),n}(Nm),Fm=function(e){Ot(n,e);var t=Ft(n);function n(e,r){return qe(this,n),t.call(this,e,"array-contains-any",r)}return Ke(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!dm(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return am(t.value.arrayValue,e)}))}}]),n}(Nm),Um=Ke((function e(t,n){qe(this,e),this.position=t,this.inclusive=n})),jm=Ke((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";qe(this,e),this.field=t,this.dir=n}));function Vm(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Bm(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?tm.comparator(tm.fromName(o.referenceValue),n.key):om(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function qm(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!im(e.position[n],t.position[n]))return!1;return!0}var zm=Ke((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;qe(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.D=null,this.C=null,this.startAt,this.endAt}));function Km(e,t,n,r,i,a,o,u){return new zm(e,t,n,r,i,a,o,u)}function Hm(e){return new zm(e)}function Wm(e){return!Jy(e.limit)&&"F"===e.limitType}function Gm(e){return!Jy(e.limit)&&"L"===e.limitType}function Zm(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Qm(e){var t,n=Bn(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.S())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function Ym(e){return null!==e.collectionGroup}function $m(e){var t=py(e);if(null===t.D){t.D=[];var n=Qm(t),r=Zm(t);if(null!==n&&null===r)n.isKeyField()||t.D.push(new jm(n)),t.D.push(new jm(Vy.keyField(),"asc"));else{var i,a=!1,o=Bn(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.D.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new jm(Vy.keyField(),s))}}}return t.D}function Jm(e){var t=py(e);if(!t.C)if("F"===t.limitType)t.C=Im(t.path,t.collectionGroup,$m(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=Bn($m(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new jm(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new Um(t.endAt.position,!t.endAt.inclusive):null,s=t.startAt?new Um(t.startAt.position,!t.startAt.inclusive):null;t.C=Im(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.C}function Xm(e,t,n){return new zm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function eg(e,t){return Sm(Jm(e),Jm(t))&&e.limitType===t.limitType}function tg(e){return"".concat(Tm(Jm(e)),"|lt:").concat(e.limitType)}function ng(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(sm(t.value));var t})).join(", "),"]")),Jy(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return sm(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return sm(e)})).join(",")),"Target(".concat(t,")")}(Jm(e)),"; limitType=").concat(e.limitType,")")}function rg(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):tm.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=Bn(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=Bn(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Bm(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,$m(e),t))&&!(e.endAt&&!function(e,t,n){var r=Bm(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,$m(e),t))}(e,t)}function ig(e){return function(t,n){var r,i=!1,a=Bn($m(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=ag(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function ag(e,t,n){var r=e.field.isKeyField()?tm.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?om(r,i):dy()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return dy()}}function og(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xy(t)?"-0":t}}function ug(e){return{integerValue:""+e}}function sg(e,t){return em(t)?ug(t):og(e,t)}var cg=Ke((function e(){qe(this,e),this._=void 0}));function lg(e,t,n){return e instanceof hg?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof pg?vg(e,t):e instanceof yg?mg(e,t):function(e,t){var n=dg(e,t),r=kg(n)+kg(e.k);return fm(n)&&fm(e.k)?ug(r):og(e.O,r)}(e,t)}function fg(e,t,n){return e instanceof pg?vg(e,t):e instanceof yg?mg(e,t):n}function dg(e,t){return e instanceof gg?fm(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var hg=function(e){Ot(n,e);var t=Ft(n);function n(){return qe(this,n),t.apply(this,arguments)}return Ke(n)}(cg),pg=function(e){Ot(n,e);var t=Ft(n);function n(e){var r;return qe(this,n),(r=t.call(this)).elements=e,r}return Ke(n)}(cg);function vg(e,t){var n,r=bg(t),i=Bn(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return im(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var yg=function(e){Ot(n,e);var t=Ft(n);function n(e){var r;return qe(this,n),(r=t.call(this)).elements=e,r}return Ke(n)}(cg);function mg(e,t){var n,r=bg(t),i=Bn(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!im(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var gg=function(e){Ot(n,e);var t=Ft(n);function n(e,r){var i;return qe(this,n),(i=t.call(this)).O=e,i.k=r,i}return Ke(n)}(cg);function kg(e){return Hy(e.integerValue||e.doubleValue)}function bg(e){return dm(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var wg=Ke((function e(t,n){qe(this,e),this.field=t,this.transform=n}));var xg=Ke((function e(t,n){qe(this,e),this.version=t,this.transformResults=n})),Eg=function(){function e(t,n){qe(this,e),this.updateTime=t,this.exists=n}return Ke(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function _g(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Ig=Ke((function e(){qe(this,e)}));function Tg(e,t,n){e instanceof Ag?function(e,t,n){var r=e.value.clone(),i=Dg(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Og?function(e,t,n){if(_g(e.precondition,t)){var r=Dg(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Rg(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Sg(e,t,n){e instanceof Ag?function(e,t,n){if(_g(e.precondition,t)){var r=e.value.clone(),i=Lg(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(Pg(t),r).setHasLocalMutations()}}(e,t,n):e instanceof Og?function(e,t,n){if(_g(e.precondition,t)){var r=Lg(e.fieldTransforms,n,t),i=t.data;i.setAll(Rg(e)),i.setAll(r),t.convertToFoundDocument(Pg(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){_g(e.precondition,t)&&t.convertToNoDocument(Ry.min())}(e,t)}function Cg(e,t){var n,r=null,i=Bn(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=dg(a.transform,o||null);null!=u&&(null==r&&(r=mm.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function Ng(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Py(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof pg&&t instanceof pg||e instanceof yg&&t instanceof yg?Py(e.elements,t.elements,im):e instanceof gg&&t instanceof gg?im(e.k,t.k):e instanceof hg&&t instanceof hg}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function Pg(e){return e.isFoundDocument()?e.version:Ry.min()}var Ag=function(e){Ot(n,e);var t=Ft(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return qe(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return Ke(n)}(Ig),Og=function(e){Ot(n,e);var t=Ft(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return qe(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return Ke(n)}(Ig);function Rg(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Dg(e,t,n){var r=new Map;hy(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,fg(o,u,n[i]))}return r}function Lg(e,t,n){var r,i=new Map,a=Bn(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,lg(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Mg,Fg,Ug=function(e){Ot(n,e);var t=Ft(n);function n(e,r){var i;return qe(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return Ke(n)}(Ig),jg=function(e){Ot(n,e);var t=Ft(n);function n(e,r){var i;return qe(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return Ke(n)}(Ig),Vg=Ke((function e(t){qe(this,e),this.count=t}));function Bg(e){switch(e){default:return dy();case vy.CANCELLED:case vy.UNKNOWN:case vy.DEADLINE_EXCEEDED:case vy.RESOURCE_EXHAUSTED:case vy.INTERNAL:case vy.UNAVAILABLE:case vy.UNAUTHENTICATED:return!1;case vy.INVALID_ARGUMENT:case vy.NOT_FOUND:case vy.ALREADY_EXISTS:case vy.PERMISSION_DENIED:case vy.FAILED_PRECONDITION:case vy.ABORTED:case vy.OUT_OF_RANGE:case vy.UNIMPLEMENTED:case vy.DATA_LOSS:return!0}}function qg(e){if(void 0===e)return cy("GRPC error has no .code"),vy.UNKNOWN;switch(e){case Mg.OK:return vy.OK;case Mg.CANCELLED:return vy.CANCELLED;case Mg.UNKNOWN:return vy.UNKNOWN;case Mg.DEADLINE_EXCEEDED:return vy.DEADLINE_EXCEEDED;case Mg.RESOURCE_EXHAUSTED:return vy.RESOURCE_EXHAUSTED;case Mg.INTERNAL:return vy.INTERNAL;case Mg.UNAVAILABLE:return vy.UNAVAILABLE;case Mg.UNAUTHENTICATED:return vy.UNAUTHENTICATED;case Mg.INVALID_ARGUMENT:return vy.INVALID_ARGUMENT;case Mg.NOT_FOUND:return vy.NOT_FOUND;case Mg.ALREADY_EXISTS:return vy.ALREADY_EXISTS;case Mg.PERMISSION_DENIED:return vy.PERMISSION_DENIED;case Mg.FAILED_PRECONDITION:return vy.FAILED_PRECONDITION;case Mg.ABORTED:return vy.ABORTED;case Mg.OUT_OF_RANGE:return vy.OUT_OF_RANGE;case Mg.UNIMPLEMENTED:return vy.UNIMPLEMENTED;case Mg.DATA_LOSS:return vy.DATA_LOSS;default:return dy()}}(Fg=Mg||(Mg={}))[Fg.OK=0]="OK",Fg[Fg.CANCELLED=1]="CANCELLED",Fg[Fg.UNKNOWN=2]="UNKNOWN",Fg[Fg.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fg[Fg.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fg[Fg.NOT_FOUND=5]="NOT_FOUND",Fg[Fg.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fg[Fg.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fg[Fg.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fg[Fg.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fg[Fg.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fg[Fg.ABORTED=10]="ABORTED",Fg[Fg.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fg[Fg.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fg[Fg.INTERNAL=13]="INTERNAL",Fg[Fg.UNAVAILABLE=14]="UNAVAILABLE",Fg[Fg.DATA_LOSS=15]="DATA_LOSS";var zg=function(){function e(t,n){qe(this,e),this.comparator=t,this.root=n||Hg.EMPTY}return Ke(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Hg.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Hg.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Kg(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Kg(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Kg(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Kg(this.root,e,this.comparator,!0)}}]),e}(),Kg=function(){function e(t,n,r,i){qe(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return Ke(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Hg=function(){function e(t,n,r,i,a){qe(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return Ke(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw dy();if(this.right.isRed())throw dy();var e=this.left.check();if(e!==this.right.check())throw dy();return e+(this.isRed()?0:1)}}]),e}();Hg.EMPTY=null,Hg.RED=!0,Hg.BLACK=!1,Hg.EMPTY=new(function(){function e(){qe(this,e),this.size=0}return Ke(e,[{key:"key",get:function(){throw dy()}},{key:"value",get:function(){throw dy()}},{key:"color",get:function(){throw dy()}},{key:"left",get:function(){throw dy()}},{key:"right",get:function(){throw dy()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Hg(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Wg=function(){function e(t){qe(this,e),this.comparator=t,this.data=new zg(this.comparator)}return Ke(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Gg(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Gg(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Gg=function(){function e(t){qe(this,e),this.iter=t}return Ke(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Zg(e){return e.hasNext()?e.getNext():void 0}var Qg=new zg(tm.comparator);function Yg(){return Qg}var $g=new zg(tm.comparator);function Jg(){return $g}var Xg=new zg(tm.comparator),ek=new Wg(tm.comparator);function tk(){for(var e=ek,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var nk=new Wg(Ny);function rk(){return nk}var ik=function(){function e(t,n,r,i,a){qe(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return Ke(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,ak.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(Ry.min(),r,rk(),Yg(),tk())}}]),e}(),ak=function(){function e(t,n,r,i,a){qe(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return Ke(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(qy.EMPTY_BYTE_STRING,n,tk(),tk(),tk())}}]),e}(),ok=Ke((function e(t,n,r,i){qe(this,e),this.M=t,this.removedTargetIds=n,this.key=r,this.$=i})),uk=Ke((function e(t,n){qe(this,e),this.targetId=t,this.F=n})),sk=Ke((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:qy.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;qe(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),ck=function(){function e(){qe(this,e),this.B=0,this.L=dk(),this.U=qy.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}return Ke(e,[{key:"current",get:function(){return this.q}},{key:"resumeToken",get:function(){return this.U}},{key:"G",get:function(){return 0!==this.B}},{key:"j",get:function(){return this.K}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}},{key:"H",value:function(){var e=tk(),t=tk(),n=tk();return this.L.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:dy()}})),new ak(this.U,this.q,e,t,n)}},{key:"J",value:function(){this.K=!1,this.L=dk()}},{key:"Y",value:function(e,t){this.K=!0,this.L=this.L.insert(e,t)}},{key:"X",value:function(e){this.K=!0,this.L=this.L.remove(e)}},{key:"Z",value:function(){this.B+=1}},{key:"tt",value:function(){this.B-=1}},{key:"et",value:function(){this.K=!0,this.q=!0}}]),e}(),lk=function(){function e(t){qe(this,e),this.nt=t,this.st=new Map,this.it=Yg(),this.rt=fk(),this.ot=new Wg(Ny)}return Ke(e,[{key:"ct",value:function(e){var t,n=Bn(e.M);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.$&&e.$.isFoundDocument()?this.ut(r,e.$):this.at(r,e.key,e.$)}}catch(u){n.e(u)}finally{n.f()}var i,a=Bn(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.at(o,e.key,e.$)}}catch(u){a.e(u)}finally{a.f()}}},{key:"ht",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.lt(n);switch(e.state){case 0:t.ft(n)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||t.removeTarget(n);break;case 3:t.ft(n)&&(r.et(),r.W(e.resumeToken));break;case 4:t.ft(n)&&(t.dt(n),r.W(e.resumeToken));break;default:dy()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((function(e,r){n.ft(r)&&t(r)}))}},{key:"_t",value:function(e){var t=e.targetId,n=e.F.count,r=this.wt(t);if(r){var i=r.target;if(Cm(i))if(0===n){var a=new tm(i.path);this.at(t,a,km.newNoDocument(a,Ry.min()))}else hy(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}},{key:"yt",value:function(e){var t=this,n=new Map;this.st.forEach((function(r,i){var a=t.wt(i);if(a){if(r.current&&Cm(a.target)){var o=new tm(a.target.path);null!==t.it.get(o)||t.It(i,o)||t.at(i,o,km.newNoDocument(o,e))}r.j&&(n.set(i,r.H()),r.J())}}));var r=tk();this.rt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.it.forEach((function(t,n){return n.setReadTime(e)}));var i=new ik(e,n,this.ot,this.it,r);return this.it=Yg(),this.rt=fk(),this.ot=new Wg(Ny),i}},{key:"ut",value:function(e,t){if(this.ft(e)){var n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Et(t.key).add(e))}}},{key:"at",value:function(e,t,n){if(this.ft(e)){var r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Et(t).delete(e)),n&&(this.it=this.it.insert(t,n))}}},{key:"removeTarget",value:function(e){this.st.delete(e)}},{key:"gt",value:function(e){var t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Z",value:function(e){this.lt(e).Z()}},{key:"lt",value:function(e){var t=this.st.get(e);return t||(t=new ck,this.st.set(e,t)),t}},{key:"Et",value:function(e){var t=this.rt.get(e);return t||(t=new Wg(Ny),this.rt=this.rt.insert(e,t)),t}},{key:"ft",value:function(e){var t=null!==this.wt(e);return t||sy("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.st.get(e);return t&&t.G?null:this.nt.Tt(e)}},{key:"dt",value:function(e){var t=this;this.st.set(e,new ck),this.nt.getRemoteKeysForTarget(e).forEach((function(n){t.at(e,n,null)}))}},{key:"It",value:function(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}]),e}();function fk(){return new zg(tm.comparator)}function dk(){return new zg(tm.comparator)}var hk={asc:"ASCENDING",desc:"DESCENDING"},pk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vk=Ke((function e(t,n){qe(this,e),this.databaseId=t,this.N=n}));function yk(e,t){return e.N?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function mk(e,t){return e.N?t.toBase64():t.toUint8Array()}function gk(e,t){return yk(e,t.toTimestamp())}function kk(e){return hy(!!e),Ry.fromTimestamp(function(e){var t=Ky(e);return new Oy(t.seconds,t.nanos)}(e))}function bk(e,t){return function(e){return new Uy(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function wk(e){var t=Uy.fromString(e);return hy(Kk(t)),t}function xk(e,t){return bk(e.databaseId,t.path)}function Ek(e,t){var n=wk(t);if(n.get(1)!==e.databaseId.projectId)throw new yy(vy.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new yy(vy.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new tm(Sk(n))}function _k(e,t){return bk(e.databaseId,t)}function Ik(e){var t=wk(e);return 4===t.length?Uy.emptyPath():Sk(t)}function Tk(e){return new Uy(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Sk(e){return hy(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Ck(e,t,n){return{name:xk(e,t),fields:n.value.mapValue.fields}}function Nk(e,t,n){var r=Ek(e,t.name),i=kk(t.updateTime),a=new mm({mapValue:{fields:t.fields}}),o=km.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Pk(e,t){return"found"in t?function(e,t){hy(!!t.found),t.found.name,t.found.updateTime;var n=Ek(e,t.found.name),r=kk(t.found.updateTime),i=new mm({mapValue:{fields:t.found.fields}});return km.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){hy(!!t.missing),hy(!!t.readTime);var n=Ek(e,t.missing),r=kk(t.readTime);return km.newNoDocument(n,r)}(e,t):dy()}function Ak(e,t){var n;if(t instanceof Ag)n={update:Ck(e,t.key,t.value)};else if(t instanceof Ug)n={delete:xk(e,t.key)};else if(t instanceof Og)n={update:Ck(e,t.key,t.data),updateMask:zk(t.fieldMask)};else{if(!(t instanceof jg))return dy();n={verify:xk(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof hg)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof pg)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof yg)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof gg)return{fieldPath:t.field.canonicalString(),increment:n.k};throw dy()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:gk(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:dy()}(e,t.precondition)),n}function Ok(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Eg.updateTime(kk(e.updateTime)):void 0!==e.exists?Eg.exists(e.exists):Eg.none()}(t.currentDocument):Eg.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)hy("REQUEST_TIME"===t.setToServerValue),n=new hg;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new pg(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new yg(i)}else"increment"in t?n=new gg(e,t.increment):dy();var a=Vy.fromServerFormat(t.fieldPath);return new wg(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Ek(e,t.update.name),a=new mm({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new By(t.map((function(e){return Vy.fromServerFormat(e)})))}(t.updateMask);return new Og(i,a,o,n,r)}return new Ag(i,a,n,r)}if(t.delete){var u=Ek(e,t.delete);return new Ug(u,n)}if(t.verify){var s=Ek(e,t.verify);return new jg(s,n)}return dy()}function Rk(e,t){return{documents:[_k(e,t.path)]}}function Dk(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=_k(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=_k(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(pm(e.value))return{unaryFilter:{field:jk(e.field),op:"IS_NAN"}};if(hm(e.value))return{unaryFilter:{field:jk(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(pm(e.value))return{unaryFilter:{field:jk(e.field),op:"IS_NOT_NAN"}};if(hm(e.value))return{unaryFilter:{field:jk(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jk(e.field),op:Uk(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:jk(e.field),direction:Fk(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.N||Jy(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Lk(e){var t=Ik(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){hy(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=Mk(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new jm(Vk(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return Jy(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Um(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Um(n,t)}(n.endAt)),Km(t,i,u,o,s,"F",c,l)}function Mk(e){return e?void 0!==e.unaryFilter?[qk(e)]:void 0!==e.fieldFilter?[Bk(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return Mk(e)})).reduce((function(e,t){return e.concat(t)})):dy():[]}function Fk(e){return hk[e]}function Uk(e){return pk[e]}function jk(e){return{fieldPath:e.canonicalString()}}function Vk(e){return Vy.fromServerFormat(e.fieldPath)}function Bk(e){return Nm.create(Vk(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return dy()}}(e.fieldFilter.op),e.fieldFilter.value)}function qk(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Vk(e.unaryFilter.field);return Nm.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Vk(e.unaryFilter.field);return Nm.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Vk(e.unaryFilter.field);return Nm.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Vk(e.unaryFilter.field);return Nm.create(i,"!=",{nullValue:"NULL_VALUE"});default:return dy()}}function zk(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Kk(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function Hk(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Gk(t)),t=Wk(e.get(n),t);return Gk(t)}function Wk(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Gk(e){return e+"\x01\x01"}function Zk(e){var t=e.length;if(hy(t>=2),2===t)return hy("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Uy.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&dy(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:dy()}a=o+2}return new Uy(r)}var Qk=Ke((function e(t,n){qe(this,e),this.seconds=t,this.nanoseconds=n})),Yk=Ke((function e(t,n,r){qe(this,e),this.ownerId=t,this.allowTabSynchronization=n,this.leaseTimestampMs=r}));Yk.store="owner",Yk.key="owner";var $k=Ke((function e(t,n,r){qe(this,e),this.userId=t,this.lastAcknowledgedBatchId=n,this.lastStreamToken=r}));$k.store="mutationQueues",$k.keyPath="userId";var Jk=Ke((function e(t,n,r,i,a){qe(this,e),this.userId=t,this.batchId=n,this.localWriteTimeMs=r,this.baseMutations=i,this.mutations=a}));Jk.store="mutations",Jk.keyPath="batchId",Jk.userMutationsIndex="userMutationsIndex",Jk.userMutationsKeyPath=["userId","batchId"];var Xk=function(){function e(){qe(this,e)}return Ke(e,null,[{key:"prefixForUser",value:function(e){return[e]}},{key:"prefixForPath",value:function(e,t){return[e,Hk(t)]}},{key:"key",value:function(e,t,n){return[e,Hk(t),n]}}]),e}();Xk.store="documentMutations",Xk.PLACEHOLDER=new Xk;var eb=Ke((function e(t,n){qe(this,e),this.path=t,this.readTime=n})),tb=Ke((function e(t,n){qe(this,e),this.path=t,this.version=n})),nb=Ke((function e(t,n,r,i,a,o){qe(this,e),this.unknownDocument=t,this.noDocument=n,this.document=r,this.hasCommittedMutations=i,this.readTime=a,this.parentPath=o}));nb.store="remoteDocuments",nb.readTimeIndex="readTimeIndex",nb.readTimeIndexPath="readTime",nb.collectionReadTimeIndex="collectionReadTimeIndex",nb.collectionReadTimeIndexPath=["parentPath","readTime"];var rb=Ke((function e(t){qe(this,e),this.byteSize=t}));rb.store="remoteDocumentGlobal",rb.key="remoteDocumentGlobalKey";var ib=Ke((function e(t,n,r,i,a,o,u){qe(this,e),this.targetId=t,this.canonicalId=n,this.readTime=r,this.resumeToken=i,this.lastListenSequenceNumber=a,this.lastLimboFreeSnapshotVersion=o,this.query=u}));ib.store="targets",ib.keyPath="targetId",ib.queryTargetsIndexName="queryTargetsIndex",ib.queryTargetsKeyPath=["canonicalId","targetId"];var ab=Ke((function e(t,n,r){qe(this,e),this.targetId=t,this.path=n,this.sequenceNumber=r}));ab.store="targetDocuments",ab.keyPath=["targetId","path"],ab.documentTargetsIndex="documentTargetsIndex",ab.documentTargetsKeyPath=["path","targetId"];var ob=Ke((function e(t,n,r,i){qe(this,e),this.highestTargetId=t,this.highestListenSequenceNumber=n,this.lastRemoteSnapshotVersion=r,this.targetCount=i}));ob.key="targetGlobalKey",ob.store="targetGlobal";var ub=Ke((function e(t,n){qe(this,e),this.collectionId=t,this.parent=n}));ub.store="collectionParents",ub.keyPath=["collectionId","parent"];var sb=Ke((function e(t,n,r,i){qe(this,e),this.clientId=t,this.updateTimeMs=n,this.networkEnabled=r,this.inForeground=i}));sb.store="clientMetadata",sb.keyPath="clientId";var cb=Ke((function e(t,n,r){qe(this,e),this.bundleId=t,this.createTime=n,this.version=r}));cb.store="bundles",cb.keyPath="bundleId";var lb=Ke((function e(t,n,r){qe(this,e),this.name=t,this.readTime=n,this.bundledQuery=r}));lb.store="namedQueries",lb.keyPath="name";var fb=Ke((function e(t,n,r){qe(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r}));fb.store="indexConfiguration",fb.keyPath="indexId",fb.collectionGroupIndex="collectionGroupIndex",fb.collectionGroupIndexPath="collectionGroup";var db=Ke((function e(t,n,r,i,a,o){qe(this,e),this.indexId=t,this.uid=n,this.sequenceNumber=r,this.readTime=i,this.documentKey=a,this.largestBatchId=o}));db.store="indexState",db.keyPath=["indexId","uid"],db.sequenceNumberIndex="sequenceNumberIndex",db.sequenceNumberIndexPath=["uid","sequenceNumber"];var hb=Ke((function e(t,n,r,i,a){qe(this,e),this.indexId=t,this.uid=n,this.arrayValue=r,this.directionalValue=i,this.documentKey=a}));hb.store="indexEntries",hb.keyPath=["indexId","uid","arrayValue","directionalValue","documentKey"],hb.documentKeyIndex="documentKeyIndex",hb.documentKeyIndexPath=["indexId","uid","documentKey"];var pb=Ke((function e(t,n,r,i,a,o){qe(this,e),this.userId=t,this.collectionPath=n,this.documentId=r,this.collectionGroup=i,this.largestBatchId=a,this.overlayMutation=o}));pb.store="documentOverlays",pb.keyPath=["userId","collectionPath","documentId"],pb.collectionPathOverlayIndex="collectionPathOverlayIndex",pb.collectionPathOverlayIndexPath=["userId","collectionPath","largestBatchId"],pb.collectionGroupOverlayIndex="collectionGroupOverlayIndex",pb.collectionGroupOverlayIndexPath=["userId","collectionGroup","largestBatchId"];var vb=[$k.store,Jk.store,Xk.store,nb.store,ib.store,Yk.store,ob.store,ab.store].concat([sb.store]).concat([rb.store]).concat([ub.store]).concat([cb.store,lb.store]),yb=[].concat(Be(vb),[pb.store]),mb=[].concat(Be(yb),[fb.store,db.store,hb.store]),gb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",kb=function(){function e(){qe(this,e),this.onCommittedListeners=[]}return Ke(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),bb=function(){function e(t){var n=this;qe(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return Ke(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&dy(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=Bn(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}}]),e}(),wb=function(){function e(t,n){var r=this;qe(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.At=new my,this.transaction.oncomplete=function(){r.At.resolve()},this.transaction.onabort=function(){n.error?r.At.reject(new _b(t,n.error)):r.At.resolve()},this.transaction.onerror=function(e){var n=Nb(e.target.error);r.At.reject(new _b(t,n))}}return Ke(e,[{key:"Rt",get:function(){return this.At.promise}},{key:"abort",value:function(e){e&&this.At.reject(e),this.aborted||(sy("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"Pt",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Tb(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new _b(n,t)}}}]),e}(),xb=function(){function e(t,n,r){qe(this,e),this.name=t,this.version=n,this.bt=r,12.2===e.vt(Jn())&&cy("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return Ke(e,[{key:"xt",value:function(){var e=a(u().mark((function e(t){var n=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return sy("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new _b(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new yy(vy.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new yy(vy.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new _b(t,n))},i.onupgradeneeded=function(e){sy("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.bt.kt(t,i.transaction,e.oldVersion,n.version).next((function(){sy("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.Ot&&(this.db.onversionchange=function(e){return n.Ot(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Mt",value:function(e){this.Ot=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=a(u().mark((function e(t,n,r,i){var a,o,s,c,l=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(u().mark((function e(){var n,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.xt(t);case 2:return l.db=e.sent,n=wb.open(l.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.Pt(),e})).catch((function(e){return n.abort(e),bb.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.Rt;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(s=e.t0)){e.next=8;break}return e.abrupt("return",s.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),c="FirebaseError"!==e.t1.name&&o<3,sy("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",c),this.close(),c){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return sy("SimpleDb","Removing database:",e),Sb(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"Vt",value:function(){if(!ir())return!1;if(e.St())return!0;var t=Jn(),n=e.vt(t),r=0<n&&n<10,i=e.Dt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"St",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyCrAsOm8CoM_wpRVmpbnvntoFWH_lTNglQ",REACT_APP_FIREBASE_APP_ID:"1:919775852581:web:4872e29c8a6b5d2b35e7cc",REACT_APP_FIREBASE_AUTH_DOMAIN:"mask-detection-970fc.firebaseapp.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"919775852581",REACT_APP_FIREBASE_PROJECT_ID:"mask-detection-970fc",REACT_APP_FIREBASE_STORAGE_BUCKET:"mask-detection-970fc.appspot.com"})||void 0===e?void 0:e.Ct)}},{key:"Nt",value:function(e,t){return e.store(t)}},{key:"vt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Dt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Eb=function(){function e(t){qe(this,e),this.$t=t,this.Ft=!1,this.Bt=null}return Ke(e,[{key:"isDone",get:function(){return this.Ft}},{key:"Lt",get:function(){return this.Bt}},{key:"cursor",set:function(e){this.$t=e}},{key:"done",value:function(){this.Ft=!0}},{key:"Ut",value:function(e){this.Bt=e}},{key:"delete",value:function(){return Sb(this.$t.delete())}}]),e}(),_b=function(e){Ot(n,e);var t=Ft(n);function n(e,r){var i;return qe(this,n),(i=t.call(this,vy.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return Ke(n)}(yy);function Ib(e){return"IndexedDbTransactionError"===e.name}var Tb=function(){function e(t){qe(this,e),this.store=t}return Ke(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(sy("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(sy("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Sb(n)}},{key:"add",value:function(e){return sy("SimpleDb","ADD",this.store.name,e,e),Sb(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Sb(this.store.get(e)).next((function(n){return void 0===n&&(n=null),sy("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return sy("SimpleDb","DELETE",this.store.name,e),Sb(this.store.delete(e))}},{key:"count",value:function(){return sy("SimpleDb","COUNT",this.store.name),Sb(this.store.count())}},{key:"qt",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.Kt(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new bb((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"Gt",value:function(e,t){sy("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.jt=!1;var r=this.cursor(n);return this.Kt(r,(function(e,t,n){return n.delete()}))}},{key:"Qt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Kt(r,t)}},{key:"Wt",value:function(e){var t=this.cursor({});return new bb((function(n,r){t.onerror=function(e){var t=Nb(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"Kt",value:function(e,t){var n=[];return new bb((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Eb(i),o=t(i.primaryKey,i.value,a);if(o instanceof bb){var u=o.catch((function(e){return a.done(),bb.reject(e)}));n.push(u)}a.isDone?r():null===a.Lt?i.continue():i.continue(a.Lt)}else r()}})).next((function(){return bb.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.jt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Sb(e){return new bb((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Nb(e.target.error);n(t)}}))}var Cb=!1;function Nb(e){var t=xb.vt(Jn());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new yy("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Cb||(Cb=!0,setTimeout((function(){throw r}),0)),r}}return e}var Pb=function(e){Ot(n,e);var t=Ft(n);function n(e,r){var i;return qe(this,n),(i=t.call(this)).zt=e,i.currentSequenceNumber=r,i}return Ke(n)}(kb);function Ab(e,t){var n=py(e);return xb.Nt(n.zt,t)}var Ob=function(){function e(t,n,r,i){qe(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return Ke(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Tg(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=Bn(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&Sg(r,e,this.localWriteTime)}}catch(u){n.e(u)}finally{n.f()}var i,a=Bn(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&Sg(o,e,this.localWriteTime)}}catch(u){a.e(u)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Ry.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),tk())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Py(this.mutations,e.mutations,(function(e,t){return Ng(e,t)}))&&Py(this.baseMutations,e.baseMutations,(function(e,t){return Ng(e,t)}))}}]),e}(),Rb=function(){function e(t,n,r,i){qe(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return Ke(e,null,[{key:"from",value:function(t,n,r){hy(t.mutations.length===r.length);for(var i=Xg,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Db=function(){function e(t,n){qe(this,e),this.largestBatchId=t,this.mutation=n}return Ke(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Lb=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ry.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Ry.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:qy.EMPTY_BYTE_STRING;qe(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return Ke(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Mb=Ke((function e(t){qe(this,e),this.Ht=t}));function Fb(e,t){var n;if(t.document)n=Nk(e.Ht,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=tm.fromSegments(t.noDocument.path),i=qb(t.noDocument.readTime);n=km.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return dy();var a=tm.fromSegments(t.unknownDocument.path),o=qb(t.unknownDocument.version);n=km.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(Vb(t.readTime)),n}function Ub(e,t){var n=jb(t.readTime),r=t.key.path.popLast().toArray();if(t.isFoundDocument()){var i=function(e,t){return{name:xk(e,t.key),fields:t.data.value.mapValue.fields,updateTime:yk(e,t.version.toTimestamp())}}(e.Ht,t),a=t.hasCommittedMutations;return new nb(null,null,i,a,n,r)}if(t.isNoDocument()){var o=t.key.path.toArray(),u=Bb(t.version),s=t.hasCommittedMutations;return new nb(null,new eb(o,u),null,s,n,r)}if(t.isUnknownDocument()){var c=t.key.path.toArray(),l=Bb(t.version);return new nb(new tb(c,l),null,null,!0,n,r)}return dy()}function jb(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Vb(e){var t=new Oy(e[0],e[1]);return Ry.fromTimestamp(t)}function Bb(e){var t=e.toTimestamp();return new Qk(t.seconds,t.nanoseconds)}function qb(e){var t=new Oy(e.seconds,e.nanoseconds);return Ry.fromTimestamp(t)}function zb(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Ok(e.Ht,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return Ok(e.Ht,t)})),u=Oy.fromMillis(t.localWriteTimeMs);return new Ob(t.batchId,u,n,o)}function Kb(e){var t,n,r=qb(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?qb(e.lastLimboFreeSnapshotVersion):Ry.min();return void 0!==e.query.documents?(hy(1===(n=e.query).documents.length),t=Jm(Hm(Ik(n.documents[0])))):t=function(e){return Jm(Lk(e))}(e.query),new Lb(t,e.targetId,0,e.lastListenSequenceNumber,r,i,qy.fromBase64String(e.resumeToken))}function Hb(e,t){var n,r=Bb(t.snapshotVersion),i=Bb(t.lastLimboFreeSnapshotVersion);n=Cm(t.target)?Rk(e.Ht,t.target):Dk(e.Ht,t.target);var a=t.resumeToken.toBase64();return new ib(t.targetId,Tm(t.target),r,a,t.sequenceNumber,i,n)}function Wb(e){var t=Lk({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Xm(t,t.limit,"L"):t}function Gb(e,t){return new Db(t.largestBatchId,Ok(e.Ht,t.overlayMutation))}function Zb(e,t){var n=t.path.lastSegment();return[e,Hk(t.path.popLast()),n]}var Qb=function(){function e(){qe(this,e)}return Ke(e,[{key:"getBundleMetadata",value:function(e,t){return Yb(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:qb(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return Yb(e).put({bundleId:(n=t).id,createTime:Bb(kk(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return $b(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Wb(t.bundledQuery),readTime:qb(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return $b(e).put(function(e){return{name:e.name,readTime:Bb(kk(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Yb(e){return Ab(e,cb.store)}function $b(e){return Ab(e,lb.store)}var Jb=function(){function e(t,n){qe(this,e),this.O=t,this.userId=n}return Ke(e,[{key:"getOverlay",value:function(e,t){var n=this;return Xb(e).get(Zb(this.userId,t)).next((function(e){return e?Gb(n.O,e):null}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n){var a=new Db(t,n);i.push(r.Yt(e,a))})),bb.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(Hk(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(Xb(e).Gt(pb.collectionPathOverlayIndex,i))})),bb.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=new Map,a=Hk(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Xb(e).qt(pb.collectionPathOverlayIndex,o).next((function(e){var t,n=Bn(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=Gb(r.O,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=new Map,u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Xb(e).Qt({index:pb.collectionGroupOverlayIndex,range:u},(function(e,t,n){var u=Gb(a.O,t);o.size<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"Yt",value:function(e,t){return Xb(e).put(function(e,t,n){var r=Me(Zb(t,n.mutation.key),3),i=(r[0],r[1]),a=r[2];return new pb(t,i,a,n.mutation.key.getCollectionGroup(),n.largestBatchId,Ak(e.Ht,n.mutation))}(this.O,this.userId,t))}}],[{key:"Jt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function Xb(e){return Ab(e,pb.store)}var ew=function(){function e(){qe(this,e)}return Ke(e,[{key:"Xt",value:function(e,t){this.Zt(e,t),t.te()}},{key:"Zt",value:function(e,t){if("nullValue"in e)this.ee(t,5);else if("booleanValue"in e)this.ee(t,10),t.ne(e.booleanValue?1:0);else if("integerValue"in e)this.ee(t,15),t.ne(Hy(e.integerValue));else if("doubleValue"in e){var n=Hy(e.doubleValue);isNaN(n)?this.ee(t,13):(this.ee(t,15),Xy(n)?t.ne(0):t.ne(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ee(t,20),"string"==typeof r?t.se(r):(t.se("".concat(r.seconds||"")),t.ne(r.nanos||0))}else if("stringValue"in e)this.ie(e.stringValue,t),this.re(t);else if("bytesValue"in e)this.ee(t,30),t.oe(Wy(e.bytesValue)),this.re(t);else if("referenceValue"in e)this.ce(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ee(t,45),t.ne(i.latitude||0),t.ne(i.longitude||0)}else"mapValue"in e?im(e,nm)?this.ee(t,Number.MAX_SAFE_INTEGER):(this.ue(e.mapValue,t),this.re(t)):"arrayValue"in e?(this.ae(e.arrayValue,t),this.re(t)):dy()}},{key:"ie",value:function(e,t){this.ee(t,25),this.he(e,t)}},{key:"he",value:function(e,t){t.se(e)}},{key:"ue",value:function(e,t){var n=e.fields||{};this.ee(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.ie(a,t),this.Zt(n[a],t)}}},{key:"ae",value:function(e,t){var n=e.values||[];this.ee(t,50);var r,i=Bn(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.Zt(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ce",value:function(e,t){var n=this;this.ee(t,37),tm.fromName(e).path.forEach((function(e){n.ee(t,60),n.he(e,t)}))}},{key:"ee",value:function(e,t){e.ne(t)}},{key:"re",value:function(e){e.ne(2)}}]),e}();function tw(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function nw(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=tw(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}ew.le=new ew;var rw=function(){function e(){qe(this,e),this.buffer=new Uint8Array(1024),this.position=0}return Ke(e,[{key:"fe",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.de(n.value),n=t.next();this._e()}},{key:"we",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.me(n.value),n=t.next();this.ge()}},{key:"ye",value:function(e){var t,n=Bn(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.de(i);else if(i<2048)this.de(960|i>>>6),this.de(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.de(480|i>>>12),this.de(128|63&i>>>6),this.de(128|63&i);else{var a=r.codePointAt(0);this.de(240|a>>>18),this.de(128|63&a>>>12),this.de(128|63&a>>>6),this.de(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this._e()}},{key:"pe",value:function(e){var t,n=Bn(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.me(i);else if(i<2048)this.me(960|i>>>6),this.me(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.me(480|i>>>12),this.me(128|63&i>>>6),this.me(128|63&i);else{var a=r.codePointAt(0);this.me(240|a>>>18),this.me(128|63&a>>>12),this.me(128|63&a>>>6),this.me(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ge()}},{key:"Ie",value:function(e){var t=this.Ee(e),n=nw(t);this.Te(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Ae",value:function(e){var t=this.Ee(e),n=nw(t);this.Te(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Re",value:function(){this.Pe(255),this.Pe(255)}},{key:"be",value:function(){this.ve(255),this.ve(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Te(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Ve",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ee",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"de",value:function(e){var t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}},{key:"me",value:function(e){var t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}},{key:"_e",value:function(){this.Pe(0),this.Pe(1)}},{key:"ge",value:function(){this.ve(0),this.ve(1)}},{key:"Pe",value:function(e){this.Te(1),this.buffer[this.position++]=e}},{key:"ve",value:function(e){this.Te(1),this.buffer[this.position++]=~e}},{key:"Te",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),iw=function(){function e(t){qe(this,e),this.Se=t}return Ke(e,[{key:"oe",value:function(e){this.Se.fe(e)}},{key:"se",value:function(e){this.Se.ye(e)}},{key:"ne",value:function(e){this.Se.Ie(e)}},{key:"te",value:function(){this.Se.Re()}}]),e}(),aw=function(){function e(t){qe(this,e),this.Se=t}return Ke(e,[{key:"oe",value:function(e){this.Se.we(e)}},{key:"se",value:function(e){this.Se.pe(e)}},{key:"ne",value:function(e){this.Se.Ae(e)}},{key:"te",value:function(){this.Se.be()}}]),e}(),ow=function(){function e(){qe(this,e),this.Se=new rw,this.De=new iw(this.Se),this.Ce=new aw(this.Se)}return Ke(e,[{key:"seed",value:function(e){this.Se.seed(e)}},{key:"Ne",value:function(e){return 0===e?this.De:this.Ce}},{key:"Ve",value:function(){return this.Se.Ve()}},{key:"reset",value:function(){this.Se.reset()}}]),e}(),uw=Ke((function e(t,n,r,i){qe(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}));function sw(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=tm.comparator(e.documentKey,t.documentKey))?n:0!==(n=cw(e.arrayValue,t.arrayValue))?n:cw(e.directionalValue,t.directionalValue)}function cw(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var lw=function(){function e(){qe(this,e),this.xe=new fw}return Ke(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.xe.add(t),bb.resolve()}},{key:"getCollectionParents",value:function(e,t){return bb.resolve(this.xe.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return bb.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return bb.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t,n){return bb.resolve(tk())}},{key:"getFieldIndex",value:function(e,t){return bb.resolve(null)}},{key:"getFieldIndexes",value:function(e,t){return bb.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return bb.resolve(null)}},{key:"updateCollectionGroup",value:function(e,t,n){return bb.resolve()}},{key:"updateIndexEntries",value:function(e,t){return bb.resolve()}}]),e}(),fw=function(){function e(){qe(this,e),this.index={}}return Ke(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Wg(Uy.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Wg(Uy.comparator)).toArray()}}]),e}(),dw=function(){function e(t){qe(this,e),this.user=t,this.ke=new fw,this.uid=t.uid||""}return Ke(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.ke.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.ke.add(t)}));var a={collectionId:r,parent:Hk(i)};return hw(e).put(a)}return bb.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Ay(t),""],!1,!0);return hw(e).qt(r).next((function(e){var r,i=Bn(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(Zk(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=vw(e),r=function(e){return new fb(e.indexId,e.collectionGroup,e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]})))}(t);return delete r.indexId,n.add(r).next()}},{key:"deleteFieldIndex",value:function(e,t){var n=vw(e),r=yw(e),i=pw(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t,n){return bb.resolve(tk())}},{key:"getFieldIndex",value:function(e,t){return bb.resolve(null)}},{key:"Oe",value:function(e,t){var n,r=new ow,i=Bn(function(e){return e.fields.filter((function(e){return 2!==e.kind}))}(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Ne(a.kind);ew.le.Xt(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Ve()}},{key:"Me",value:function(e){var t=new ow;return ew.le.Xt(e,t.Ne(0)),t.Ve()}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=vw(e),i=yw(e);return(t?r.qt(fb.collectionGroupIndex,IDBKeyRange.bound(t,t)):r.qt()).next((function(e){var t=[];return bb.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new xm(t.sequenceNumber,new Em(qb(t.readTime),new tm(Zk(t.documentKey)),t.largestBatchId)):xm.empty(),r=e.fields.map((function(e){var t=Me(e,2),n=t[0],r=t[1];return new wm(Vy.fromServerFormat(n),r)}));return new bm(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){return e.indexState.sequenceNumber-t.indexState.sequenceNumber})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=vw(e),a=yw(e);return this.$e(e).next((function(e){return i.qt(fb.collectionGroupIndex,IDBKeyRange.bound(t,t)).next((function(t){return bb.forEach(t,(function(t){return a.put(function(e,t,n,r){return new db(e,t.uid||"",n,Bb(r.readTime),Hk(r.documentKey.path),r.largestBatchId)}(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return bb.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?bb.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),bb.forEach(a,(function(r){return n.Fe(e,t,r).next((function(t){var a=n.Be(i,r);return t.isEqual(a)?bb.resolve():n.Le(e,i,t,a)}))}))}))}))}},{key:"Ue",value:function(e,t,n){return pw(e).put(new hb(n.indexId,this.uid,n.arrayValue,n.directionalValue,Hk(t.key.path)))}},{key:"qe",value:function(e,t,n){return pw(e).delete([n.indexId,this.uid,n.arrayValue,n.directionalValue,Hk(t.key.path)])}},{key:"Fe",value:function(e,t,n){var r=pw(e),i=new Wg(sw);return r.Qt({index:hb.documentKeyIndex,range:IDBKeyRange.only([n.indexId,this.uid,Hk(t.path)])},(function(e,r){i=i.add(new uw(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"Be",value:function(e,t){var n=new Wg(sw),r=this.Oe(t,e);if(null==r)return n;var i=function(e){return e.fields.find((function(e){return 2===e.kind}))}(t);if(null!=i){var a=e.data.field(i.fieldPath);if(dm(a)){var o,u=Bn(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new uw(t.indexId,e.key,this.Me(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new uw(t.indexId,e.key,new Uint8Array,r));return n}},{key:"Le",value:function(e,t,n,r){var i=this;sy("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var a=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=Zg(a),s=Zg(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=Zg(o)):l?(i(u),u=Zg(a)):(u=Zg(a),s=Zg(o))}}(n,r,sw,(function(n){a.push(i.Ue(e,t,n))}),(function(n){a.push(i.qe(e,t,n))})),bb.waitFor(a)}},{key:"$e",value:function(e){var t=1;return yw(e).Qt({index:db.sequenceNumberIndex,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}}]),e}();function hw(e){return Ab(e,ub.store)}function pw(e){return Ab(e,hb.store)}function vw(e){return Ab(e,fb.store)}function yw(e){return Ab(e,db.store)}var mw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},gw=function(){function e(t,n,r){qe(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return Ke(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function kw(e,t,n){var r=e.store(Jk.store),i=e.store(Xk.store),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Qt({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){hy(1===u)})));var c,l=[],f=Bn(n.mutations);try{for(f.s();!(c=f.n()).done;){var d=c.value,h=Xk.key(t,d.key.path,n.batchId);a.push(i.delete(h)),l.push(d.key)}}catch(p){f.e(p)}finally{f.f()}return bb.waitFor(a).next((function(){return l}))}function bw(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw dy();t=e.noDocument}return JSON.stringify(t).length}gw.DEFAULT_COLLECTION_PERCENTILE=10,gw.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gw.DEFAULT=new gw(41943040,gw.DEFAULT_COLLECTION_PERCENTILE,gw.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gw.DISABLED=new gw(-1,0,0);var ww=function(){function e(t,n,r,i){qe(this,e),this.userId=t,this.O=n,this.indexManager=r,this.referenceDelegate=i,this.Ke={}}return Ke(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ew(e).Qt({index:Jk.userMutationsIndex,range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=_w(e),o=Ew(e);return o.add({}).next((function(u){hy("number"==typeof u);var s,c=new Ob(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return Ak(e.Ht,t)})),i=n.mutations.map((function(t){return Ak(e.Ht,t)}));return new Jk(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.O,i.userId,c),f=[],d=new Wg((function(e,t){return Ny(e.canonicalString(),t.canonicalString())})),h=Bn(r);try{for(h.s();!(s=h.n()).done;){var p=s.value,v=Xk.key(i.userId,p.key.path,u);d=d.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,Xk.PLACEHOLDER))}}catch(y){h.e(y)}finally{h.f()}return d.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Ke[u]=c.keys()})),bb.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Ew(e).get(t).next((function(e){return e?(hy(e.userId===n.userId),zb(n.O,e)):null}))}},{key:"Ge",value:function(e,t){var n=this;return this.Ke[t]?bb.resolve(this.Ke[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Ke[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Ew(e).Qt({index:Jk.userMutationsIndex,range:i},(function(e,t,i){t.userId===n.userId&&(hy(t.batchId>=r),a=zb(n.O,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Ew(e).Qt({index:Jk.userMutationsIndex,range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ew(e).qt(Jk.userMutationsIndex,n).next((function(e){return e.map((function(e){return zb(t.O,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=Xk.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return _w(e).Qt({range:i},(function(r,i,o){var u=Me(r,3),s=u[0],c=u[1],l=u[2],f=Zk(c);if(s===n.userId&&t.path.isEqual(f))return Ew(e).get(l).next((function(e){if(!e)throw dy();hy(e.userId===n.userId),a.push(zb(n.O,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Wg(Ny),i=[];return t.forEach((function(t){var a=Xk.prefixForPath(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=_w(e).Qt({range:o},(function(e,i,a){var o=Me(e,3),u=o[0],s=o[1],c=o[2],l=Zk(s);u===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(u)})),bb.waitFor(i).next((function(){return n.je(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=Xk.prefixForPath(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new Wg(Ny);return _w(e).Qt({range:o},(function(e,t,a){var o=Me(e,3),s=o[0],c=o[1],l=o[2],f=Zk(c);s===n.userId&&r.isPrefixOf(f)?f.length===i&&(u=u.add(l)):a.done()})).next((function(){return n.je(e,u)}))}},{key:"je",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Ew(e).get(t).next((function(e){if(null===e)throw dy();hy(e.userId===n.userId),r.push(zb(n.O,e))})))})),bb.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return kw(e.zt,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Qe(t.batchId)})),bb.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"Qe",value:function(e){delete this.Ke[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return bb.resolve();var r=IDBKeyRange.lowerBound(Xk.prefixForUser(t.userId)),i=[];return _w(e).Qt({range:r},(function(e,n,r){if(e[0]===t.userId){var a=Zk(e[1]);i.push(a)}else r.done()})).next((function(){hy(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return xw(e,this.userId,t)}},{key:"We",value:function(e){var t=this;return Iw(e).get(this.userId).next((function(e){return e||new $k(t.userId,-1,"")}))}}],[{key:"Jt",value:function(t,n,r,i){return hy(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function xw(e,t,n){var r=Xk.prefixForPath(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return _w(e).Qt({range:a,jt:!0},(function(e,n,r){var a=Me(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function Ew(e){return Ab(e,Jk.store)}function _w(e){return Ab(e,Xk.store)}function Iw(e){return Ab(e,$k.store)}var Tw=function(){function e(t){qe(this,e),this.ze=t}return Ke(e,[{key:"next",value:function(){return this.ze+=2,this.ze}}],[{key:"He",value:function(){return new e(0)}},{key:"Je",value:function(){return new e(-1)}}]),e}(),Sw=function(){function e(t,n){qe(this,e),this.referenceDelegate=t,this.O=n}return Ke(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Ye(e).next((function(n){var r=new Tw(n.highestTargetId);return n.highestTargetId=r.next(),t.Xe(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Ye(e).next((function(e){return Ry.fromTimestamp(new Oy(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Ye(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Ye(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Xe(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Ze(e,t).next((function(){return n.Ye(e).next((function(r){return r.targetCount+=1,n.tn(t,r),n.Xe(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Ze(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Cw(e).delete(t.targetId)})).next((function(){return n.Ye(e)})).next((function(t){return hy(t.targetCount>0),t.targetCount-=1,n.Xe(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Cw(e).Qt((function(o,u){var s=Kb(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return bb.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Cw(e).Qt((function(e,n){var r=Kb(n);t(r)}))}},{key:"Ye",value:function(e){return Nw(e).get(ob.key).next((function(e){return hy(null!==e),e}))}},{key:"Xe",value:function(e,t){return Nw(e).put(ob.key,t)}},{key:"Ze",value:function(e,t){return Cw(e).put(Hb(this.O,t))}},{key:"tn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Ye(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Tm(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Cw(e).Qt({range:r,index:ib.queryTargetsIndexName},(function(e,n,r){var a=Kb(n);Sm(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Pw(e);return t.forEach((function(t){var o=Hk(t.path);i.push(a.put(new ab(n,o))),i.push(r.referenceDelegate.addReference(e,n,t))})),bb.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Pw(e);return bb.forEach(t,(function(t){var a=Hk(t.path);return bb.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Pw(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Pw(e),i=tk();return r.Qt({range:n,jt:!0},(function(e,t,n){var r=Zk(e[1]),a=new tm(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=Hk(t.path),r=IDBKeyRange.bound([n],[Ay(n)],!1,!0),i=0;return Pw(e).Qt({index:ab.documentTargetsIndex,jt:!0,range:r},(function(e,t,n){var r=Me(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"Tt",value:function(e,t){return Cw(e).get(t).next((function(e){return e?Kb(e):null}))}}]),e}();function Cw(e){return Ab(e,ib.store)}function Nw(e){return Ab(e,ob.store)}function Pw(e){return Ab(e,ab.store)}function Aw(e){return Ow.apply(this,arguments)}function Ow(){return Ow=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===vy.FAILED_PRECONDITION&&t.message===gb){e.next=2;break}throw t;case 2:sy("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Ow.apply(this,arguments)}function Rw(e,t){var n=Me(e,2),r=n[0],i=n[1],a=Me(t,2),o=a[0],u=a[1],s=Ny(r,o);return 0===s?Ny(i,u):s}var Dw=function(){function e(t){qe(this,e),this.en=t,this.buffer=new Wg(Rw),this.nn=0}return Ke(e,[{key:"sn",value:function(){return++this.nn}},{key:"rn",value:function(e){var t=[e,this.sn()];if(this.buffer.size<this.en)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Rw(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Lw=function(){function e(t,n){qe(this,e),this.garbageCollector=t,this.asyncQueue=n,this.on=!1,this.cn=null}return Ke(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.un(e)}},{key:"stop",value:function(){this.cn&&(this.cn.cancel(),this.cn=null)}},{key:"started",get:function(){return null!==this.cn}},{key:"un",value:function(e){var t=this,n=this.on?3e5:6e4;sy("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this.cn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,a(u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.cn=null,t.on=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!Ib(n.t0)){n.next=12;break}sy("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,Aw(n.t0);case 14:return n.next=16,t.un(e);case 16:case"end":return n.stop()}}),n,null,[[1,6]])}))))}}]),e}(),Mw=function(){function e(t,n){qe(this,e),this.an=t,this.params=n}return Ke(e,[{key:"calculateTargetCount",value:function(e,t){return this.an.hn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return bb.resolve(Ty.A);var r=new Dw(t);return this.an.forEachTarget(e,(function(e){return r.rn(e.sequenceNumber)})).next((function(){return n.an.ln(e,(function(e){return r.rn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.an.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.an.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(sy("LruGarbageCollector","Garbage collection skipped; disabled"),bb.resolve(mw)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(sy("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),mw):n.fn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.an.getCacheSize(e)}},{key:"fn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(sy("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),uy()<=Er.DEBUG&&sy("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),bb.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),Fw=function(){function e(t,n){qe(this,e),this.db=t,this.garbageCollector=function(e,t){return new Mw(e,t)}(this,n)}return Ke(e,[{key:"hn",value:function(e){var t=this.dn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"dn",value:function(e){var t=0;return this.ln(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"ln",value:function(e,t){return this._n(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return Uw(e,n)}},{key:"removeReference",value:function(e,t,n){return Uw(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Uw(e,t)}},{key:"wn",value:function(e,t){return function(e,t){var n=!1;return Iw(e).Wt((function(r){return xw(e,r,t).next((function(e){return e&&(n=!0),bb.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this._n(e,(function(o,u){if(u<=t){var s=n.wn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Ry.min()),Pw(e).delete([0,Hk(o.path)])}))}));i.push(s)}})).next((function(){return bb.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Uw(e,t)}},{key:"_n",value:function(e,t){var n,r=Pw(e),i=Ty.A;return r.Qt({index:ab.documentTargetsIndex},(function(e,r){var a=Me(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==Ty.A&&t(new tm(Zk(n)),i),i=s,n=u):i=Ty.A})).next((function(){i!==Ty.A&&t(new tm(Zk(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Uw(e,t){return Pw(e).put(function(e,t){return new ab(0,Hk(e.path),t)}(t,e.currentSequenceNumber))}var jw=function(){function e(t,n){qe(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={}}return Ke(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=Bn(n);try{for(i.s();!(r=i.n()).done;){var a=Me(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1}},{key:"forEach",value:function(e){Ly(this.inner,(function(t,n){var r,i=Bn(n);try{for(i.s();!(r=i.n()).done;){var a=Me(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return My(this.inner)}}]),e}(),Vw=function(){function e(){qe(this,e),this.changes=new jw((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return Ke(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,km.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?bb.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Bw=function(){function e(t){qe(this,e),this.O=t}return Ke(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Kw(e).put(Hw(t),n)}},{key:"removeEntry",value:function(e,t){var n=Kw(e),r=Hw(t);return n.delete(r)}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.mn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this;return Kw(e).get(Hw(t)).next((function(e){return n.gn(t,e)}))}},{key:"yn",value:function(e,t){var n=this;return Kw(e).get(Hw(t)).next((function(e){return{document:n.gn(t,e),size:bw(e)}}))}},{key:"getEntries",value:function(e,t){var n=this,r=Yg();return this.pn(e,t,(function(e,t){var i=n.gn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"In",value:function(e,t){var n=this,r=Yg(),i=new zg(tm.comparator);return this.pn(e,t,(function(e,t){var a=n.gn(e,t);r=r.insert(e,a),i=i.insert(e,bw(t))})).next((function(){return{documents:r,En:i}}))}},{key:"pn",value:function(e,t,n){if(t.isEmpty())return bb.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),a=i.getNext();return Kw(e).Qt({range:r},(function(e,t,r){for(var o=tm.fromSegments(e);a&&tm.comparator(a,o)<0;)n(a,null),a=i.getNext();a&&a.isEqual(o)&&(n(a,t),a=i.hasNext()?i.getNext():null),a?r.Ut(a.path.toArray()):r.done()})).next((function(){for(;a;)n(a,null),a=i.hasNext()?i.getNext():null}))}},{key:"getAll",value:function(e,t,n){var r=this,i=Yg(),a=t.length+1,o={};if(n.isEqual(Ry.min())){var u=t.toArray();o.range=IDBKeyRange.lowerBound(u)}else{var s=t.toArray(),c=jb(n);o.range=IDBKeyRange.lowerBound([s,c],!0),o.index=nb.collectionReadTimeIndex}return Kw(e).Qt(o,(function(e,n,o){if(e.length===a){var u=r.gn(tm.fromSegments(e),n);t.isPrefixOf(u.key.path)?i=i.insert(u.key,u):o.done()}})).next((function(){return i}))}},{key:"newChangeBuffer",value:function(e){return new qw(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return zw(e).get(rb.key).next((function(e){return hy(!!e),e}))}},{key:"mn",value:function(e,t){return zw(e).put(rb.key,t)}},{key:"gn",value:function(e,t){if(t){var n=Fb(this.O,t);if(!n.isNoDocument()||!n.version.isEqual(Ry.min()))return n}return km.newInvalidDocument(e)}}]),e}(),qw=function(e){Ot(n,e);var t=Ft(n);function n(e,r){var i;return qe(this,n),(i=t.call(this)).Tn=e,i.trackRemovals=r,i.An=new jw((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return Ke(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Wg((function(e,t){return Ny(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.An.get(a);if(o.isValidDocument()){var s=Ub(t.Tn.O,o);i=i.add(a.path.popLast());var c=bw(s);r+=c-u,n.push(t.Tn.addEntry(e,a,s))}else if(r-=u,t.trackRemovals){var l=Ub(t.Tn.O,o.convertToNoDocument(Ry.min()));n.push(t.Tn.addEntry(e,a,l))}else n.push(t.Tn.removeEntry(e,a))})),i.forEach((function(r){n.push(t.Tn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Tn.updateMetadata(e,r)),bb.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Tn.yn(e,t).next((function(e){return n.An.set(t,e.size),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Tn.In(e,t).next((function(e){var t=e.documents;return e.En.forEach((function(e,t){n.An.set(e,t)})),t}))}}]),n}(Vw);function zw(e){return Ab(e,rb.store)}function Kw(e){return Ab(e,nb.store)}function Hw(e){return e.path.toArray()}var Ww=function(){function e(t){qe(this,e),this.O=t}return Ke(e,[{key:"kt",value:function(e,t,n,r){var i=this,a=new wb("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(Yk.store)}(e),function(e){e.createObjectStore($k.store,{keyPath:$k.keyPath}),e.createObjectStore(Jk.store,{keyPath:Jk.keyPath,autoIncrement:!0}).createIndex(Jk.userMutationsIndex,Jk.userMutationsKeyPath,{unique:!0}),e.createObjectStore(Xk.store)}(e),Gw(e),function(e){e.createObjectStore(nb.store)}(e));var o=bb.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(ab.store),e.deleteObjectStore(ib.store),e.deleteObjectStore(ob.store)}(e),Gw(e)),o=o.next((function(){return function(e){var t=e.store(ob.store),n=new ob(0,0,Ry.min().toTimestamp(),0);return t.put(ob.key,n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store(Jk.store).qt().next((function(n){e.deleteObjectStore(Jk.store),e.createObjectStore(Jk.store,{keyPath:Jk.keyPath,autoIncrement:!0}).createIndex(Jk.userMutationsIndex,Jk.userMutationsKeyPath,{unique:!0});var r=t.store(Jk.store),i=n.map((function(e){return r.put(e)}));return bb.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore(sb.store,{keyPath:sb.keyPath})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Rn(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore(rb.store)}(e),i.Pn(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.bn(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.vn(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){var t=e.objectStore(nb.store);t.createIndex(nb.readTimeIndex,nb.readTimeIndexPath,{unique:!1}),t.createIndex(nb.collectionReadTimeIndex,nb.collectionReadTimeIndexPath,{unique:!1})}(t)}))),n<10&&r>=10&&(o=o.next((function(){return i.Vn(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore(cb.store,{keyPath:cb.keyPath})}(e),function(e){e.createObjectStore(lb.store,{keyPath:lb.keyPath})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore(pb.store,{keyPath:pb.keyPath});t.createIndex(pb.collectionPathOverlayIndex,pb.collectionPathOverlayIndexPath,{unique:!1}),t.createIndex(pb.collectionGroupOverlayIndex,pb.collectionGroupOverlayIndexPath,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){!function(e){e.createObjectStore(fb.store,{keyPath:fb.keyPath,autoIncrement:!0}).createIndex(fb.collectionGroupIndex,fb.collectionGroupIndexPath,{unique:!1}),e.createObjectStore(db.store,{keyPath:db.keyPath}).createIndex(db.sequenceNumberIndex,db.sequenceNumberIndexPath,{unique:!1}),e.createObjectStore(hb.store,{keyPath:hb.keyPath}).createIndex(hb.documentKeyIndex,hb.documentKeyIndexPath,{unique:!1})}(e)}))),o}},{key:"Pn",value:function(e){var t=0;return e.store(nb.store).Qt((function(e,n){t+=bw(n)})).next((function(){var n=new rb(t);return e.store(rb.store).put(rb.key,n)}))}},{key:"Rn",value:function(e){var t=this,n=e.store($k.store),r=e.store(Jk.store);return n.qt().next((function(n){return bb.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.qt(Jk.userMutationsIndex,i).next((function(r){return bb.forEach(r,(function(r){hy(r.userId===n.userId);var i=zb(t.O,r);return kw(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"bn",value:function(e){var t=e.store(ab.store),n=e.store(nb.store);return e.store(ob.store).get(ob.key).next((function(e){var r=[];return n.Qt((function(n,i){var a=new Uy(n),o=function(e){return[0,Hk(e)]}(a);r.push(t.get(o).next((function(n){return n?bb.resolve():function(n){return t.put(new ab(0,Hk(n),e.highestListenSequenceNumber))}(a)})))})).next((function(){return bb.waitFor(r)}))}))}},{key:"vn",value:function(e,t){e.createObjectStore(ub.store,{keyPath:ub.keyPath});var n=t.store(ub.store),r=new fw,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Hk(i)})}};return t.store(nb.store).Qt({jt:!0},(function(e,t){var n=new Uy(e);return i(n.popLast())})).next((function(){return t.store(Xk.store).Qt({jt:!0},(function(e,t){var n=Me(e,3),r=(n[0],n[1]),a=(n[2],Zk(r));return i(a.popLast())}))}))}},{key:"Vn",value:function(e){var t=this,n=e.store(ib.store);return n.Qt((function(e,r){var i=Kb(r),a=Hb(t.O,i);return n.put(a)}))}}]),e}();function Gw(e){e.createObjectStore(ab.store,{keyPath:ab.keyPath}).createIndex(ab.documentTargetsIndex,ab.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(ib.store,{keyPath:ib.keyPath}).createIndex(ib.queryTargetsIndexName,ib.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(ob.store)}var Zw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Qw=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:12;if(qe(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Sn=a,this.window=o,this.document=u,this.Dn=c,this.Cn=l,this.schemaVersion=f,this.Nn=null,this.xn=!1,this.isPrimary=!1,this.networkEnabled=!0,this.kn=null,this.inForeground=!1,this.On=null,this.Mn=null,this.$n=Number.NEGATIVE_INFINITY,this.Fn=function(e){return Promise.resolve()},!e.Vt())throw new yy(vy.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Fw(this,i),this.Bn=n+"main",this.O=new Mb(s),this.Ln=new xb(this.Bn,this.schemaVersion,new Ww(this.O)),this.Un=new Sw(this.referenceDelegate,this.O),this.qn=function(e){return new Bw(e)}(this.O),this.Kn=new Qb,this.window&&this.window.localStorage?this.Gn=this.window.localStorage:(this.Gn=null,!1===l&&cy("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return Ke(e,[{key:"start",value:function(){var e=this;return this.jn().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new yy(vy.FAILED_PRECONDITION,Zw);return e.Qn(),e.Wn(),e.zn(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Un.getHighestSequenceNumber(t)}))})).then((function(t){e.Nn=new Ty(t,e.Dn)})).then((function(){e.xn=!0})).catch((function(t){return e.Ln&&e.Ln.close(),Promise.reject(t)}))}},{key:"Hn",value:function(e){var t=this;return this.Fn=function(){var n=a(u().mark((function n(r){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.Ln.Mt(function(){var t=a(u().mark((function t(n){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Sn.enqueueAndForget(a(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.jn();case 4:case"end":return e.stop()}}),e)})))))}},{key:"jn",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return $w(t).put(new sb(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next((function(){if(e.isPrimary)return e.Jn(t).next((function(t){t||(e.isPrimary=!1,e.Sn.enqueueRetryable((function(){return e.Fn(!1)})))}))})).next((function(){return e.Yn(t)})).next((function(n){return e.isPrimary&&!n?e.Xn(t).next((function(){return!1})):!!n&&e.Zn(t).next((function(){return!0}))}))})).catch((function(t){if(Ib(t))return sy("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return sy("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Sn.enqueueRetryable((function(){return e.Fn(t)})),e.isPrimary=t}))}},{key:"Jn",value:function(e){var t=this;return Yw(e).get(Yk.key).next((function(e){return bb.resolve(t.ts(e))}))}},{key:"es",value:function(e){return $w(e).delete(this.clientId)}},{key:"ns",value:function(){var e=a(u().mark((function e(){var t,n,r,i,a=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.ss(this.$n,18e5)){e.next=6;break}return this.$n=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Ab(e,sb.store);return t.qt().next((function(e){var n=a.rs(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return bb.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.Gn){n=Bn(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.Gn.removeItem(this.os(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"zn",value:function(){var e=this;this.Mn=this.Sn.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.jn().then((function(){return e.ns()})).then((function(){return e.zn()}))}))}},{key:"ts",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"Yn",value:function(e){var t=this;return this.Cn?bb.resolve(!0):Yw(e).get(Yk.key).next((function(n){if(null!==n&&t.ss(n.leaseTimestampMs,5e3)&&!t.cs(n.ownerId)){if(t.ts(n)&&t.networkEnabled)return!0;if(!t.ts(n)){if(!n.allowTabSynchronization)throw new yy(vy.FAILED_PRECONDITION,Zw);return!1}}return!(!t.networkEnabled||!t.inForeground)||$w(e).qt().next((function(e){return void 0===t.rs(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&sy("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=a(u().mark((function e(){var t=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.xn=!1,this.us(),this.Mn&&(this.Mn.cancel(),this.Mn=null),this.hs(),this.ls(),e.next=7,this.Ln.runTransaction("shutdown","readwrite",[Yk.store,sb.store],(function(e){var n=new Pb(e,Ty.A);return t.Xn(n).next((function(){return t.es(n)}))}));case 7:this.Ln.close(),this.fs();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"rs",value:function(e,t){var n=this;return e.filter((function(e){return n.ss(e.updateTimeMs,t)&&!n.cs(e.clientId)}))}},{key:"ds",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return $w(t).qt().next((function(t){return e.rs(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.xn}},{key:"getMutationQueue",value:function(e,t){return ww.Jt(e,this.O,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Un}},{key:"getRemoteDocumentCache",value:function(){return this.qn}},{key:"getIndexManager",value:function(e){return new dw(e)}},{key:"getDocumentOverlayCache",value:function(e){return Jb.Jt(this.O,e)}},{key:"getBundleCache",value:function(){return this.Kn}},{key:"runTransaction",value:function(e,t,n){var r=this;sy("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=13===(i=this.schemaVersion)?mb:12===i?yb:11===i?vb:void dy();return this.Ln.runTransaction(e,o,u,(function(i){return a=new Pb(i,r.Nn?r.Nn.next():Ty.A),"readwrite-primary"===t?r.Jn(a).next((function(e){return!!e||r.Yn(a)})).next((function(t){if(!t)throw cy("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Sn.enqueueRetryable((function(){return r.Fn(!1)})),new yy(vy.FAILED_PRECONDITION,gb);return n(a)})).next((function(e){return r.Zn(a).next((function(){return e}))})):r._s(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"_s",value:function(e){var t=this;return Yw(e).get(Yk.key).next((function(e){if(null!==e&&t.ss(e.leaseTimestampMs,5e3)&&!t.cs(e.ownerId)&&!t.ts(e)&&!(t.Cn||t.allowTabSynchronization&&e.allowTabSynchronization))throw new yy(vy.FAILED_PRECONDITION,Zw)}))}},{key:"Zn",value:function(e){var t=new Yk(this.clientId,this.allowTabSynchronization,Date.now());return Yw(e).put(Yk.key,t)}},{key:"Xn",value:function(e){var t=this,n=Yw(e);return n.get(Yk.key).next((function(e){return t.ts(e)?(sy("IndexedDbPersistence","Releasing primary lease."),n.delete(Yk.key)):bb.resolve()}))}},{key:"ss",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(cy("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"Qn",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.On=function(){e.Sn.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.jn()}))},this.document.addEventListener("visibilitychange",this.On),this.inForeground="visible"===this.document.visibilityState)}},{key:"hs",value:function(){this.On&&(this.document.removeEventListener("visibilitychange",this.On),this.On=null)}},{key:"Wn",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.kn=function(){t.us(),!er()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Sn.enterRestrictedMode(!0),t.Sn.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.kn))}},{key:"ls",value:function(){this.kn&&(this.window.removeEventListener("pagehide",this.kn),this.kn=null)}},{key:"cs",value:function(e){var t;try{var n=null!==(null===(t=this.Gn)||void 0===t?void 0:t.getItem(this.os(e)));return sy("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return cy("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"us",value:function(){if(this.Gn)try{this.Gn.setItem(this.os(this.clientId),String(Date.now()))}catch(id){cy("Failed to set zombie client id.",id)}}},{key:"fs",value:function(){if(this.Gn)try{this.Gn.removeItem(this.os(this.clientId))}catch(id){}}},{key:"os",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"Vt",value:function(){return xb.Vt()}}]),e}();function Yw(e){return Ab(e,Yk.store)}function $w(e){return Ab(e,sb.store)}function Jw(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Xw=Ke((function e(t,n){qe(this,e),this.progress=t,this.ws=n})),ex=function(){function e(t,n,r){qe(this,e),this.qn=t,this.gs=n,this.indexManager=r}return Ke(e,[{key:"ys",value:function(e,t){var n=this;return this.gs.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.ps(e,t,r)}))}},{key:"ps",value:function(e,t,n){return this.qn.getEntry(e,t).next((function(e){var t,r=Bn(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e}))}},{key:"Is",value:function(e,t){e.forEach((function(e,n){var r,i=Bn(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}}))}},{key:"Es",value:function(e,t){var n=this;return this.qn.getEntries(e,t).next((function(t){return n.Ts(e,t).next((function(){return t}))}))}},{key:"Ts",value:function(e,t){var n=this;return this.gs.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.Is(t,e)}))}},{key:"As",value:function(e,t,n){return function(e){return tm.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Rs(e,t.path):Ym(t)?this.Ps(e,t,n):this.bs(e,t,n)}},{key:"Rs",value:function(e,t){return this.ys(e,new tm(t)).next((function(e){var t=Jg();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"Ps",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Jg();return this.indexManager.getCollectionParents(e,i).next((function(o){return bb.forEach(o,(function(o){var u=function(e,t){return new zm(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.bs(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"bs",value:function(e,t,n){var r,i=this;return this.qn.getAll(e,t.path,n).next((function(n){return r=n,i.gs.getAllMutationBatchesAffectingQuery(e,t)})).next((function(e){var t,n=Bn(e);try{for(n.s();!(t=n.n()).done;){var i,a=t.value,o=Bn(a.mutations);try{for(o.s();!(i=o.n()).done;){var u=i.value,s=u.key,c=r.get(s);null==c&&(c=km.newInvalidDocument(s),r=r.insert(s,c)),Sg(u,c,a.localWriteTime),c.isFoundDocument()||(r=r.remove(s))}}catch(l){o.e(l)}finally{o.f()}}}catch(l){n.e(l)}finally{n.f()}})).next((function(){return r.forEach((function(e,n){rg(t,n)||(r=r.remove(e))})),r}))}}]),e}(),tx=function(){function e(t,n,r,i){qe(this,e),this.targetId=t,this.fromCache=n,this.vs=r,this.Vs=i}return Ke(e,null,[{key:"Ss",value:function(t,n){var r,i=tk(),a=tk(),o=Bn(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),nx=function(){function e(){qe(this,e)}return Ke(e,[{key:"Ds",value:function(e){this.Cs=e}},{key:"As",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(Ry.min())?this.Ns(e,t):this.Cs.Es(e,r).next((function(a){var o=i.xs(t,a);return(Wm(t)||Gm(t))&&i.ks(t.limitType,o,r,n)?i.Ns(e,t):(uy()<=Er.DEBUG&&sy("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),ng(t)),i.Cs.As(e,t,n).next((function(e){return o.forEach((function(t){e=e.insert(t.key,t)})),e})))}))}},{key:"xs",value:function(e,t){var n=new Wg(ig(e));return t.forEach((function(t,r){rg(e,r)&&(n=n.add(r))})),n}},{key:"ks",value:function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Ns",value:function(e,t){return uy()<=Er.DEBUG&&sy("QueryEngine","Using full collection scan to execute query:",ng(t)),this.Cs.As(e,t,Ry.min())}}]),e}(),rx=function(){function e(t,n,r,i){qe(this,e),this.persistence=t,this.Os=n,this.O=i,this.Ms=new zg(Ny),this.$s=new jw((function(e){return Tm(e)}),Sm),this.Fs=Ry.min(),this.Bs=t.getRemoteDocumentCache(),this.Un=t.getTargetCache(),this.Kn=t.getBundleCache(),this.Ls(r)}return Ke(e,[{key:"Ls",value:function(e){this.indexManager=this.persistence.getIndexManager(e),this.gs=this.persistence.getMutationQueue(e,this.indexManager),this.Us=new ex(this.Bs,this.gs,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Os.Ds(this.Us)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ms)}))}}]),e}();function ix(e,t,n,r){return new rx(e,t,n,r)}function ax(e,t){return ox.apply(this,arguments)}function ox(){return ox=a(u().mark((function e(t,n){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=py(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.gs.getAllMutationBatches(e).next((function(i){return t=i,r.Ls(n),r.gs.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=tk(),s=Bn(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=Bn(c.mutations);try{for(f.s();!(l=f.n()).done;){var d=l.value;u=u.add(d.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var h,p=Bn(n);try{for(p.s();!(h=p.n()).done;){var v=h.value;o.push(v.batchId);var y,m=Bn(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;u=u.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){p.e(k)}finally{p.f()}return r.Us.Es(e,u).next((function(e){return{qs:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),ox.apply(this,arguments)}function ux(e,t){var n=py(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Bs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=bb.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);hy(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.gs.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.gs.performConsistencyCheck(e)})).next((function(){return n.Us.Es(e,r)}))}))}function sx(e){var t=py(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Un.getLastRemoteSnapshotVersion(e)}))}function cx(e,t){var n=py(e),r=t.snapshotVersion,i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Bs.newChangeBuffer({trackRemovals:!0});i=n.Ms;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Un.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Un.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(qy.EMPTY_BYTE_STRING,Ry.min()).withLastLimboFreeSnapshotVersion(Ry.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Un.updateTargetData(e,c))}}));var u=Yg();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(lx(e,a,t.documentUpdates).next((function(e){u=e}))),!r.isEqual(Ry.min())){var s=n.Un.getLastRemoteSnapshotVersion(e).next((function(t){return n.Un.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(s)}return bb.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.Us.Ts(e,u)})).next((function(){return u}))})).then((function(e){return n.Ms=i,e}))}function lx(e,t,n){var r=tk();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Yg();return n.forEach((function(n,i){var a=e.get(n);i.isNoDocument()&&i.version.isEqual(Ry.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):sy("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)})),r}))}function fx(e,t){var n=py(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.gs.getNextMutationBatchAfterBatchId(e,t)}))}function dx(e,t){var n=py(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Un.getTargetData(e,t).next((function(i){return i?(r=i,bb.resolve(r)):n.Un.allocateTargetId(e).next((function(i){return r=new Lb(t,i,0,e.currentSequenceNumber),n.Un.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.$s.set(t,e.targetId)),e}))}function hx(e,t,n){return px.apply(this,arguments)}function px(){return px=a(u().mark((function e(t,n,r){var i,a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=py(t),a=i.Ms.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Ib(e.t1)){e.next=12;break}throw e.t1;case 12:sy("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ms=i.Ms.remove(n),i.$s.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),px.apply(this,arguments)}function vx(e,t,n){var r=py(e),i=Ry.min(),a=tk();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=py(e),i=r.$s.get(n);return void 0!==i?bb.resolve(r.Ms.get(i)):r.Un.getTargetData(t,n)}(r,e,Jm(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Un.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Os.As(e,t,n?i:Ry.min(),n?a:tk())})).next((function(e){return{documents:e,Ks:a}}))}))}function yx(e,t){var n=py(e),r=py(n.Un),i=n.Ms.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Tt(e,t).next((function(e){return e?e.target:null}))}))}function mx(e){var t=py(e);return t.persistence.runTransaction("Get new document changes","readonly",(function(e){return function(e,t,n){var r=py(e),i=Yg(),a=jb(n),o=Kw(t),u=IDBKeyRange.lowerBound(a,!0);return o.Qt({index:nb.readTimeIndex,range:u},(function(e,t){var n=Fb(r.O,t);i=i.insert(n.key,n),a=t.readTime})).next((function(){return{ws:i,readTime:Vb(a)}}))}(t.Bs,e,t.Fs)})).then((function(e){var n=e.ws,r=e.readTime;return t.Fs=r,n}))}function gx(e){return kx.apply(this,arguments)}function kx(){return kx=a(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=py(t),e.abrupt("return",n.persistence.runTransaction("Synchronize last document change read time","readonly",(function(e){return function(e){var t=Kw(e),n=Ry.min();return t.Qt({index:nb.readTimeIndex,reverse:!0},(function(e,t,r){t.readTime&&(n=Vb(t.readTime)),r.done()})).next((function(){return n}))}(e)})).then((function(e){n.Fs=e})));case 2:case"end":return e.stop()}}),e)}))),kx.apply(this,arguments)}function bx(e,t,n,r){return wx.apply(this,arguments)}function wx(){return wx=a(u().mark((function e(t,n,r,i){var a,o,s,c,l,f,d,h,p,v;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=py(t),o=tk(),s=Yg(),c=Bn(r);try{for(c.s();!(l=c.n()).done;)f=l.value,d=n.Gs(f.metadata.name),f.document&&(o=o.add(d)),(h=n.js(f)).setReadTime(n.Qs(f.metadata.readTime)),s=s.insert(d,h)}catch(u){c.e(u)}finally{c.f()}return p=a.Bs.newChangeBuffer({trackRemovals:!0}),e.next=7,dx(a,function(e){return Jm(Hm(Uy.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return v=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return lx(e,p,s).next((function(t){return p.apply(e),t})).next((function(t){return a.Un.removeMatchingKeysForTargetId(e,v.targetId).next((function(){return a.Un.addMatchingKeys(e,o,v.targetId)})).next((function(){return a.Us.Ts(e,t)})).next((function(){return t}))}))})));case 9:case"end":return e.stop()}}),e)}))),wx.apply(this,arguments)}function xx(e,t){return Ex.apply(this,arguments)}function Ex(){return Ex=a(u().mark((function e(t,n){var r,i,a,o=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:tk(),e.next=3,dx(t,Jm(Wb(n.bundledQuery)));case 3:return i=e.sent,a=py(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=kk(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Kn.saveNamedQuery(e,n);var o=i.withResumeToken(qy.EMPTY_BYTE_STRING,t);return a.Ms=a.Ms.insert(o.targetId,o),a.Un.updateTargetData(e,o).next((function(){return a.Un.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Un.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Kn.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Ex.apply(this,arguments)}var _x=function(){function e(t){qe(this,e),this.O=t,this.Ws=new Map,this.zs=new Map}return Ke(e,[{key:"getBundleMetadata",value:function(e,t){return bb.resolve(this.Ws.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Ws.set(t.id,{id:(n=t).id,version:n.version,createTime:kk(n.createTime)}),bb.resolve()}},{key:"getNamedQuery",value:function(e,t){return bb.resolve(this.zs.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.zs.set(t.name,function(e){return{name:e.name,query:Wb(e.bundledQuery),readTime:kk(e.readTime)}}(t)),bb.resolve()}}]),e}(),Ix=function(){function e(){qe(this,e),this.overlays=new zg(tm.comparator),this.Hs=new Map}return Ke(e,[{key:"getOverlay",value:function(e,t){return bb.resolve(this.overlays.get(t))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n){r.Yt(e,t,n)})),bb.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Hs.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.Hs.delete(n)),bb.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=new Map,i=t.length+1,a=new tm(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return bb.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new zg((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=new Map,i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=new Map,c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(t,e)})),!(s.size>=r)););return bb.resolve(s)}},{key:"Yt",value:function(e,t,n){if(null!==n){var r=this.overlays.get(n.key);null!==r&&this.Hs.get(r.largestBatchId).delete(n.key),this.overlays=this.overlays.insert(n.key,new Db(t,n));var i=this.Hs.get(t);void 0===i&&(i=new Set,this.Hs.set(t,i)),i.add(n.key)}}}]),e}(),Tx=function(){function e(){qe(this,e),this.Js=new Wg(Sx.Ys),this.Xs=new Wg(Sx.Zs)}return Ke(e,[{key:"isEmpty",value:function(){return this.Js.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Sx(e,t);this.Js=this.Js.add(n),this.Xs=this.Xs.add(n)}},{key:"ti",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.ei(new Sx(e,t))}},{key:"ni",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"si",value:function(e){var t=this,n=new tm(new Uy([])),r=new Sx(n,e),i=new Sx(n,e+1),a=[];return this.Xs.forEachInRange([r,i],(function(e){t.ei(e),a.push(e.key)})),a}},{key:"ii",value:function(){var e=this;this.Js.forEach((function(t){return e.ei(t)}))}},{key:"ei",value:function(e){this.Js=this.Js.delete(e),this.Xs=this.Xs.delete(e)}},{key:"ri",value:function(e){var t=new tm(new Uy([])),n=new Sx(t,e),r=new Sx(t,e+1),i=tk();return this.Xs.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Sx(e,0),n=this.Js.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Sx=function(){function e(t,n){qe(this,e),this.key=t,this.oi=n}return Ke(e,null,[{key:"Ys",value:function(e,t){return tm.comparator(e.key,t.key)||Ny(e.oi,t.oi)}},{key:"Zs",value:function(e,t){return Ny(e.oi,t.oi)||tm.comparator(e.key,t.key)}}]),e}(),Cx=function(){function e(t,n){qe(this,e),this.indexManager=t,this.referenceDelegate=n,this.gs=[],this.ci=1,this.ui=new Wg(Sx.Ys)}return Ke(e,[{key:"checkEmpty",value:function(e){return bb.resolve(0===this.gs.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ci;this.ci++,this.gs.length>0&&this.gs[this.gs.length-1];var a=new Ob(i,t,n,r);this.gs.push(a);var o,u=Bn(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.ui=this.ui.add(new Sx(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return bb.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return bb.resolve(this.ai(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.hi(n),i=r<0?0:r;return bb.resolve(this.gs.length>i?this.gs[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return bb.resolve(0===this.gs.length?-1:this.ci-1)}},{key:"getAllMutationBatches",value:function(e){return bb.resolve(this.gs.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Sx(t,0),i=new Sx(t,Number.POSITIVE_INFINITY),a=[];return this.ui.forEachInRange([r,i],(function(e){var t=n.ai(e.oi);a.push(t)})),bb.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Wg(Ny);return t.forEach((function(e){var t=new Sx(e,0),i=new Sx(e,Number.POSITIVE_INFINITY);n.ui.forEachInRange([t,i],(function(e){r=r.add(e.oi)}))})),bb.resolve(this.li(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;tm.isDocumentKey(i)||(i=i.child(""));var a=new Sx(new tm(i),0),o=new Wg(Ny);return this.ui.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.oi)),!0)}),a),bb.resolve(this.li(o))}},{key:"li",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.ai(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;hy(0===this.fi(t.batchId,"removed")),this.gs.shift();var r=this.ui;return bb.forEach(t.mutations,(function(i){var a=new Sx(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.ui=r}))}},{key:"Qe",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Sx(t,0),r=this.ui.firstAfterOrEqual(n);return bb.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.gs.length,bb.resolve()}},{key:"fi",value:function(e,t){return this.hi(e)}},{key:"hi",value:function(e){return 0===this.gs.length?0:e-this.gs[0].batchId}},{key:"ai",value:function(e){var t=this.hi(e);return t<0||t>=this.gs.length?null:this.gs[t]}}]),e}(),Nx=function(){function e(t){qe(this,e),this.di=t,this.docs=new zg(tm.comparator),this.size=0}return Ke(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.di(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return bb.resolve(n?n.document.mutableCopy():km.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Yg();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():km.newInvalidDocument(e))})),bb.resolve(r)}},{key:"getAll",value:function(e,t,n){for(var r=Yg(),i=new tm(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||s.readTime.compareTo(n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return bb.resolve(r)}},{key:"_i",value:function(e,t){return bb.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Px(this)}},{key:"getSize",value:function(e){return bb.resolve(this.size)}}]),e}(),Px=function(e){Ot(n,e);var t=Ft(n);function n(e){var r;return qe(this,n),(r=t.call(this)).Tn=e,r}return Ke(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Tn.addEntry(e,i)):t.Tn.removeEntry(r)})),bb.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Tn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Tn.getEntries(e,t)}}]),n}(Vw),Ax=function(){function e(t){qe(this,e),this.persistence=t,this.wi=new jw((function(e){return Tm(e)}),Sm),this.lastRemoteSnapshotVersion=Ry.min(),this.highestTargetId=0,this.mi=0,this.gi=new Tx,this.targetCount=0,this.yi=Tw.He()}return Ke(e,[{key:"forEachTarget",value:function(e,t){return this.wi.forEach((function(e,n){return t(n)})),bb.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return bb.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return bb.resolve(this.mi)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.yi.next(),bb.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.mi&&(this.mi=t),bb.resolve()}},{key:"Ze",value:function(e){this.wi.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.yi=new Tw(t),this.highestTargetId=t),e.sequenceNumber>this.mi&&(this.mi=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Ze(t),this.targetCount+=1,bb.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Ze(t),bb.resolve()}},{key:"removeTargetData",value:function(e,t){return this.wi.delete(t.target),this.gi.si(t.targetId),this.targetCount-=1,bb.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.wi.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.wi.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),bb.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return bb.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.wi.get(t)||null;return bb.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.gi.ti(t,n),bb.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.gi.ni(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),bb.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.gi.si(t),bb.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.gi.ri(t);return bb.resolve(n)}},{key:"containsKey",value:function(e,t){return bb.resolve(this.gi.containsKey(t))}}]),e}(),Ox=function(){function e(t,n){var r=this;qe(this,e),this.pi={},this.overlays={},this.Nn=new Ty(0),this.xn=!1,this.xn=!0,this.referenceDelegate=t(this),this.Un=new Ax(this),this.indexManager=new lw,this.qn=new Nx((function(e){return r.referenceDelegate.Ii(e)})),this.O=new Mb(n),this.Kn=new _x(this.O)}return Ke(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.xn=!1,Promise.resolve()}},{key:"started",get:function(){return this.xn}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Ix,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.pi[e.toKey()];return n||(n=new Cx(t,this.referenceDelegate),this.pi[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Un}},{key:"getRemoteDocumentCache",value:function(){return this.qn}},{key:"getBundleCache",value:function(){return this.Kn}},{key:"runTransaction",value:function(e,t,n){var r=this;sy("MemoryPersistence","Starting transaction:",e);var i=new Rx(this.Nn.next());return this.referenceDelegate.Ei(),n(i).next((function(e){return r.referenceDelegate.Ti(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ai",value:function(e,t){return bb.or(Object.values(this.pi).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Rx=function(e){Ot(n,e);var t=Ft(n);function n(e){var r;return qe(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return Ke(n)}(kb),Dx=function(){function e(t){qe(this,e),this.persistence=t,this.Ri=new Tx,this.Pi=null}return Ke(e,[{key:"vi",get:function(){if(this.Pi)return this.Pi;throw dy()}},{key:"addReference",value:function(e,t,n){return this.Ri.addReference(n,t),this.vi.delete(n.toString()),bb.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Ri.removeReference(n,t),this.vi.add(n.toString()),bb.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.vi.add(t.toString()),bb.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Ri.si(t.targetId).forEach((function(e){return n.vi.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.vi.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Ei",value:function(){this.Pi=new Set}},{key:"Ti",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return bb.forEach(this.vi,(function(r){var i=tm.fromPath(r);return t.Vi(e,i).next((function(e){e||n.removeEntry(i,Ry.min())}))})).next((function(){return t.Pi=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Vi(e,t).next((function(e){e?n.vi.delete(t.toString()):n.vi.add(t.toString())}))}},{key:"Ii",value:function(e){return 0}},{key:"Vi",value:function(e,t){var n=this;return bb.or([function(){return bb.resolve(n.Ri.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ai(e,t)}])}}],[{key:"bi",value:function(t){return new e(t)}}]),e}();function Lx(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Mx(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Fx(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Ux=function(){function e(t,n,r,i){qe(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return Ke(e,[{key:"Di",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Si",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new yy(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(cy("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),jx=function(){function e(t,n,r){qe(this,e),this.targetId=t,this.state=n,this.error=r}return Ke(e,[{key:"Di",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Si",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new yy(i.error.code,i.error.message))),a?new e(t,i.state,r):(cy("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Vx=function(){function e(t,n){qe(this,e),this.clientId=t,this.activeTargetIds=n}return Ke(e,null,[{key:"Si",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=rk(),o=0;i&&o<r.activeTargetIds.length;++o)i=em(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(cy("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Bx=function(){function e(t,n){qe(this,e),this.clientId=t,this.onlineState=n}return Ke(e,null,[{key:"Si",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(cy("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),qx=function(){function e(){qe(this,e),this.activeTargetIds=rk()}return Ke(e,[{key:"Ci",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Ni",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Di",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),zx=function(){function e(t,n,r,i,a){qe(this,e),this.window=t,this.Sn=n,this.persistenceKey=r,this.xi=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ki=this.Oi.bind(this),this.Mi=new zg(Ny),this.started=!1,this.$i=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Fi=Lx(this.persistenceKey,this.xi),this.Bi=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.Mi=this.Mi.insert(this.xi,new qx),this.Li=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.Ui=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.qi=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.Ki=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Gi=function(e){return"firestore_bundle_loaded_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.ki)}return Ke(e,[{key:"start",value:function(){var e=a(u().mark((function e(){var t,n,r,i,a,o,s,c,l,f,d,h=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.ds();case 2:t=e.sent,n=Bn(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.xi){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Lx(this.persistenceKey,i)))&&(o=Vx.Si(i,a))&&(this.Mi=this.Mi.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.ji(),(s=this.storage.getItem(this.Ki))&&(c=this.Qi(s))&&this.Wi(c),l=Bn(this.$i);try{for(l.s();!(f=l.n()).done;)d=f.value,this.Oi(d)}catch(u){l.e(u)}finally{l.f()}this.$i=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.Bi,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.zi(this.Mi)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.Mi.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Hi(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Hi(e,t,n),this.Ji(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Fx(this.persistenceKey,e));if(n){var r=jx.Si(e,n);r&&(t=r.state)}}return this.Yi.Ci(e),this.ji(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Yi.Ni(e),this.ji()}},{key:"isLocalQueryTarget",value:function(e){return this.Yi.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Fx(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Xi(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Ji(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Zi(e)}},{key:"notifyBundleLoaded",value:function(){this.tr()}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.ki),this.removeItem(this.Fi),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return sy("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){sy("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){sy("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"Oi",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(sy("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Fi)return void cy("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Sn.enqueueRetryable(a(u().mark((function e(){var r,i,a,o,s,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=41;break}if(null===n.key){e.next=39;break}if(!t.Li.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.er(n.key),e.abrupt("return",t.nr(r,null));case 6:if(!(i=t.sr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.nr(i.clientId,i));case 9:e.next=39;break;case 11:if(!t.Ui.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.ir(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.rr(a));case 16:e.next=39;break;case 18:if(!t.qi.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.cr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.ur(o));case 23:e.next=39;break;case 25:if(n.key!==t.Ki){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(s=t.Qi(n.newValue))){e.next=30;break}return e.abrupt("return",t.Wi(s));case 30:e.next=39;break;case 32:if(n.key!==t.Bi){e.next=37;break}c=function(e){var t=Ty.A;if(null!=e)try{var n=JSON.parse(e);hy("number"==typeof n),t=n}catch(e){cy("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),c!==Ty.A&&t.sequenceNumberHandler(c),e.next=39;break;case 37:if(n.key!==t.Gi){e.next=39;break}return e.abrupt("return",t.syncEngine.ar());case 39:e.next=42;break;case 41:t.$i.push(n);case 42:case"end":return e.stop()}}),e)}))))}}},{key:"Yi",get:function(){return this.Mi.get(this.xi)}},{key:"ji",value:function(){this.setItem(this.Fi,this.Yi.Di())}},{key:"Hi",value:function(e,t,n){var r=new Ux(this.currentUser,e,t,n),i=Mx(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Di())}},{key:"Ji",value:function(e){var t=Mx(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Zi",value:function(e){var t={clientId:this.xi,onlineState:e};this.storage.setItem(this.Ki,JSON.stringify(t))}},{key:"Xi",value:function(e,t,n){var r=Fx(this.persistenceKey,e),i=new jx(e,t,n);this.setItem(r,i.Di())}},{key:"tr",value:function(){this.setItem(this.Gi,"value-not-used")}},{key:"er",value:function(e){var t=this.Li.exec(e);return t?t[1]:null}},{key:"sr",value:function(e,t){var n=this.er(e);return Vx.Si(n,t)}},{key:"ir",value:function(e,t){var n=this.Ui.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Ux.Si(new iy(i),r,t)}},{key:"cr",value:function(e,t){var n=this.qi.exec(e),r=Number(n[1]);return jx.Si(r,t)}},{key:"Qi",value:function(e){return Bx.Si(e)}},{key:"rr",value:function(){var e=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.hr(t.batchId,t.state,t.error));case 2:sy("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ur",value:function(e){return this.syncEngine.lr(e.targetId,e.state,e.error)}},{key:"nr",value:function(e,t){var n=this,r=t?this.Mi.insert(e,t):this.Mi.remove(e),i=this.zi(this.Mi),a=this.zi(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.dr(o,u).then((function(){n.Mi=r}))}},{key:"Wi",value:function(e){this.Mi.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"zi",value:function(e){var t=rk();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"Vt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Kx=function(){function e(){qe(this,e),this._r=new qx,this.wr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return Ke(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this._r.Ci(e),this.wr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.wr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this._r.Ni(e)}},{key:"isLocalQueryTarget",value:function(e){return this._r.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.wr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this._r.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this._r.activeTargetIds.has(e)}},{key:"start",value:function(){return this._r=new qx,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(){}}]),e}(),Hx=function(){function e(){qe(this,e)}return Ke(e,[{key:"mr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Wx=function(){function e(){var t=this;qe(this,e),this.gr=function(){return t.yr()},this.pr=function(){return t.Ir()},this.Er=[],this.Tr()}return Ke(e,[{key:"mr",value:function(e){this.Er.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.gr),window.removeEventListener("offline",this.pr)}},{key:"Tr",value:function(){window.addEventListener("online",this.gr),window.addEventListener("offline",this.pr)}},{key:"yr",value:function(){sy("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=Bn(this.Er);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Ir",value:function(){sy("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=Bn(this.Er);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"Vt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Gx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Zx=function(){function e(t){qe(this,e),this.Ar=t.Ar,this.Rr=t.Rr}return Ke(e,[{key:"Pr",value:function(e){this.br=e}},{key:"vr",value:function(e){this.Vr=e}},{key:"onMessage",value:function(e){this.Sr=e}},{key:"close",value:function(){this.Rr()}},{key:"send",value:function(e){this.Ar(e)}},{key:"Dr",value:function(){this.br()}},{key:"Cr",value:function(e){this.Vr(e)}},{key:"Nr",value:function(e){this.Sr(e)}}]),e}(),Qx=function(e){Ot(n,e);var t=Ft(n);function n(e){var r;return qe(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return Ke(n,[{key:"Br",value:function(e,t,n,r){return new Promise((function(i,a){var o=new ny;o.listenOnce($v.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case Yv.NO_ERROR:var t=o.getResponseJson();sy("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Yv.TIMEOUT:sy("Connection",'RPC "'+e+'" timed out'),a(new yy(vy.DEADLINE_EXCEEDED,"Request time out"));break;case Yv.HTTP_ERROR:var n=o.getStatus();if(sy("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(vy).indexOf(t)>=0?t:vy.UNKNOWN}(r.status);a(new yy(u,r.message))}else a(new yy(vy.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new yy(vy.UNAVAILABLE,"Connection failed."));break;default:dy()}}finally{sy("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"Ur",value:function(e,t,n){var r=[this.kr,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Zv(),a=Qv(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new ey({})),this.Fr(o.initMessageHeaders,t,n),Xn()||nr()||Jn().indexOf("Electron/")>=0||rr()||Jn().indexOf("MSAppHost/")>=0||tr()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");sy("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new Zx({Ar:function(e){l?sy("Connection","Not sending because WebChannel is closed:",e):(c||(sy("Connection","Opening WebChannel transport."),s.open(),c=!0),sy("Connection","WebChannel sending:",e),s.send(e))},Rr:function(){return s.close()}}),d=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return d(s,ty.EventType.OPEN,(function(){l||sy("Connection","WebChannel transport opened.")})),d(s,ty.EventType.CLOSE,(function(){l||(l=!0,sy("Connection","WebChannel transport closed"),f.Cr())})),d(s,ty.EventType.ERROR,(function(e){l||(l=!0,ly("Connection","WebChannel transport errored:",e),f.Cr(new yy(vy.UNAVAILABLE,"The operation could not be completed")))})),d(s,ty.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];hy(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){sy("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=Mg[e];if(void 0!==t)return qg(t)}(a),u=i.message;void 0===o&&(o=vy.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.Cr(new yy(o,u)),s.close()}else sy("Connection","WebChannel received:",n),f.Nr(n)}})),d(a,Jv.STAT_EVENT,(function(e){e.stat===Xv.PROXY?sy("Connection","Detected buffering proxy"):e.stat===Xv.NOPROXY&&sy("Connection","Detected no buffering proxy")})),setTimeout((function(){f.Dr()}),0),f}}]),n}(function(){function e(t){qe(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.kr=n+"://"+t.host,this.Or="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return Ke(e,[{key:"Mr",value:function(e,t,n,r,i){var a=this.$r(e,t);sy("RestConnection","Sending: ",a,n);var o={};return this.Fr(o,r,i),this.Br(e,a,o,n).then((function(e){return sy("RestConnection","Received: ",e),e}),(function(t){throw ly("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"Lr",value:function(e,t,n,r,i){return this.Mr(e,t,n,r,i)}},{key:"Fr",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+ay,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"$r",value:function(e,t){var n=Gx[e];return"".concat(this.kr,"/v1/").concat(t,":").concat(n)}}]),e}());function Yx(){return"undefined"!=typeof window?window:null}function $x(){return"undefined"!=typeof document?document:null}function Jx(e){return new vk(e,!0)}var Xx=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;qe(this,e),this.Sn=t,this.timerId=n,this.qr=r,this.Kr=i,this.Gr=a,this.jr=0,this.Qr=null,this.Wr=Date.now(),this.reset()}return Ke(e,[{key:"reset",value:function(){this.jr=0}},{key:"zr",value:function(){this.jr=this.Gr}},{key:"Hr",value:function(e){var t=this;this.cancel();var n=Math.floor(this.jr+this.Jr()),r=Math.max(0,Date.now()-this.Wr),i=Math.max(0,n-r);i>0&&sy("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.jr," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Qr=this.Sn.enqueueAfterDelay(this.timerId,i,(function(){return t.Wr=Date.now(),e()})),this.jr*=this.Kr,this.jr<this.qr&&(this.jr=this.qr),this.jr>this.Gr&&(this.jr=this.Gr)}},{key:"Yr",value:function(){null!==this.Qr&&(this.Qr.skipDelay(),this.Qr=null)}},{key:"cancel",value:function(){null!==this.Qr&&(this.Qr.cancel(),this.Qr=null)}},{key:"Jr",value:function(){return(Math.random()-.5)*this.jr}}]),e}(),eE=function(){function e(t,n,r,i,a,o,u,s){qe(this,e),this.Sn=t,this.Xr=r,this.Zr=i,this.eo=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.no=0,this.so=null,this.io=null,this.stream=null,this.ro=new Xx(t,n)}return Ke(e,[{key:"oo",value:function(){return 1===this.state||5===this.state||this.co()}},{key:"co",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.uo()}},{key:"stop",value:function(){var e=a(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.oo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ao",value:function(){this.state=0,this.ro.reset()}},{key:"ho",value:function(){var e=this;this.co()&&null===this.so&&(this.so=this.Sn.enqueueAfterDelay(this.Xr,6e4,(function(){return e.lo()})))}},{key:"fo",value:function(e){this._o(),this.stream.send(e)}},{key:"lo",value:function(){var e=a(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.co()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_o",value:function(){this.so&&(this.so.cancel(),this.so=null)}},{key:"wo",value:function(){this.io&&(this.io.cancel(),this.io=null)}},{key:"close",value:function(){var e=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._o(),this.wo(),this.ro.cancel(),this.no++,4!==t?this.ro.reset():n&&n.code===vy.RESOURCE_EXHAUSTED?(cy(n.toString()),cy("Using maximum backoff delay to prevent overloading the backend."),this.ro.zr()):n&&n.code===vy.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.mo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.vr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"mo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.yo(this.no),n=this.no;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=Me(t,2),i=r[0],a=r[1];e.no===n&&e.po(i,a)}),(function(n){t((function(){var t=new yy(vy.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Io(t)}))}))}},{key:"po",value:function(e,t){var n=this,r=this.yo(this.no);this.stream=this.Eo(e,t),this.stream.Pr((function(){r((function(){return n.state=2,n.io=n.Sn.enqueueAfterDelay(n.Zr,1e4,(function(){return n.co()&&(n.state=3),Promise.resolve()})),n.listener.Pr()}))})),this.stream.vr((function(e){r((function(){return n.Io(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"uo",value:function(){var e=this;this.state=5,this.ro.Hr(a(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Io",value:function(e){return sy("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"yo",value:function(e){var t=this;return function(n){t.Sn.enqueueAndForget((function(){return t.no===e?n():(sy("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),tE=function(e){Ot(n,e);var t=Ft(n);function n(e,r,i,a,o,u){var s;return qe(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).O=o,s}return Ke(n,[{key:"Eo",value:function(e,t){return this.eo.Ur("Listen",e,t)}},{key:"onMessage",value:function(e){this.ro.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:dy()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.N?(hy(void 0===t||"string"==typeof t),qy.fromBase64String(t||"")):(hy(void 0===t||t instanceof Uint8Array),qy.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?vy.UNKNOWN:qg(e.code);return new yy(t,e.message||"")}(o);n=new sk(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=Ek(e,s.document.name),l=kk(s.document.updateTime),f=new mm({mapValue:{fields:s.document.fields}}),d=km.newFoundDocument(c,l,f),h=s.targetIds||[],p=s.removedTargetIds||[];n=new ok(h,p,d.key,d)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var y=Ek(e,v.document),m=v.readTime?kk(v.readTime):Ry.min(),g=km.newNoDocument(y,m),k=v.removedTargetIds||[];n=new ok([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var w=Ek(e,b.document),x=b.removedTargetIds||[];n=new ok([],x,w,null)}else{if(!("filter"in t))return dy();t.filter;var E=t.filter;E.targetId;var _=E.count||0,I=new Vg(_),T=E.targetId;n=new uk(T,I)}return n}(this.O,e),n=function(e){if(!("targetChange"in e))return Ry.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Ry.min():t.readTime?kk(t.readTime):Ry.min()}(e);return this.listener.To(t,n)}},{key:"Ao",value:function(e){var t={};t.database=Tk(this.O),t.addTarget=function(e,t){var n,r=t.target;return(n=Cm(r)?{documents:Rk(e,r)}:{query:Dk(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=mk(e,t.resumeToken):t.snapshotVersion.compareTo(Ry.min())>0&&(n.readTime=yk(e,t.snapshotVersion.toTimestamp())),n}(this.O,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return dy()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.O,e);n&&(t.labels=n),this.fo(t)}},{key:"Ro",value:function(e){var t={};t.database=Tk(this.O),t.removeTarget=e,this.fo(t)}}]),n}(eE),nE=function(e){Ot(n,e);var t=Ft(n);function n(e,r,i,a,o,u){var s;return qe(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).O=o,s.Po=!1,s}return Ke(n,[{key:"bo",get:function(){return this.Po}},{key:"start",value:function(){this.Po=!1,this.lastStreamToken=void 0,At(Nt(n.prototype),"start",this).call(this)}},{key:"mo",value:function(){this.Po&&this.vo([])}},{key:"Eo",value:function(e,t){return this.eo.Ur("Write",e,t)}},{key:"onMessage",value:function(e){if(hy(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Po){this.ro.reset();var t=function(e,t){return e&&e.length>0?(hy(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?kk(e.updateTime):kk(t);return n.isEqual(Ry.min())&&(n=kk(t)),new xg(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=kk(e.commitTime);return this.listener.Vo(n,t)}return hy(!e.writeResults||0===e.writeResults.length),this.Po=!0,this.listener.So()}},{key:"Do",value:function(){var e={};e.database=Tk(this.O),this.fo(e)}},{key:"vo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Ak(t.O,e)}))};this.fo(n)}}]),n}(eE),rE=function(e){Ot(n,e);var t=Ft(n);function n(e,r,i,a){var o;return qe(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.eo=i,o.O=a,o.Co=!1,o}return Ke(n,[{key:"No",value:function(){if(this.Co)throw new yy(vy.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Mr",value:function(e,t,n){var r=this;return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=Me(i,2),o=a[0],u=a[1];return r.eo.Mr(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===vy.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new yy(vy.UNKNOWN,e.toString())}))}},{key:"Lr",value:function(e,t,n){var r=this;return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=Me(i,2),o=a[0],u=a[1];return r.eo.Lr(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===vy.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new yy(vy.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.Co=!0}}]),n}(function(){return Ke((function e(){qe(this,e)}))}()),iE=function(){function e(t,n){qe(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.xo=0,this.ko=null,this.Oo=!0}return Ke(e,[{key:"Mo",value:function(){var e=this;0===this.xo&&(this.$o("Unknown"),this.ko=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.ko=null,e.Fo("Backend didn't respond within 10 seconds."),e.$o("Offline"),Promise.resolve()})))}},{key:"Bo",value:function(e){"Online"===this.state?this.$o("Unknown"):(this.xo++,this.xo>=1&&(this.Lo(),this.Fo("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.$o("Offline")))}},{key:"set",value:function(e){this.Lo(),this.xo=0,"Online"===e&&(this.Oo=!1),this.$o(e)}},{key:"$o",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"Fo",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.Oo?(cy(t),this.Oo=!1):sy("OnlineStateTracker",t)}},{key:"Lo",value:function(){null!==this.ko&&(this.ko.cancel(),this.ko=null)}}]),e}(),aE=Ke((function e(t,n,r,i,o){var s=this;qe(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Uo=[],this.qo=new Map,this.Ko=new Set,this.Go=[],this.jo=o,this.jo.mr((function(e){r.enqueueAndForget(a(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=yE(s),!e.t0){e.next=5;break}return sy("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=a(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=py(t)).Ko.add(4),e.next=4,sE(n);case 4:return n.Qo.set("Unknown"),n.Ko.delete(4),e.next=8,oE(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(s);case 5:case"end":return e.stop()}}),e)}))))})),this.Qo=new iE(r,i)}));function oE(e){return uE.apply(this,arguments)}function uE(){return uE=a(u().mark((function e(t){var n,r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!yE(t)){e.next=18;break}n=Bn(t.Go),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),uE.apply(this,arguments)}function sE(e){return cE.apply(this,arguments)}function cE(){return cE=a(u().mark((function e(t){var n,r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Bn(t.Go),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),cE.apply(this,arguments)}function lE(e,t){var n=py(e);n.qo.has(t.targetId)||(n.qo.set(t.targetId,t),vE(n)?pE(n):HE(n).co()&&dE(n,t))}function fE(e,t){var n=py(e),r=HE(n);n.qo.delete(t),r.co()&&hE(n,t),0===n.qo.size&&(r.co()?r.ho():yE(n)&&n.Qo.set("Unknown"))}function dE(e,t){e.Wo.Z(t.targetId),HE(e).Ao(t)}function hE(e,t){e.Wo.Z(t),HE(e).Ro(t)}function pE(e){e.Wo=new lk({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Tt:function(t){return e.qo.get(t)||null}}),HE(e).start(),e.Qo.Mo()}function vE(e){return yE(e)&&!HE(e).oo()&&e.qo.size>0}function yE(e){return 0===py(e).Ko.size}function mE(e){e.Wo=void 0}function gE(e){return kE.apply(this,arguments)}function kE(){return kE=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.qo.forEach((function(e,n){dE(t,e)}));case 1:case"end":return e.stop()}}),e)}))),kE.apply(this,arguments)}function bE(e,t){return wE.apply(this,arguments)}function wE(){return wE=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:mE(t),vE(t)?(t.Qo.Bo(n),pE(t)):t.Qo.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),wE.apply(this,arguments)}function xE(e,t,n){return EE.apply(this,arguments)}function EE(){return EE=a(u().mark((function e(t,n,r){var i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.Qo.set("Online"),!(n instanceof sk&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=a(u().mark((function e(t,n){var r,i,a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=Bn(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.qo.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.qo.delete(o),t.Wo.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),sy("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,_E(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof ok?t.Wo.ct(n):n instanceof uk?t.Wo._t(n):t.Wo.ht(n),r.isEqual(Ry.min())){e.next=29;break}return e.prev=14,e.next=17,sx(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.Wo.yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.qo.get(r);i&&e.qo.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.qo.get(t);if(n){e.qo.set(t,n.withResumeToken(qy.EMPTY_BYTE_STRING,n.snapshotVersion)),hE(e,t);var r=new Lb(n.target,t,1,n.sequenceNumber);dE(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),sy("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,_E(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),EE.apply(this,arguments)}function _E(e,t,n){return IE.apply(this,arguments)}function IE(){return IE=a(u().mark((function e(t,n,r){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ib(n)){e.next=2;break}throw n;case 2:return t.Ko.add(1),e.next=5,sE(t);case 5:t.Qo.set("Offline"),r||(r=function(){return sx(t.localStore)}),t.asyncQueue.enqueueRetryable(a(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return sy("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.Ko.delete(1),e.next=6,oE(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),IE.apply(this,arguments)}function TE(e,t){return t().catch((function(n){return _E(e,n,t)}))}function SE(e){return CE.apply(this,arguments)}function CE(){return CE=a(u().mark((function e(t){var n,r,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=py(t),r=WE(n),i=n.Uo.length>0?n.Uo[n.Uo.length-1].batchId:-1;case 2:if(!NE(n)){e.next=19;break}return e.prev=3,e.next=6,fx(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.Uo.length&&r.ho(),e.abrupt("break",19);case 10:i=a.batchId,PE(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,_E(n,e.t0);case 17:e.next=2;break;case 19:AE(n)&&OE(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),CE.apply(this,arguments)}function NE(e){return yE(e)&&e.Uo.length<10}function PE(e,t){e.Uo.push(t);var n=WE(e);n.co()&&n.bo&&n.vo(t.mutations)}function AE(e){return yE(e)&&!WE(e).oo()&&e.Uo.length>0}function OE(e){WE(e).start()}function RE(e){return DE.apply(this,arguments)}function DE(){return DE=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:WE(t).Do();case 1:case"end":return e.stop()}}),e)}))),DE.apply(this,arguments)}function LE(e){return ME.apply(this,arguments)}function ME(){return ME=a(u().mark((function e(t){var n,r,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=WE(t),r=Bn(t.Uo);try{for(r.s();!(i=r.n()).done;)a=i.value,n.vo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),ME.apply(this,arguments)}function FE(e,t,n){return UE.apply(this,arguments)}function UE(){return UE=a(u().mark((function e(t,n,r){var i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.Uo.shift(),a=Rb.from(i,n,r),e.next=3,TE(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,SE(t);case 5:case"end":return e.stop()}}),e)}))),UE.apply(this,arguments)}function jE(e,t){return VE.apply(this,arguments)}function VE(){return VE=a(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&WE(t).bo,!e.t0){e.next=4;break}return e.next=4,function(){var e=a(u().mark((function e(t,n){var r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Bg(i=n.code)||i===vy.ABORTED){e.next=7;break}return r=t.Uo.shift(),WE(t).ao(),e.next=5,TE(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,SE(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:AE(t)&&OE(t);case 5:case"end":return e.stop()}}),e)}))),VE.apply(this,arguments)}function BE(e,t){return qE.apply(this,arguments)}function qE(){return qE=a(u().mark((function e(t,n){var r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=py(t)).asyncQueue.verifyOperationInProgress(),sy("RemoteStore","RemoteStore received new credentials"),i=yE(r),r.Ko.add(3),e.next=6,sE(r);case 6:return i&&r.Qo.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.Ko.delete(3),e.next=12,oE(r);case 12:case"end":return e.stop()}}),e)}))),qE.apply(this,arguments)}function zE(e,t){return KE.apply(this,arguments)}function KE(){return KE=a(u().mark((function e(t,n){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=py(t),!n){e.next=7;break}return r.Ko.delete(2),e.next=5,oE(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.Ko.add(2),e.next=12,sE(r);case 12:r.Qo.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),KE.apply(this,arguments)}function HE(e){return e.zo||(e.zo=function(e,t,n){var r=py(e);return r.No(),new tE(t,r.eo,r.authCredentials,r.appCheckCredentials,r.O,n)}(e.datastore,e.asyncQueue,{Pr:gE.bind(null,e),vr:bE.bind(null,e),To:xE.bind(null,e)}),e.Go.push(function(){var t=a(u().mark((function t(n){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.zo.ao(),vE(e)?pE(e):e.Qo.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.zo.stop();case 6:mE(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.zo}function WE(e){return e.Ho||(e.Ho=function(e,t,n){var r=py(e);return r.No(),new nE(t,r.eo,r.authCredentials,r.appCheckCredentials,r.O,n)}(e.datastore,e.asyncQueue,{Pr:RE.bind(null,e),vr:jE.bind(null,e),So:LE.bind(null,e),Vo:FE.bind(null,e)}),e.Go.push(function(){var t=a(u().mark((function t(n){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Ho.ao(),t.next=4,SE(e);case 4:t.next=9;break;case 6:return t.next=8,e.Ho.stop();case 8:e.Uo.length>0&&(sy("RemoteStore","Stopping write stream with ".concat(e.Uo.length," pending writes")),e.Uo=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Ho}var GE=function(){function e(t,n,r,i,a){qe(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new my,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return Ke(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new yy(vy.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function ZE(e,t){if(cy("AsyncQueue","".concat(t,": ").concat(e)),Ib(e))return new yy(vy.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var QE=function(){function e(t){qe(this,e),this.comparator=t?function(e,n){return t(e,n)||tm.comparator(e.key,n.key)}:function(e,t){return tm.comparator(e.key,t.key)},this.keyedMap=Jg(),this.sortedSet=new zg(this.comparator)}return Ke(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),YE=function(){function e(){qe(this,e),this.Jo=new zg(tm.comparator)}return Ke(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Jo.get(t);n?0!==e.type&&3===n.type?this.Jo=this.Jo.insert(t,e):3===e.type&&1!==n.type?this.Jo=this.Jo.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Jo=this.Jo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Jo=this.Jo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Jo=this.Jo.remove(t):1===e.type&&2===n.type?this.Jo=this.Jo.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Jo=this.Jo.insert(t,{type:2,doc:e.doc}):dy():this.Jo=this.Jo.insert(t,e)}},{key:"Yo",value:function(){var e=[];return this.Jo.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),$E=function(){function e(t,n,r,i,a,o,u,s){qe(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return Ke(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&eg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,QE.emptySet(n),a,r,i,!0,!1)}}]),e}(),JE=Ke((function e(){qe(this,e),this.Xo=void 0,this.listeners=[]})),XE=Ke((function e(){qe(this,e),this.queries=new jw((function(e){return tg(e)}),eg),this.onlineState="Unknown",this.Zo=new Set}));function e_(e,t){return t_.apply(this,arguments)}function t_(){return t_=a(u().mark((function e(t,n){var r,i,a,o,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=py(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new JE),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Xo=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=ZE(e.t0,"Initialization of query '".concat(ng(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,o),o.listeners.push(n),n.tc(r.onlineState),o.Xo&&n.ec(o.Xo)&&o_(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),t_.apply(this,arguments)}function n_(e,t){return r_.apply(this,arguments)}function r_(){return r_=a(u().mark((function e(t,n){var r,i,a,o,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=py(t),i=n.query,a=!1,(o=r.queries.get(i))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),r_.apply(this,arguments)}function i_(e,t){var n,r=py(e),i=!1,a=Bn(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=Bn(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.ec(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Xo=o}}}catch(f){a.e(f)}finally{a.f()}i&&o_(r)}function a_(e,t,n){var r=py(e),i=r.queries.get(t);if(i){var a,o=Bn(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function o_(e){e.Zo.forEach((function(e){e.next()}))}var u_=function(){function e(t,n,r){qe(this,e),this.query=t,this.nc=n,this.sc=!1,this.ic=null,this.onlineState="Unknown",this.options=r||{}}return Ke(e,[{key:"ec",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=Bn(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new $E(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.sc?this.rc(e)&&(this.nc.next(e),a=!0):this.oc(e,this.onlineState)&&(this.cc(e),a=!0),this.ic=e,a}},{key:"onError",value:function(e){this.nc.error(e)}},{key:"tc",value:function(e){this.onlineState=e;var t=!1;return this.ic&&!this.sc&&this.oc(this.ic,e)&&(this.cc(this.ic),t=!0),t}},{key:"oc",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.uc||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"rc",value:function(e){if(e.docChanges.length>0)return!0;var t=this.ic&&this.ic.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"cc",value:function(e){e=$E.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.sc=!0,this.nc.next(e)}}]),e}(),s_=function(){function e(t,n){qe(this,e),this.payload=t,this.byteLength=n}return Ke(e,[{key:"ac",value:function(){return"metadata"in this.payload}}]),e}(),c_=function(){function e(t){qe(this,e),this.O=t}return Ke(e,[{key:"Gs",value:function(e){return Ek(this.O,e)}},{key:"js",value:function(e){return e.metadata.exists?Nk(this.O,e.document,!1):km.newNoDocument(this.Gs(e.metadata.name),this.Qs(e.metadata.readTime))}},{key:"Qs",value:function(e){return kk(e)}}]),e}(),l_=function(){function e(t,n,r){qe(this,e),this.hc=t,this.localStore=n,this.O=r,this.queries=[],this.documents=[],this.progress=f_(t)}return Ke(e,[{key:"lc",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"fc",value:function(e){var t,n=new Map,r=new c_(this.O),i=Bn(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Gs(a.metadata.name),s=Bn(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||tk()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=a(u().mark((function e(){var t,n,r,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bx(this.localStore,new c_(this.O),this.documents,this.hc.id);case 2:t=e.sent,n=this.fc(this.documents),r=Bn(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,xx(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",new Xw(Object.assign({},this.progress),t)));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function f_(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var d_=Ke((function e(t){qe(this,e),this.key=t})),h_=Ke((function e(t){qe(this,e),this.key=t})),p_=function(){function e(t,n){qe(this,e),this.query=t,this.dc=n,this._c=null,this.current=!1,this.wc=tk(),this.mutatedKeys=tk(),this.mc=ig(t),this.gc=new QE(this.mc)}return Ke(e,[{key:"yc",get:function(){return this.dc}},{key:"Ic",value:function(e,t){var n=this,r=t?t.Ec:new YE,i=t?t.gc:this.gc,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s=Wm(this.query)&&i.size===this.query.limit?i.last():null,c=Gm(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=rg(n.query,t)?t:null,d=!!l&&n.mutatedKeys.has(l.key),h=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?d!==h&&(r.track({type:3,doc:f}),p=!0):n.Tc(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.mc(f,s)>0||c&&n.mc(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=h?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),Wm(this.query)||Gm(this.query))for(;o.size>this.query.limit;){var l=Wm(this.query)?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{gc:o,Ec:r,ks:u,mutatedKeys:a}}},{key:"Tc",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.gc;this.gc=e.gc,this.mutatedKeys=e.mutatedKeys;var a=e.Ec.Yo();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return dy()}};return n(e)-n(t)}(e.type,t.type)||r.mc(e.doc,t.doc)})),this.Ac(n);var o=t?this.Rc():[],u=0===this.wc.size&&this.current?1:0,s=u!==this._c;return this._c=u,0!==a.length||s?{snapshot:new $E(this.query,e.gc,i,a,e.mutatedKeys,0===u,s,!1),Pc:o}:{Pc:o}}},{key:"tc",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({gc:this.gc,Ec:new YE,mutatedKeys:this.mutatedKeys,ks:!1},!1)):{Pc:[]}}},{key:"bc",value:function(e){return!this.dc.has(e)&&!!this.gc.has(e)&&!this.gc.get(e).hasLocalMutations}},{key:"Ac",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.dc=t.dc.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.dc=t.dc.delete(e)})),this.current=e.current)}},{key:"Rc",value:function(){var e=this;if(!this.current)return[];var t=this.wc;this.wc=tk(),this.gc.forEach((function(t){e.bc(t.key)&&(e.wc=e.wc.add(t.key))}));var n=[];return t.forEach((function(t){e.wc.has(t)||n.push(new h_(t))})),this.wc.forEach((function(e){t.has(e)||n.push(new d_(e))})),n}},{key:"vc",value:function(e){this.dc=e.Ks,this.wc=tk();var t=this.Ic(e.documents);return this.applyChanges(t,!0)}},{key:"Vc",value:function(){return $E.fromInitialDocuments(this.query,this.gc,this.mutatedKeys,0===this._c)}}]),e}(),v_=Ke((function e(t,n,r){qe(this,e),this.query=t,this.targetId=n,this.view=r})),y_=Ke((function e(t){qe(this,e),this.key=t,this.Sc=!1})),m_=function(){function e(t,n,r,i,a,o){qe(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Dc={},this.Cc=new jw((function(e){return tg(e)}),eg),this.Nc=new Map,this.xc=new Set,this.kc=new zg(tm.comparator),this.Oc=new Map,this.Mc=new Tx,this.$c={},this.Fc=new Map,this.Bc=Tw.Je(),this.onlineState="Unknown",this.Lc=void 0}return Ke(e,[{key:"isPrimaryClient",get:function(){return!0===this.Lc}}]),e}();function g_(e,t){return k_.apply(this,arguments)}function k_(){return k_=a(u().mark((function e(t,n){var r,i,a,o,s,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=fI(t),!(o=r.Cc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Vc(),e.next=15;break;case 6:return e.next=8,dx(r.localStore,Jm(n));case 8:return s=e.sent,r.isPrimaryClient&&lE(r.remoteStore,s),c=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=14,b_(r,n,i,"current"===c);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),k_.apply(this,arguments)}function b_(e,t,n,r){return w_.apply(this,arguments)}function w_(){return w_=a(u().mark((function e(t,n,r,i){var o,s,c,l,f,d;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Uc=function(e,n,r){return function(){var e=a(u().mark((function e(t,n,r,i){var a,o,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Ic(r),e.t0=a.ks,!e.t0){e.next=6;break}return e.next=5,vx(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Ic(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(B_(t,n.targetId,s.Pc),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,vx(t.localStore,n,!0);case 3:return o=e.sent,s=new p_(n,o.Ks),c=s.Ic(o.documents),l=ak.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),f=s.applyChanges(c,t.isPrimaryClient,l),B_(t,r,f.Pc),d=new v_(n,r,s),e.abrupt("return",(t.Cc.set(n,d),t.Nc.has(r)?t.Nc.get(r).push(n):t.Nc.set(r,[n]),f.snapshot));case 11:case"end":return e.stop()}}),e)}))),w_.apply(this,arguments)}function x_(e,t){return E_.apply(this,arguments)}function E_(){return E_=a(u().mark((function e(t,n){var r,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=py(t),i=r.Cc.get(n),!((a=r.Nc.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.Nc.set(i.targetId,a.filter((function(e){return!eg(e,n)}))),void r.Cc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,hx(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),fE(r.remoteStore,i.targetId),j_(r,i.targetId)})).catch(Aw);case 9:e.next=14;break;case 11:return j_(r,i.targetId),e.next=14,hx(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),E_.apply(this,arguments)}function __(e,t,n){return I_.apply(this,arguments)}function I_(){return I_=a(u().mark((function e(t,n,r){var i,a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=dI(t),e.prev=1,e.next=4,function(e,t){var n,r=py(e),i=Oy.now(),a=t.reduce((function(e,t){return e.add(t.key)}),tk());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.Us.Es(e,a).next((function(a){n=a;var o,u=[],s=Bn(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=Cg(c,n.get(c.key));null!=l&&u.push(new Og(c.key,l,gm(l.value.mapValue),Eg.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return r.gs.addMutationBatch(e,i,u,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.$c[e.currentUser.toKey()];r||(r=new zg(Ny)),r=r.insert(t,n),e.$c[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,K_(i,a.changes);case 9:return e.next=11,SE(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=ZE(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),I_.apply(this,arguments)}function T_(e,t){return S_.apply(this,arguments)}function S_(){return S_=a(u().mark((function e(t,n){var r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=py(t),e.prev=1,e.next=4,cx(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.Oc.get(t);n&&(hy(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Sc=!0:e.modifiedDocuments.size>0?hy(n.Sc):e.removedDocuments.size>0&&(hy(n.Sc),n.Sc=!1))})),e.next=8,K_(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Aw(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),S_.apply(this,arguments)}function C_(e,t,n){var r=py(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Cc.forEach((function(e,n){var r=n.view.tc(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=py(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=Bn(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.tc(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&o_(n)}(r.eventManager,t),i.length&&r.Dc.To(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function N_(e,t,n){return P_.apply(this,arguments)}function P_(){return P_=a(u().mark((function e(t,n,r){var i,a,o,s,c,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=py(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.Oc.get(n),!(o=a&&a.key)){e.next=14;break}return s=(s=new zg(tm.comparator)).insert(o,km.newNoDocument(o,Ry.min())),c=tk().add(o),l=new ik(Ry.min(),new Map,new Wg(Ny),s,c),e.next=9,T_(i,l);case 9:i.kc=i.kc.remove(o),i.Oc.delete(n),z_(i),e.next=16;break;case 14:return e.next=16,hx(i.localStore,n,!1).then((function(){return j_(i,n,r)})).catch(Aw);case 16:case"end":return e.stop()}}),e)}))),P_.apply(this,arguments)}function A_(e,t){return O_.apply(this,arguments)}function O_(){return O_=a(u().mark((function e(t,n){var r,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=py(t),i=n.batch.batchId,e.prev=1,e.next=4,ux(r.localStore,n);case 4:return a=e.sent,U_(r,i,null),F_(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,K_(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Aw(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),O_.apply(this,arguments)}function R_(e,t,n){return D_.apply(this,arguments)}function D_(){return D_=a(u().mark((function e(t,n,r){var i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=py(t),e.prev=1,e.next=4,function(e,t){var n=py(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.gs.lookupMutationBatch(e,t).next((function(t){return hy(null!==t),r=t.keys(),n.gs.removeMutationBatch(e,t)})).next((function(){return n.gs.performConsistencyCheck(e)})).next((function(){return n.Us.Es(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,U_(i,n,r),F_(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,K_(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Aw(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),D_.apply(this,arguments)}function L_(e,t){return M_.apply(this,arguments)}function M_(){return M_=a(u().mark((function e(t,n){var r,i,a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return yE((r=py(t)).remoteStore)||sy("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=py(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.gs.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.Fc.get(i)||[]).push(n),r.Fc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=ZE(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),M_.apply(this,arguments)}function F_(e,t){(e.Fc.get(t)||[]).forEach((function(e){e.resolve()})),e.Fc.delete(t)}function U_(e,t,n){var r=py(e),i=r.$c[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.$c[r.currentUser.toKey()]=i}}function j_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=Bn(e.Nc.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.Cc.delete(a),n&&e.Dc.qc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.Nc.delete(t),e.isPrimaryClient&&e.Mc.si(t).forEach((function(t){e.Mc.containsKey(t)||V_(e,t)}))}function V_(e,t){e.xc.delete(t.path.canonicalString());var n=e.kc.get(t);null!==n&&(fE(e.remoteStore,n),e.kc=e.kc.remove(t),e.Oc.delete(n),z_(e))}function B_(e,t,n){var r,i=Bn(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof d_?(e.Mc.addReference(a.key,t),q_(e,a)):a instanceof h_?(sy("SyncEngine","Document no longer in limbo: "+a.key),e.Mc.removeReference(a.key,t),e.Mc.containsKey(a.key)||V_(e,a.key)):dy()}}catch(o){i.e(o)}finally{i.f()}}function q_(e,t){var n=t.key,r=n.path.canonicalString();e.kc.get(n)||e.xc.has(r)||(sy("SyncEngine","New document in limbo: "+n),e.xc.add(r),z_(e))}function z_(e){for(;e.xc.size>0&&e.kc.size<e.maxConcurrentLimboResolutions;){var t=e.xc.values().next().value;e.xc.delete(t);var n=new tm(Uy.fromString(t)),r=e.Bc.next();e.Oc.set(r,new y_(n)),e.kc=e.kc.insert(n,r),lE(e.remoteStore,new Lb(Jm(Hm(n.path)),r,2,Ty.A))}}function K_(e,t,n){return H_.apply(this,arguments)}function H_(){return H_=a(u().mark((function e(t,n,r){var i,o,s,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=py(t),o=[],s=[],c=[],e.t0=i.Cc.isEmpty(),e.t0){e.next=9;break}return i.Cc.forEach((function(e,t){c.push(i.Uc(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),o.push(e);var n=tx.Ss(t.targetId,e);s.push(n)}})))})),e.next=6,Promise.all(c);case 6:return i.Dc.To(o),e.next=9,function(){var e=a(u().mark((function e(t,n){var r,i,a,o,s,c,l,f;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=py(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return bb.forEach(n,(function(t){return bb.forEach(t.vs,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return bb.forEach(t.Vs,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Ib(e.t0)){e.next=10;break}throw e.t0;case 10:sy("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=Bn(n);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.targetId,o.fromCache||(c=r.Ms.get(s),l=c.snapshotVersion,f=c.withLastLimboFreeSnapshotVersion(l),r.Ms=r.Ms.insert(s,f))}catch(u){i.e(u)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,s);case 9:case"end":return e.stop()}}),e)}))),H_.apply(this,arguments)}function W_(e,t){return G_.apply(this,arguments)}function G_(){return G_=a(u().mark((function e(t,n){var r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=py(t)).currentUser.isEqual(n)){e.next=11;break}return sy("SyncEngine","User change. New user:",n.toKey()),e.next=5,ax(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.Fc.forEach((function(e){e.forEach((function(e){e.reject(new yy(vy.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Fc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,K_(r,i.qs);case 11:case"end":return e.stop()}}),e)}))),G_.apply(this,arguments)}function Z_(e,t){var n=py(e),r=n.Oc.get(t);if(r&&r.Sc)return tk().add(r.key);var i=tk(),a=n.Nc.get(t);if(!a)return i;var o,u=Bn(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.Cc.get(s);i=i.unionWith(c.view.yc)}}catch(l){u.e(l)}finally{u.f()}return i}function Q_(e,t){return Y_.apply(this,arguments)}function Y_(){return Y_=a(u().mark((function e(t,n){var r,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=py(t),e.next=3,vx(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.vc(i),e.abrupt("return",(r.isPrimaryClient&&B_(r,n.targetId,a.Pc),a));case 6:case"end":return e.stop()}}),e)}))),Y_.apply(this,arguments)}function $_(e){return J_.apply(this,arguments)}function J_(){return J_=a(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=py(t),e.abrupt("return",mx(n.localStore).then((function(e){return K_(n,e)})));case 2:case"end":return e.stop()}}),e)}))),J_.apply(this,arguments)}function X_(e,t,n,r){return eI.apply(this,arguments)}function eI(){return eI=a(u().mark((function e(t,n,r,i){var a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=py(t),e.next=3,function(e,t){var n=py(e),r=py(n.gs);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Ge(e,t).next((function(t){return t?n.Us.Es(e,t):bb.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,SE(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(U_(a,n,i||null),F_(a,n),function(e,t){py(py(e).gs).Qe(t)}(a.localStore,n)):dy();case 11:return e.next=13,K_(a,o);case 13:e.next=16;break;case 15:sy("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),eI.apply(this,arguments)}function tI(e,t){return nI.apply(this,arguments)}function nI(){return nI=a(u().mark((function e(t,n){var r,i,a,o,s,c,l,f;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(fI(r=py(t)),dI(r),!0!==n||!0===r.Lc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,rI(r,i.toArray());case 5:return a=e.sent,r.Lc=!0,e.next=9,zE(r.remoteStore,!0);case 9:o=Bn(a);try{for(o.s();!(s=o.n()).done;)c=s.value,lE(r.remoteStore,c)}catch(u){o.e(u)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.Lc){e.next=25;break}return l=[],f=Promise.resolve(),r.Nc.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?l.push(t):f=f.then((function(){return j_(r,t),hx(r.localStore,t,!0)})),fE(r.remoteStore,t)})),e.next=19,f;case 19:return e.next=21,rI(r,l);case 21:return function(e){var t=py(e);t.Oc.forEach((function(e,n){fE(t.remoteStore,n)})),t.Mc.ii(),t.Oc=new Map,t.kc=new zg(tm.comparator)}(r),r.Lc=!1,e.next=25,zE(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),nI.apply(this,arguments)}function rI(e,t,n){return iI.apply(this,arguments)}function iI(){return iI=a(u().mark((function e(t,n,r){var i,a,o,s,c,l,f,d,h,p,v,y,m,g;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=py(t),a=[],o=[],s=Bn(n),e.prev=2,s.s();case 4:if((c=s.n()).done){e.next=45;break}if(l=c.value,f=void 0,!(d=i.Nc.get(l))||0===d.length){e.next=34;break}return e.next=11,dx(i.localStore,Jm(d[0]));case 11:f=e.sent,h=Bn(d),e.prev=13,h.s();case 15:if((p=h.n()).done){e.next=24;break}return v=p.value,y=i.Cc.get(v),e.next=20,Q_(i,y);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,yx(i.localStore,l);case 36:return g=e.sent,e.next=39,dx(i.localStore,g);case 39:return f=e.sent,e.next=42,b_(i,aI(g),l,!1);case 42:a.push(f);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),s.e(e.t1);case 50:return e.prev=50,s.f(),e.finish(50);case 53:return e.abrupt("return",(i.Dc.To(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),iI.apply(this,arguments)}function aI(e){return Km(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function oI(e){var t=py(e);return py(py(t.localStore).persistence).ds()}function uI(e,t,n,r){return sI.apply(this,arguments)}function sI(){return sI=a(u().mark((function e(t,n,r,i){var a,o,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=py(t)).Lc){e.next=5;break}sy("SyncEngine","Ignoring unexpected query state notification."),e.next=21;break;case 5:if(!a.Nc.has(n)){e.next=21;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?9:"rejected"===e.t0?16:20;break;case 9:return e.next=11,mx(a.localStore);case 11:return o=e.sent,s=ik.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=15,K_(a,o,s);case 15:return e.abrupt("break",21);case 16:return e.next=18,hx(a.localStore,n,!0);case 18:return j_(a,n,i),e.abrupt("break",21);case 20:dy();case 21:case"end":return e.stop()}}),e)}))),sI.apply(this,arguments)}function cI(e,t,n){return lI.apply(this,arguments)}function lI(){return lI=a(u().mark((function e(t,n,r){var i,a,o,s,c,l,f,d,h;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=fI(t)).Lc){e.next=45;break}a=Bn(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(s=o.value,!i.Nc.has(s)){e.next=10;break}return sy("SyncEngine","Adding an already active target "+s),e.abrupt("continue",19);case 10:return e.next=12,yx(i.localStore,s);case 12:return c=e.sent,e.next=15,dx(i.localStore,c);case 15:return l=e.sent,e.next=18,b_(i,aI(c),l.targetId,!1);case 18:lE(i.remoteStore,l);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:f=Bn(r),e.prev=30,h=u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.value,e.t0=i.Nc.has(t),!e.t0){e.next=5;break}return e.next=5,hx(i.localStore,t,!1).then((function(){fE(i.remoteStore,t),j_(i,t)})).catch(Aw);case 5:case"end":return e.stop()}}),e)})),f.s();case 33:if((d=f.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),f.e(e.t2);case 42:return e.prev=42,f.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),lI.apply(this,arguments)}function fI(e){var t=py(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=T_.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Z_.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=N_.bind(null,t),t.Dc.To=i_.bind(null,t.eventManager),t.Dc.qc=a_.bind(null,t.eventManager),t}function dI(e){var t=py(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=A_.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=R_.bind(null,t),t}function hI(e,t,n){var r=py(e);(function(){var e=a(u().mark((function e(t,n,r){var i,a,o,s,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=py(e),r=kk(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Kn.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=10;break}return e.next=9,n.close();case 9:return e.abrupt("return",void r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)));case 10:return r._updateProgress(f_(i)),a=new l_(i,t.localStore,n.O),e.next=14,n.Kc();case 14:o=e.sent;case 15:if(!o){e.next=25;break}return e.next=18,a.lc(o);case 18:return(s=e.sent)&&r._updateProgress(s),e.next=22,n.Kc();case 22:o=e.sent;case 23:e.next=15;break;case 25:return e.next=27,a.complete();case 27:return c=e.sent,e.next=30,K_(t,c.ws,void 0);case 30:return e.next=32,function(e,t){var n=py(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Kn.saveBundleMetadata(e,t)}))}(t.localStore,i);case 32:r._completeWith(c.progress),e.next=38;break;case 35:e.prev=35,e.t0=e.catch(0),ly("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0);case 38:case"end":return e.stop()}}),e,null,[[0,35]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(){r.sharedClientState.notifyBundleLoaded()}))}var pI=function(){function e(){qe(this,e),this.synchronizeTabs=!1}return Ke(e,[{key:"initialize",value:function(){var e=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.O=Jx(t.databaseInfo.databaseId),this.sharedClientState=this.Gc(t),this.persistence=this.jc(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.Qc(t),this.localStore=this.Wc(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Qc",value:function(e){return null}},{key:"Wc",value:function(e){return ix(this.persistence,new nx,e.initialUser,this.O)}},{key:"jc",value:function(e){return new Ox(Dx.bi,this.O)}},{key:"Gc",value:function(e){return new Kx}},{key:"terminate",value:function(){var e=a(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),vI=function(e){Ot(n,e);var t=Ft(n);function n(e,r,i){var a;return qe(this,n),(a=t.call(this)).zc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return Ke(n,[{key:"initialize",value:function(){var e=a(u().mark((function e(t){var r=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,At(Nt(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,gx(this.localStore);case 4:return e.next=6,this.zc.initialize(this,t);case 6:return e.next=8,dI(this.zc.syncEngine);case 8:return e.next=10,SE(this.zc.remoteStore);case 10:return e.next=12,this.persistence.Hn((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()}));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Wc",value:function(e){return ix(this.persistence,new nx,e.initialUser,this.O)}},{key:"Qc",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new Lw(t,e.asyncQueue)}},{key:"jc",value:function(e){var t=Jw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?gw.withCacheSize(this.cacheSizeBytes):gw.DEFAULT;return new Qw(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Yx(),$x(),this.O,this.sharedClientState,!!this.forceOwnership)}},{key:"Gc",value:function(e){return new Kx}}]),n}(pI),yI=function(e){Ot(n,e);var t=Ft(n);function n(e,r){var i;return qe(this,n),(i=t.call(this,e,r,!1)).zc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return Ke(n,[{key:"initialize",value:function(){var e=a(u().mark((function e(t){var r,i=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,At(Nt(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.zc.syncEngine,e.t0=this.sharedClientState instanceof zx,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={hr:X_.bind(null,r),lr:uI.bind(null,r),dr:cI.bind(null,r),ds:oI.bind(null,r),ar:$_.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Hn(function(){var e=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tI(i.zc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):t||i.gcScheduler.stop());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Gc",value:function(e){var t=Yx();if(!zx.Vt(t))throw new yy(vy.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Jw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new zx(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(vI),mI=function(){function e(){qe(this,e)}return Ke(e,[{key:"initialize",value:function(){var e=a(u().mark((function e(t,n){var r=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return C_(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=W_.bind(null,this.syncEngine),e.next=12,zE(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new XE}},{key:"createDatastore",value:function(e){var t,n=Jx(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Qx(t));return function(e,t,n,r){return new rE(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return C_(o.syncEngine,e,0)},a=Wx.Vt()?new Wx:new Hx,new aE(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new m_(e,t,n,r,i,a);return o&&(u.Lc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=a(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=py(t),sy("RemoteStore","RemoteStore shutting down."),n.Ko.add(5),e.next=5,sE(n);case 5:n.jo.shutdown(),n.Qo.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function gI(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return a(u().mark((function r(){var i;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return a(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var kI=function(){function e(t){qe(this,e),this.observer=t,this.muted=!1}return Ke(e,[{key:"next",value:function(e){this.observer.next&&this.Hc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Hc(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"Jc",value:function(){this.muted=!0}},{key:"Hc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),bI=function(){function e(t,n){var r=this;qe(this,e),this.Yc=t,this.O=n,this.metadata=new my,this.buffer=new Uint8Array,this.Xc=new TextDecoder("utf-8"),this.Zc().then((function(e){e&&e.ac()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return Ke(e,[{key:"close",value:function(){return this.Yc.cancel()}},{key:"getMetadata",value:function(){var e=a(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Kc",value:function(){var e=a(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Zc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Zc",value:function(){var e=a(u().mark((function e(){var t,n,r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tu();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Xc.decode(t),r=Number(n),isNaN(r)&&this.eu("length string (".concat(n,") is not valid number")),e.next=9,this.nu(r);case 9:return i=e.sent,e.abrupt("return",new s_(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"su",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"tu",value:function(){var e=a(u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.su()<0)){e.next=7;break}return e.next=3,this.iu();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.su())<0&&this.eu("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nu",value:function(){var e=a(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.iu();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.eu("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Xc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"eu",value:function(e){throw this.Yc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"iu",value:function(){var e=a(u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Yc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),wI=function(){function e(t){qe(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return Ke(e,[{key:"lookup",value:function(){var e=a(u().mark((function e(t){var n,r=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new yy(vy.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=a(u().mark((function e(t,n){var r,i,a,o,s,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=py(t),i=Tk(r.O)+"/documents",a={documents:n.map((function(e){return xk(r.O,e)}))},e.next=5,r.Lr("BatchGetDocuments",i,a);case 5:return o=e.sent,s=new Map,o.forEach((function(e){var t=Pk(r.O,e);s.set(t.key.toString(),t)})),c=[],e.abrupt("return",(n.forEach((function(e){var t=s.get(e.toString());hy(!!t),c.push(t)})),c));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Ug(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=a(u().mark((function e(){var t,n=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=tm.fromPath(t);n.mutations.push(new jg(r,n.precondition(r)))})),e.next=7,function(){var e=a(u().mark((function e(t,n){var r,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=py(t),i=Tk(r.O)+"/documents",a={writes:n.map((function(e){return Ak(r.O,e)}))},e.next=3,r.Mr("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw dy();t=Ry.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new yy(vy.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Eg.updateTime(t):Eg.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ry.min()))throw new yy(vy.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Eg.updateTime(t)}return Eg.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),xI=function(){function e(t,n,r,i){qe(this,e),this.asyncQueue=t,this.datastore=n,this.updateFunction=r,this.deferred=i,this.ru=5,this.ro=new Xx(this.asyncQueue,"transaction_retry")}return Ke(e,[{key:"run",value:function(){this.ru-=1,this.ou()}},{key:"ou",value:function(){var e=this;this.ro.Hr(a(u().mark((function t(){var n,r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new wI(e.datastore),(r=e.cu(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.uu(t)}))}))})).catch((function(t){e.uu(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"cu",value:function(e){try{var t=this.updateFunction(e);return!Jy(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"uu",value:function(e){var t=this;this.ru>0&&this.au(e)?(this.ru-=1,this.asyncQueue.enqueueAndForget((function(){return t.ou(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"au",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!Bg(t)}return!1}}]),e}(),EI=function(){function e(t,n,r,i){var o=this;qe(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=iy.UNAUTHENTICATED,this.clientId=Cy.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return sy("FirestoreClient","Received user=",t.uid),e.next=3,o.authCredentialListener(t);case 3:o.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return sy("FirestoreClient","Received new app check token=",e),o.appCheckCredentialListener(e,o.user)}))}return Ke(e,[{key:"getConfiguration",value:function(){var e=a(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new yy(vy.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new my;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(a(u().mark((function n(){var r;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=ZE(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function _I(e,t){return II.apply(this,arguments)}function II(){return II=a(u().mark((function e(t,n){var r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),sy("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,ax(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),II.apply(this,arguments)}function TI(e,t){return SI.apply(this,arguments)}function SI(){return SI=a(u().mark((function e(t,n){var r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,CI(t);case 3:return r=e.sent,sy("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return BE(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return BE(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),SI.apply(this,arguments)}function CI(e){return NI.apply(this,arguments)}function NI(){return NI=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return sy("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,_I(t,new pI);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),NI.apply(this,arguments)}function PI(e){return AI.apply(this,arguments)}function AI(){return AI=a(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return sy("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,TI(t,new mI);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),AI.apply(this,arguments)}function OI(e){return CI(e).then((function(e){return e.persistence}))}function RI(e){return CI(e).then((function(e){return e.localStore}))}function DI(e){return PI(e).then((function(e){return e.remoteStore}))}function LI(e){return PI(e).then((function(e){return e.syncEngine}))}function MI(e){return FI.apply(this,arguments)}function FI(){return FI=a(u().mark((function e(t){var n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,PI(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=g_.bind(null,n.syncEngine),r.onUnlisten=x_.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),FI.apply(this,arguments)}function UI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new my;return e.asyncQueue.enqueueAndForget(a(u().mark((function i(){return u().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new kI({next:function(a){t.enqueueAndForget((function(){return n_(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new yy(vy.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new yy(vy.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new u_(Hm(n.path),a,{includeMetadataChanges:!0,uc:!0});return e_(e,o)},i.next=3,MI(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function jI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new my;return e.asyncQueue.enqueueAndForget(a(u().mark((function i(){return u().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new kI({next:function(n){t.enqueueAndForget((function(){return n_(e,o)})),n.fromCache&&"server"===r.source?i.reject(new yy(vy.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new u_(n,a,{includeMetadataChanges:!0,uc:!0});return e_(e,o)},i.next=3,MI(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var VI=new Map;function BI(e,t,n){if(!n)throw new yy(vy.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function qI(e,t,n,r){if(!0===t&&!0===r)throw new yy(vy.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function zI(e){if(!tm.isDocumentKey(e))throw new yy(vy.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function KI(e){if(tm.isDocumentKey(e))throw new yy(vy.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function HI(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":dy()}function WI(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new yy(vy.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=HI(e);throw new yy(vy.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function GI(e,t){if(t<=0)throw new yy(vy.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var ZI=function(){function e(t){var n;if(qe(this,e),void 0===t.host){if(void 0!==t.ssl)throw new yy(vy.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new yy(vy.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,qI("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return Ke(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),QI=function(){function e(t,n,r){qe(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ZI({}),this._settingsFrozen=!1,t instanceof $y?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new yy(vy.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $y(e.options.projectId)}(t))}return Ke(e,[{key:"app",get:function(){if(!this._app)throw new yy(vy.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new yy(vy.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ZI(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new ky;switch(e.type){case"gapi":var t=e.client;return hy(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Ey(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new yy(vy.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=VI.get(e);t&&(sy("ComponentProvider","Removing Datastore"),VI.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function YI(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=WI(e,QI))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&ly("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=iy.MOCK_USER;else{o=$n(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new yy(vy.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new iy(s)}e._authCredentials=new by(new gy(o,u))}}var $I=function(){function e(t,n,r){qe(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return Ke(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new XI(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),JI=function(){function e(t,n,r){qe(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return Ke(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),XI=function(e){Ot(n,e);var t=Ft(n);function n(e,r,i){var a;return qe(this,n),(a=t.call(this,e,r,Hm(i)))._path=i,a.type="collection",a}return Ke(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new $I(this.firestore,null,new tm(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(JI);function eT(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=gr(e),BI("collection","path",t),e instanceof QI){var a=Uy.fromString.apply(Uy,[t].concat(r));return KI(a),new XI(e,null,a)}if(!(e instanceof $I||e instanceof XI))throw new yy(vy.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Uy.fromString.apply(Uy,[t].concat(r)));return KI(o),new XI(e.firestore,null,o)}function tT(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=gr(e),1===arguments.length&&(t=Cy.R()),BI("doc","path",t),e instanceof QI){var a=Uy.fromString.apply(Uy,[t].concat(r));return zI(a),new $I(e,null,new tm(a))}if(!(e instanceof $I||e instanceof XI))throw new yy(vy.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Uy.fromString.apply(Uy,[t].concat(r)));return zI(o),new $I(e.firestore,e instanceof XI?e.converter:null,new tm(o))}function nT(e,t){return e=gr(e),t=gr(t),(e instanceof $I||e instanceof XI)&&(t instanceof $I||t instanceof XI)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function rT(e,t){return e=gr(e),t=gr(t),e instanceof JI&&t instanceof JI&&e.firestore===t.firestore&&eg(e._query,t._query)&&e.converter===t.converter}var iT=function(){function e(){var t=this;qe(this,e),this.hu=Promise.resolve(),this.lu=[],this.fu=!1,this.du=[],this._u=null,this.wu=!1,this.mu=!1,this.gu=[],this.ro=new Xx(this,"async_queue_retry"),this.yu=function(){var e=$x();e&&sy("AsyncQueue","Visibility state changed to "+e.visibilityState),t.ro.Yr()};var n=$x();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.yu)}return Ke(e,[{key:"isShuttingDown",get:function(){return this.fu}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.pu(),this.Iu(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.fu){this.fu=!0,this.mu=e||!1;var t=$x();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.yu)}}},{key:"enqueue",value:function(e){var t=this;if(this.pu(),this.fu)return new Promise((function(){}));var n=new my;return this.Iu((function(){return t.fu&&t.mu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.lu.push(e),t.Eu()}))}},{key:"Eu",value:function(){var e=a(u().mark((function e(){var t=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.lu.length){e.next=14;break}return e.prev=1,e.next=4,this.lu[0]();case 4:this.lu.shift(),this.ro.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Ib(e.t0)){e.next=12;break}throw e.t0;case 12:sy("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.lu.length>0&&this.ro.Hr((function(){return t.Eu()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Iu",value:function(e){var t=this,n=this.hu.then((function(){return t.wu=!0,e().catch((function(e){t._u=e,t.wu=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw cy("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.wu=!1,e}))}));return this.hu=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.pu(),this.gu.indexOf(e)>-1&&(t=0);var i=GE.createAndSchedule(this,e,t,n,(function(e){return r.Tu(e)}));return this.du.push(i),i}},{key:"pu",value:function(){this._u&&dy()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Au",value:function(){var e=a(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.hu,e.next=3,t;case 3:if(t!==this.hu){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ru",value:function(e){var t,n=Bn(this.du);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Pu",value:function(e){var t=this;return this.Au().then((function(){t.du.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=Bn(t.du);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Au()}))}},{key:"bu",value:function(e){this.gu.push(e)}},{key:"Tu",value:function(e){var t=this.du.indexOf(e);this.du.splice(t,1)}}]),e}();function aT(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=Bn(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var oT=function(){function e(){qe(this,e),this._progressObserver={},this._taskCompletionResolver=new my,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return Ke(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),uT=function(e){Ot(n,e);var t=Ft(n);function n(e,r,i){var a;return qe(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new iT,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return Ke(n,[{key:"_terminate",value:function(){return this._firestoreClient||cT(this),this._firestoreClient.terminate()}}]),n}(QI);function sT(e){return e._firestoreClient||cT(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function cT(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new Yy(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new EI(e._authCredentials,e._appCheckCredentials,e._queue,r)}function lT(e,t,n){var r=new my;return e.asyncQueue.enqueue(a(u().mark((function i(){return u().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,_I(e,n);case 3:return i.next=5,TI(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===vy.FAILED_PRECONDITION||e.code===vy.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function fT(e){return function(e){return e.asyncQueue.enqueue(a(u().mark((function t(){var n,r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,OI(e);case 2:return n=t.sent,t.next=5,DI(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=py(e);return t.Ko.delete(0),oE(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(sT(e=WI(e,uT)))}function dT(e){return function(e){return e.asyncQueue.enqueue(a(u().mark((function t(){var n,r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,OI(e);case 2:return n=t.sent,t.next=5,DI(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=a(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=py(t)).Ko.add(0),e.next=4,sE(n);case 4:n.Qo.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(sT(e=WI(e,uT)))}function hT(e,t){var n=sT(e=WI(e,uT)),r=new oT;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new bI(e,t)}(function(e,t){if(e instanceof Uint8Array)return gI(e,t);if(e instanceof ArrayBuffer)return gI(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,Jx(t));e.asyncQueue.enqueueAndForget(a(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=hI,t.next=3,LI(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function pT(e,t){return function(e,t){return e.asyncQueue.enqueue(a(u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=py(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Kn.getNamedQuery(e,t)}))},n.next=3,RI(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(sT(e=WI(e,uT)),t).then((function(t){return t?new JI(e,null,t.query):null}))}function vT(e){if(e._initialized||e._terminated)throw new yy(vy.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var yT=function(){function e(){qe(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new yy(vy.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vy(n)}return Ke(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var mT=function(){function e(t){qe(this,e),this._byteString=t}return Ke(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(qy.fromBase64String(t))}catch(t){throw new yy(vy.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(qy.fromUint8Array(t))}}]),e}(),gT=Ke((function e(t){qe(this,e),this._methodName=t})),kT=function(){function e(t,n){if(qe(this,e),!isFinite(t)||t<-90||t>90)throw new yy(vy.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new yy(vy.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return Ke(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Ny(this._lat,e._lat)||Ny(this._long,e._long)}}]),e}(),bT=/^__.*__$/,wT=function(){function e(t,n,r){qe(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Ke(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Og(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ag(e,this.data,t,this.fieldTransforms)}}]),e}(),xT=function(){function e(t,n,r){qe(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Ke(e,[{key:"toMutation",value:function(e,t){return new Og(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function ET(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw dy()}}var _T=function(){function e(t,n,r,i,a,o){qe(this,e),this.settings=t,this.databaseId=n,this.O=r,this.ignoreUndefinedProperties=i,void 0===a&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return Ke(e,[{key:"path",get:function(){return this.settings.path}},{key:"Vu",get:function(){return this.settings.Vu}},{key:"Su",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.O,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Du",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Su({path:n,Cu:!1});return r.Nu(e),r}},{key:"xu",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Su({path:n,Cu:!1});return r.vu(),r}},{key:"ku",value:function(e){return this.Su({path:void 0,Cu:!0})}},{key:"Ou",value:function(e){return KT(e,this.settings.methodName,this.settings.Mu||!1,this.path,this.settings.$u)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"vu",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.Nu(this.path.get(e))}},{key:"Nu",value:function(e){if(0===e.length)throw this.Ou("Document fields must not be empty");if(ET(this.Vu)&&bT.test(e))throw this.Ou('Document fields cannot begin and end with "__"')}}]),e}(),IT=function(){function e(t,n,r){qe(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.O=r||Jx(t)}return Ke(e,[{key:"Fu",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new _T({Vu:e,methodName:t,$u:n,path:Vy.emptyPath(),Cu:!1,Mu:r},this.databaseId,this.O,this.ignoreUndefinedProperties)}}]),e}();function TT(e){var t=e._freezeSettings(),n=Jx(e._databaseId);return new IT(e._databaseId,!!t.ignoreUndefinedProperties,n)}function ST(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.Fu(a.merge||a.mergeFields?2:0,t,n,i);VT("Data must be an object, but it was:",o,r);var u,s,c=UT(r,o);if(a.merge)u=new By(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],d=Bn(a.mergeFields);try{for(d.s();!(l=d.n()).done;){var h=l.value,p=BT(t,h,n);if(!o.contains(p))throw new yy(vy.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));HT(f,p)||f.push(p)}}catch(v){d.e(v)}finally{d.f()}u=new By(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new wT(new mm(c),u,s)}var CT=function(e){Ot(n,e);var t=Ft(n);function n(){return qe(this,n),t.apply(this,arguments)}return Ke(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Vu)throw 1===e.Vu?e.Ou("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Ou("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(gT);function NT(e,t,n){return new _T({Vu:3,$u:t.settings.$u,methodName:e._methodName,Cu:n},t.databaseId,t.O,t.ignoreUndefinedProperties)}var PT=function(e){Ot(n,e);var t=Ft(n);function n(){return qe(this,n),t.apply(this,arguments)}return Ke(n,[{key:"_toFieldTransform",value:function(e){return new wg(e.path,new hg)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(gT),AT=function(e){Ot(n,e);var t=Ft(n);function n(e,r){var i;return qe(this,n),(i=t.call(this,e)).Bu=r,i}return Ke(n,[{key:"_toFieldTransform",value:function(e){var t=NT(this,e,!0),n=this.Bu.map((function(e){return FT(e,t)})),r=new pg(n);return new wg(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(gT),OT=function(e){Ot(n,e);var t=Ft(n);function n(e,r){var i;return qe(this,n),(i=t.call(this,e)).Bu=r,i}return Ke(n,[{key:"_toFieldTransform",value:function(e){var t=NT(this,e,!0),n=this.Bu.map((function(e){return FT(e,t)})),r=new yg(n);return new wg(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(gT),RT=function(e){Ot(n,e);var t=Ft(n);function n(e,r){var i;return qe(this,n),(i=t.call(this,e)).Lu=r,i}return Ke(n,[{key:"_toFieldTransform",value:function(e){var t=new gg(e.O,sg(e.O,this.Lu));return new wg(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(gT);function DT(e,t,n,r){var i=e.Fu(1,t,n);VT("Data must be an object, but it was:",i,r);var a=[],o=mm.empty();Ly(r,(function(e,r){var u=zT(t,e,n);r=gr(r);var s=i.xu(u);if(r instanceof CT)a.push(u);else{var c=FT(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new By(a);return new xT(o,u,i.fieldTransforms)}function LT(e,t,n,r,i,a){var o=e.Fu(1,t,n),u=[BT(t,r,n)],s=[i];if(a.length%2!=0)throw new yy(vy.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(BT(t,a[c])),s.push(a[c+1]);for(var l=[],f=mm.empty(),d=u.length-1;d>=0;--d)if(!HT(l,u[d])){var h=u[d],p=s[d];p=gr(p);var v=o.xu(h);if(p instanceof CT)l.push(h);else{var y=FT(p,v);null!=y&&(l.push(h),f.set(h,y))}}var m=new By(l);return new xT(f,m,o.fieldTransforms)}function MT(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return FT(n,e.Fu(r?4:3,t))}function FT(e,t){if(jT(e=gr(e)))return VT("Unsupported field value:",t,e),UT(e,t);if(e instanceof gT)return function(e,t){if(!ET(t.Vu))throw t.Ou("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Ou("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Cu&&4!==t.Vu)throw t.Ou("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=Bn(e);try{for(a.s();!(n=a.n()).done;){var o=FT(n.value,t.ku(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=gr(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return sg(t.O,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Oy.fromDate(e);return{timestampValue:yk(t.O,n)}}if(e instanceof Oy){var r=new Oy(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:yk(t.O,r)}}if(e instanceof kT)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof mT)return{bytesValue:mk(t.O,e._byteString)};if(e instanceof $I){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.Ou("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:bk(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Ou("Unsupported field value: ".concat(HI(e)))}(e,t)}function UT(e,t){var n={};return My(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ly(e,(function(e,r){var i=FT(r,t.Du(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function jT(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Oy||e instanceof kT||e instanceof mT||e instanceof $I||e instanceof gT)}function VT(e,t,n){if(!jT(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=HI(n);throw"an object"===r?t.Ou(e+" a custom object"):t.Ou(e+" "+r)}}function BT(e,t,n){if((t=gr(t))instanceof yT)return t._internalPath;if("string"==typeof t)return zT(e,t);throw KT("Field path arguments must be of type string or ",e,!1,void 0,n)}var qT=new RegExp("[~\\*/\\[\\]]");function zT(e,t,n){if(t.search(qT)>=0)throw KT("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return qn(yT,Be(t.split(".")))._internalPath}catch(r){throw KT("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function KT(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new yy(vy.INVALID_ARGUMENT,u+e+s)}function HT(e,t){return e.some((function(e){return e.isEqual(t)}))}var WT=function(){function e(t,n,r,i,a){qe(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return Ke(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new $I(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new GT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(ZT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),GT=function(e){Ot(n,e);var t=Ft(n);function n(){return qe(this,n),t.apply(this,arguments)}return Ke(n,[{key:"data",value:function(){return At(Nt(n.prototype),"data",this).call(this)}}]),n}(WT);function ZT(e,t){return"string"==typeof t?zT(e,t):t instanceof yT?t._internalPath:t._delegate._internalPath}var QT=function(){function e(t,n){qe(this,e),this.hasPendingWrites=t,this.fromCache=n}return Ke(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),YT=function(e){Ot(n,e);var t=Ft(n);function n(e,r,i,a,o,u){var s;return qe(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return Ke(n,[{key:"exists",value:function(){return At(Nt(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new $T(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(ZT("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(WT),$T=function(e){Ot(n,e);var t=Ft(n);function n(){return qe(this,n),t.apply(this,arguments)}return Ke(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return At(Nt(n.prototype),"data",this).call(this,e)}}]),n}(YT),JT=function(){function e(t,n,r,i){qe(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new QT(i.hasPendingWrites,i.fromCache),this.query=r}return Ke(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new $T(n._firestore,n._userDataWriter,r.key,r,new QT(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new yy(vy.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new $T(e._firestore,e._userDataWriter,t.doc.key,t.doc,new QT(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new $T(e._firestore,e._userDataWriter,t.doc.key,t.doc,new QT(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:XT(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function XT(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return dy()}}function eS(e,t){return e instanceof YT&&t instanceof YT?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof JT&&t instanceof JT&&e._firestore===t._firestore&&rT(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function tS(e){if(Gm(e)&&0===e.explicitOrderBy.length)throw new yy(vy.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var nS=Ke((function e(){qe(this,e)}));function rS(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var iS=function(e){Ot(n,e);var t=Ft(n);function n(e,r,i){var a;return qe(this,n),(a=t.call(this)).Uu=e,a.qu=r,a.Ku=i,a.type="where",a}return Ke(n,[{key:"_apply",value:function(e){var t=TT(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new yy(vy.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){vS(o,a);var s,c=[],l=Bn(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(pS(r,e,f))}}catch(h){l.e(h)}finally{l.f()}u={arrayValue:{values:c}}}else u=pS(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||vS(o,a),u=MT(n,"where",o,"in"===a||"not-in"===a);var d=Nm.create(i,a,u);return function(e,t){if(t.S()){var n=Qm(e);if(null!==n&&!n.isEqual(t.field))throw new yy(vy.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=Zm(e);null!==r&&yS(e,t.field,r)}var i=function(e,t){var n,r=Bn(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(h){r.e(h)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new yy(vy.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new yy(vy.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,d),d}(e._query,0,t,e.firestore._databaseId,this.Uu,this.qu,this.Ku);return new JI(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new zm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(nS);var aS=function(e){Ot(n,e);var t=Ft(n);function n(e,r){var i;return qe(this,n),(i=t.call(this)).Uu=e,i.Gu=r,i.type="orderBy",i}return Ke(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new yy(vy.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new yy(vy.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new jm(t,n);return function(e,t){if(null===Zm(e)){var n=Qm(e);null!==n&&yS(e,n,t.field)}}(e,r),r}(e._query,this.Uu,this.Gu);return new JI(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new zm(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(nS);var oS=function(e){Ot(n,e);var t=Ft(n);function n(e,r,i){var a;return qe(this,n),(a=t.call(this)).type=e,a.ju=r,a.Qu=i,a}return Ke(n,[{key:"_apply",value:function(e){return new JI(e.firestore,e.converter,Xm(e._query,this.ju,this.Qu))}}]),n}(nS);var uS=function(e){Ot(n,e);var t=Ft(n);function n(e,r,i){var a;return qe(this,n),(a=t.call(this)).type=e,a.Wu=r,a.zu=i,a}return Ke(n,[{key:"_apply",value:function(e){var t=hS(e,this.type,this.Wu,this.zu);return new JI(e.firestore,e.converter,function(e,t){return new zm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(nS);function sS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new uS("startAt",t,!0)}function cS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new uS("startAfter",t,!1)}var lS=function(e){Ot(n,e);var t=Ft(n);function n(e,r,i){var a;return qe(this,n),(a=t.call(this)).type=e,a.Wu=r,a.zu=i,a}return Ke(n,[{key:"_apply",value:function(e){var t=hS(e,this.type,this.Wu,this.zu);return new JI(e.firestore,e.converter,function(e,t){return new zm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(nS);function fS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new lS("endBefore",t,!1)}function dS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new lS("endAt",t,!0)}function hS(e,t,n,r){if(n[0]=gr(n[0]),n[0]instanceof WT)return function(e,t,n,r,i){if(!r)throw new yy(vy.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=Bn($m(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(lm(t,r.key));else{var c=r.data.field(s.field);if(Gy(c))throw new yy(vy.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new yy(vy.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new Um(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=TT(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new yy(vy.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new yy(vy.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Ym(e)&&-1!==c.indexOf("/"))throw new yy(vy.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Uy.fromString(c));if(!tm.isDocumentKey(l))throw new yy(vy.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new tm(l);u.push(lm(t,f))}else{var d=MT(n,r,c);u.push(d)}}return new Um(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function pS(e,t,n){if("string"==typeof(n=gr(n))){if(""===n)throw new yy(vy.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ym(t)&&-1!==n.indexOf("/"))throw new yy(vy.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Uy.fromString(n));if(!tm.isDocumentKey(r))throw new yy(vy.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return lm(e,new tm(r))}if(n instanceof $I)return lm(e,n._key);throw new yy(vy.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(HI(n),"."))}function vS(e,t){if(!Array.isArray(e)||0===e.length)throw new yy(vy.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new yy(vy.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function yS(e,t,n){if(!n.isEqual(t))throw new yy(vy.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var mS=function(){function e(){qe(this,e)}return Ke(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(rm(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Hy(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Wy(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw dy()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Ly(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new kT(Hy(e.latitude),Hy(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Zy(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Qy(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Ky(e);return new Oy(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Uy.fromString(e);hy(Kk(n));var r=new $y(n.get(1),n.get(3)),i=new tm(n.popFirst(5));return r.isEqual(t)||cy("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function gS(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var kS=function(e){Ot(n,e);var t=Ft(n);function n(e){var r;return qe(this,n),(r=t.call(this)).firestore=e,r}return Ke(n,[{key:"convertBytes",value:function(e){return new mT(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new $I(this.firestore,null,t)}}]),n}(mS),bS=function(){function e(t,n){qe(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=TT(t)}return Ke(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=wS(e,this._firestore),i=gS(r.converter,t,n),a=ST(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Eg.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=wS(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=gr(t))||t instanceof yT?LT(this._dataReader,"WriteBatch.update",i._key,t,n,o):DT(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Eg.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=wS(e,this._firestore);return this._mutations=this._mutations.concat(new Ug(t._key,Eg.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new yy(vy.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function wS(e,t){if((e=gr(e)).firestore!==t)throw new yy(vy.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var xS=function(e){Ot(n,e);var t=Ft(n);function n(e){var r;return qe(this,n),(r=t.call(this)).firestore=e,r}return Ke(n,[{key:"convertBytes",value:function(e){return new mT(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new $I(this.firestore,null,t)}}]),n}(mS);function ES(e){e=WI(e,$I);var t=WI(e.firestore,uT),n=sT(t),r=new xS(t);return function(e,t){var n=new my;return e.asyncQueue.enqueueAndForget(a(u().mark((function r(){return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=a(u().mark((function e(t,n,r){var i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=py(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.Us.ys(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new yy(vy.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=ZE(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,RI(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new YT(t,r,e._key,n,new QT(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function _S(e){e=WI(e,JI);var t=WI(e.firestore,uT),n=sT(t),r=new xS(t);return function(e,t){var n=new my;return e.asyncQueue.enqueueAndForget(a(u().mark((function r(){return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=a(u().mark((function e(t,n,r){var i,a,o,s,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,vx(t,n,!0);case 3:i=e.sent,a=new p_(n,i.Ks),o=a.Ic(i.documents),s=a.applyChanges(o,!1),r.resolve(s.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),c=ZE(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(c);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,RI(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new JT(t,r,e,n)}))}function IS(e,t,n){e=WI(e,$I);var r=WI(e.firestore,uT),i=gS(e.converter,t,n);return NS(r,[ST(TT(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Eg.none())])}function TS(e,t,n){e=WI(e,$I);for(var r=WI(e.firestore,uT),i=TT(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return NS(r,[("string"==typeof(t=gr(t))||t instanceof yT?LT(i,"updateDoc",e._key,t,n,o):DT(i,"updateDoc",e._key,t)).toMutation(e._key,Eg.exists(!0))])}function SS(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,o,s;e=gr(e);var c={includeMetadataChanges:!1},l=0;"object"!=typeof n[l]||aT(n[l])||(c=n[l],l++);var f,d,h,p={includeMetadataChanges:c.includeMetadataChanges};if(aT(n[l])){var v=n[l];n[l]=null===(i=v.next)||void 0===i?void 0:i.bind(v),n[l+1]=null===(o=v.error)||void 0===o?void 0:o.bind(v),n[l+2]=null===(s=v.complete)||void 0===s?void 0:s.bind(v)}if(e instanceof $I)d=WI(e.firestore,uT),h=Hm(e._key.path),f={next:function(t){n[l]&&n[l](PS(d,e,t))},error:n[l+1],complete:n[l+2]};else{var y=WI(e,JI);d=WI(y.firestore,uT),h=y._query;var m=new xS(d);f={next:function(e){n[l]&&n[l](new JT(d,m,y,e))},error:n[l+1],complete:n[l+2]},tS(e._query)}return function(e,t,n,r){var i=new kI(r),o=new u_(t,i,n);return e.asyncQueue.enqueueAndForget(a(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e_,t.next=3,MI(e);case 3:return t.t1=t.sent,t.t2=o,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Jc(),e.asyncQueue.enqueueAndForget(a(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=n_,t.next=3,MI(e);case 3:return t.t1=t.sent,t.t2=o,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(sT(d),h,p,f)}function CS(e,t){return function(e,t){var n=new kI(t);return e.asyncQueue.enqueueAndForget(a(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){py(e).Zo.add(t),t.next()},t.next=3,MI(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Jc(),e.asyncQueue.enqueueAndForget(a(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){py(e).Zo.delete(t)},t.next=3,MI(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(sT(e=WI(e,uT)),aT(t)?t:{next:t})}function NS(e,t){return function(e,t){var n=new my;return e.asyncQueue.enqueueAndForget(a(u().mark((function r(){return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=__,r.next=3,LI(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(sT(e),t)}function PS(e,t,n){var r=n.docs.get(t._key),i=new xS(e);return new YT(e,i,t._key,r,new QT(n.hasPendingWrites,n.fromCache),t.converter)}var AS=function(e){Ot(n,e);var t=Ft(n);function n(e,r){var i;return qe(this,n),(i=t.call(this,e,r))._firestore=e,i}return Ke(n,[{key:"get",value:function(e){var t=this,r=wS(e,this._firestore),i=new xS(this._firestore);return At(Nt(n.prototype),"get",this).call(this,e).then((function(e){return new YT(t._firestore,i,r._key,e._document,new QT(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){qe(this,e),this._firestore=t,this._transaction=n,this._dataReader=TT(t)}return Ke(e,[{key:"get",value:function(e){var t=this,n=wS(e,this._firestore),r=new kS(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return dy();var i=e[0];if(i.isFoundDocument())return new WT(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new WT(t._firestore,r,n._key,null,n.converter);throw dy()}))}},{key:"set",value:function(e,t,n){var r=wS(e,this._firestore),i=gS(r.converter,t,n),a=ST(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=wS(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=gr(t))||t instanceof yT?LT(this._dataReader,"Transaction.update",i._key,t,n,o):DT(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=wS(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function OS(e,t){return function(e,t){var n=new my;return e.asyncQueue.enqueueAndForget(a(u().mark((function r(){var i;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,function(e){return PI(e).then((function(e){return e.datastore}))}(e);case 2:i=r.sent,new xI(e.asyncQueue,i,t,n).run();case 4:case"end":return r.stop()}}),r)})))),n.promise}(sT(e=WI(e,uT)),(function(n){return t(new AS(e,n))}))}function RS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new AT("arrayUnion",t)}function DS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new OT("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){ay=e}($r),Kr(new kr("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new uT(i,new wy(e.getProvider("auth-internal")),new Iy(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),ri(ry,"3.4.5",e),ri(ry,"3.4.5","esm2017")}();function LS(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new yy("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function MS(){if("undefined"===typeof Uint8Array)throw new yy("unimplemented","Uint8Arrays are not available in this environment.")}function FS(){if("undefined"==typeof atob)throw new yy("unimplemented","Blobs are unavailable in Firestore in this environment.")}var US=function(){function e(t){qe(this,e),this._delegate=t}return Ke(e,[{key:"toBase64",value:function(){return FS(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return MS(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return FS(),new e(mT.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return MS(),new e(mT.fromUint8Array(t))}}]),e}();function jS(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=Bn(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var VS=function(){function e(){qe(this,e)}return Ke(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){vT(e=WI(e,uT));var n=sT(e),r=e._freezeSettings(),i=new mI;return lT(n,i,new vI(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){vT(e=WI(e,uT));var t=sT(e),n=e._freezeSettings(),r=new mI;return lT(t,r,new yI(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new yy(vy.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new my;return e._queue.enqueueAndForgetEvenWhileRestricted(a(u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=a(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(xb.Vt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,xb.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(Jw(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),BS=function(){function e(t,n,r){var i=this;qe(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof $y||(this._appCompat=t)}return Ke(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||ly("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};YI(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return fT(this._delegate)}},{key:"disableNetwork",value:function(){return dT(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&qI("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new my;return e.asyncQueue.enqueueAndForget(a(u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=L_,n.next=3,LI(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(sT(e=WI(e,uT)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return CS(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new yy("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new tC(this,eT(this._delegate,e))}catch(AN){throw GS(AN,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new WS(this,tT(this._delegate,e))}catch(AN){throw GS(AN,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new JS(this,function(e,t){if(e=WI(e,QI),BI("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new yy(vy.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new JI(e,null,function(e){return new zm(Uy.emptyPath(),e)}(t))}(this._delegate,e))}catch(AN){throw GS(AN,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return OS(this._delegate,(function(n){return e(new zS(t,n))}))}},{key:"batch",value:function(){var e=this;return sT(this._delegate),new KS(new bS(this._delegate,(function(t){return NS(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return hT(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return pT(this._delegate,e).then((function(e){return e?new JS(t,e):null}))}}]),e}(),qS=function(e){Ot(n,e);var t=Ft(n);function n(e){var r;return qe(this,n),(r=t.call(this)).firestore=e,r}return Ke(n,[{key:"convertBytes",value:function(e){return new US(new mT(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return WS.forKey(t,this.firestore,null)}}]),n}(mS);var zS=function(){function e(t,n){qe(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new qS(t)}return Ke(e,[{key:"get",value:function(e){var t=this,n=nC(e);return this._delegate.get(n).then((function(e){return new YS(t._firestore,new YT(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=nC(e);return n?(LS("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=nC(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=nC(e);return this._delegate.delete(t),this}}]),e}(),KS=function(){function e(t){qe(this,e),this._delegate=t}return Ke(e,[{key:"set",value:function(e,t,n){var r=nC(e);return n?(LS("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=nC(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=nC(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),HS=function(){function e(t,n,r){qe(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return Ke(e,[{key:"fromFirestore",value:function(e,t){var n=new $T(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new $S(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new qS(t),n),i.set(n,a)),a}}]),e}();HS.INSTANCES=new WeakMap;var WS=function(){function e(t,n){qe(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new qS(t)}return Ke(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new tC(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new tC(this.firestore,eT(this._delegate,e))}catch(AN){throw GS(AN,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=gr(e))instanceof $I&&nT(this._delegate,e)}},{key:"set",value:function(e,t){t=LS("DocumentReference.set",t);try{return t?IS(this._delegate,e,t):IS(this._delegate,e)}catch(AN){throw GS(AN,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?TS(this._delegate,e):TS.apply(void 0,[this._delegate,e,t].concat(r))}catch(AN){throw GS(AN,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return NS(WI(e.firestore,uT),[new Ug(e._key,Eg.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=ZS(n),a=QS(n,(function(t){return new YS(e.firestore,new YT(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return SS(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?ES(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=WI(e,$I);var t=WI(e.firestore,uT);return UI(sT(t),e._key,{source:"server"}).then((function(n){return PS(t,e,n)}))}(this._delegate):function(e){e=WI(e,$I);var t=WI(e.firestore,uT);return UI(sT(t),e._key).then((function(n){return PS(t,e,n)}))}(this._delegate),t.then((function(e){return new YS(n.firestore,new YT(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(HS.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new yy("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new $I(n._delegate,r,new tm(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new $I(n._delegate,r,t))}}]),e}();function GS(e,t,n){return e.message=e.message.replace(t,n),e}function ZS(e){var t,n=Bn(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!jS(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function QS(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=jS(e[0])?e[0]:jS(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var YS=function(){function e(t,n){qe(this,e),this._firestore=t,this._delegate=n}return Ke(e,[{key:"ref",get:function(){return new WS(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return eS(this._delegate,e._delegate)}}]),e}(),$S=function(e){Ot(n,e);var t=Ft(n);function n(){return qe(this,n),t.apply(this,arguments)}return Ke(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||dy()}(void 0!==t),t}}]),n}(YS),JS=function(){function e(t,n){qe(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new qS(t)}return Ke(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,rS(this._delegate,function(e,t,n){var r=t,i=ZT("where",e);return new iS(i,r,n)}(t,n,r)))}catch(AN){throw GS(AN,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,rS(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=ZT("orderBy",e);return new aS(n,t)}(t,n)))}catch(AN){throw GS(AN,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,rS(this._delegate,function(e){return GI("limit",e),new oS("limit",e,"F")}(t)))}catch(AN){throw GS(AN,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,rS(this._delegate,function(e){return GI("limitToLast",e),new oS("limitToLast",e,"L")}(t)))}catch(AN){throw GS(AN,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,rS(this._delegate,sS.apply(void 0,arguments)))}catch(AN){throw GS(AN,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,rS(this._delegate,cS.apply(void 0,arguments)))}catch(AN){throw GS(AN,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,rS(this._delegate,fS.apply(void 0,arguments)))}catch(AN){throw GS(AN,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,rS(this._delegate,dS.apply(void 0,arguments)))}catch(AN){throw GS(AN,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return rT(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?_S(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=WI(e,JI);var t=WI(e.firestore,uT),n=sT(t),r=new xS(t);return jI(n,e._query,{source:"server"}).then((function(n){return new JT(t,r,e,n)}))}(this._delegate):function(e){e=WI(e,JI);var t=WI(e.firestore,uT),n=sT(t),r=new xS(t);return tS(e._query),jI(n,e._query).then((function(n){return new JT(t,r,e,n)}))}(this._delegate),t.then((function(e){return new eC(n.firestore,new JT(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=ZS(n),a=QS(n,(function(t){return new eC(e.firestore,new JT(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return SS(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(HS.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),XS=function(){function e(t,n){qe(this,e),this._firestore=t,this._delegate=n}return Ke(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new $S(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),eC=function(){function e(t,n){qe(this,e),this._firestore=t,this._delegate=n}return Ke(e,[{key:"query",get:function(){return new JS(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new $S(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new XS(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new $S(n._firestore,r))}))}},{key:"isEqual",value:function(e){return eS(this._delegate,e._delegate)}}]),e}(),tC=function(e){Ot(n,e);var t=Ft(n);function n(e,r){var i;return qe(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return Ke(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new WS(this.firestore,e):null}},{key:"doc",value:function(e){try{return new WS(this.firestore,void 0===e?tT(this._delegate):tT(this._delegate,e))}catch(AN){throw GS(AN,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=WI(e.firestore,uT),r=tT(e),i=gS(e.converter,t);return NS(n,[ST(TT(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Eg.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new WS(t.firestore,e)}))}},{key:"isEqual",value:function(e){return nT(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(HS.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(JS);function nC(e){return WI(e,$I)}var rC=function(){function e(){qe(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=qn(yT,n)}return Ke(e,[{key:"isEqual",value:function(e){return(e=gr(e))instanceof yT&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Vy.keyField().canonicalString())}}]),e}(),iC=function(){function e(t){qe(this,e),this._delegate=t}return Ke(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new PT("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new CT("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=RS.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=DS.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new RT("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),aC={Firestore:BS,GeoPoint:kT,Timestamp:Oy,Blob:US,Transaction:zS,WriteBatch:KS,DocumentReference:WS,DocumentSnapshot:YS,Query:JS,QueryDocumentSnapshot:$S,QuerySnapshot:eC,CollectionReference:tC,FieldPath:rC,FieldValue:iC,setLogLevel:function(e){!function(e){oy.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new kr("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},aC)))}(e,(function(e,t){return new BS(e,t,new VS)})),e.registerVersion("@firebase/firestore-compat","0.1.14")}(Ni);var oC=Ni.initializeApp({apiKey:"AIzaSyCrAsOm8CoM_wpRVmpbnvntoFWH_lTNglQ",authDomain:"mask-detection-970fc.firebaseapp.com",databaseURL:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyCrAsOm8CoM_wpRVmpbnvntoFWH_lTNglQ",REACT_APP_FIREBASE_APP_ID:"1:919775852581:web:4872e29c8a6b5d2b35e7cc",REACT_APP_FIREBASE_AUTH_DOMAIN:"mask-detection-970fc.firebaseapp.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"919775852581",REACT_APP_FIREBASE_PROJECT_ID:"mask-detection-970fc",REACT_APP_FIREBASE_STORAGE_BUCKET:"mask-detection-970fc.appspot.com"}.REACT_APP_FIREBASE_DATABASE_URL,projectId:"mask-detection-970fc",storageBucket:"mask-detection-970fc.appspot.com",messagingSenderId:"919775852581",appId:"1:919775852581:web:4872e29c8a6b5d2b35e7cc"}),uC=oC.auth(),sC=t.createContext();function cC(){return(0,t.useContext)(sC)}function lC(e){var n=e.children,r=Me((0,t.useState)(),2),i=r[0],a=r[1],o=Me((0,t.useState)(!0),2),u=o[0],s=o[1];(0,t.useEffect)((function(){return uC.onAuthStateChanged((function(e){a(e),s(!1)}))}),[]);var c={currentUser:i,login:function(e,t){return uC.signInWithEmailAndPassword(e,t)},signup:function(e,t){return uC.createUserWithEmailAndPassword(e,t)},logout:function(){return uC.signOut()},resetPassword:function(e){return uC.sendPasswordResetEmail(e)},updateEmail:function(e){return i.updateEmail(e)},updatePassword:function(e){return i.updatePassword(e)}};return(0,x.jsx)(sC.Provider,{value:c,children:!u&&n})}function fC(){var e=Tn(),t=cC().logout;function n(){return(n=a(u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t();case 2:e("/login");case 3:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return(0,x.jsx)("div",{children:(0,x.jsxs)(an,{bg:"dark",variant:"dark",expand:"lg",style:{paddingTop:"2px",paddingBottom:"2px"},children:[(0,x.jsx)("img",{src:on,width:"55",height:"55",className:"d-inline-block align-top",style:{marginLeft:"20px",marginRight:"20px"},alt:""}),(0,x.jsx)(an.Toggle,{"aria-controls":"navbarScroll"}),(0,x.jsx)(an.Collapse,{id:"navbarScroll",className:"justify-content-end",onClick:function(){return n.apply(this,arguments)},children:(0,x.jsx)("img",{src:un,width:"40",height:"40",className:"d-inline-block align-top",style:{marginRight:"30px",cursor:"pointer"},alt:""})})]})})}var dC=n(2932),hC=["as","disabled"];function pC(e){var t=e.tagName,n=e.disabled,r=e.href,i=e.target,a=e.rel,o=e.onClick,u=e.tabIndex,s=void 0===u?0:u,c=e.type;t||(t=null!=r||null!=i||null!=a?"a":"button");var l={tagName:t};if("button"===t)return[{type:c||"button",disabled:n},l];var f=function(e){(n||"a"===t&&function(e){return!e||"#"===e.trim()}(r))&&e.preventDefault(),n?e.stopPropagation():null==o||o(e)};return"a"===t&&(r||(r="#"),n&&(r=void 0)),[{role:"button",disabled:void 0,tabIndex:n?void 0:s,href:r,target:"a"===t?i:void 0,"aria-disabled":n||void 0,rel:"a"===t?a:void 0,onClick:f,onKeyDown:function(e){" "===e.key&&(e.preventDefault(),f(e))}},l]}var vC=t.forwardRef((function(e,t){var n=e.as,r=e.disabled,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,hC),a=Me(pC(Object.assign({tagName:n,disabled:r},i)),2),o=a[0],u=a[1].tagName;return(0,x.jsx)(u,Object.assign({},i,o,{ref:t}))}));vC.displayName="Button";var yC=["as","bsPrefix","variant","size","active","className"],mC=t.forwardRef((function(e,t){var n=e.as,r=e.bsPrefix,i=e.variant,a=e.size,o=e.active,u=e.className,c=l(e,yC),f=I(r,"btn"),h=Me(pC((0,s.Z)({tagName:n},c)),2),p=h[0],v=h[1].tagName;return(0,x.jsx)(v,(0,s.Z)((0,s.Z)((0,s.Z)({},p),c),{},{ref:t,className:d()(u,f,o&&"active",i&&"".concat(f,"-").concat(i),a&&"".concat(f,"-").concat(a),c.href&&c.disabled&&"disabled")}))}));mC.displayName="Button",mC.defaultProps={variant:"primary",active:!1,disabled:!1};var gC=mC;function kC(e){return(0,x.jsx)("div",{className:"message",children:e.message})}function bC(e){switch(e.option){case"0":return(0,x.jsx)("span",{style:{color:"red"},children:"Close"});case"1":return(0,x.jsx)("span",{style:{color:"#EE6B4E"},children:"OPENING..."});case"2":return(0,x.jsx)("span",{style:{color:"#00FF00"},children:"OPEN"});case"3":return(0,x.jsx)("span",{style:{color:"#FFC300"},children:"CLOSING..."});default:return(0,x.jsx)("span",{style:{color:"blue"},children:"SOMETHING WRONG??"})}}function wC(e){return"0"===e.option?(0,x.jsx)("span",{style:{color:"red"},children:"Off"}):(0,x.jsx)("span",{style:{color:"#FFC300"},children:"On"})}function xC(){var e=Me((0,t.useState)(["H\u1ec7 th\u1ed1ng AI \u0111\xe3 x\xe1c nh\u1eadn ng\u01b0\u1eddi","H\u1ec7 th\u1ed1ng AI \u0111\xe3 y\xeau c\u1ea7u m\u1edf c\u1eeda","Admin \u0111\xe3 y\xeau c\u1ea7u m\u1edf c\u1eeda kh\u1ea9n c\u1ea5p","Admin \u0111\xe3 y\xeau c\u1ea7u m\u1edf c\u1eeda kh\u1ea9n c\u1ea5p","Admin \u0111\xe3 y\xeau c\u1ea7u m\u1edf c\u1eeda kh\u1ea9n c\u1ea5p","Admin \u0111\xe3 y\xeau c\u1ea7u m\u1edf c\u1eeda kh\u1ea9n c\u1ea5p","Admin \u0111\xe3 y\xeau c\u1ea7u m\u1edf c\u1eeda kh\u1ea9n c\u1ea5p","Admin \u0111\xe3 y\xeau c\u1ea7u m\u1edf c\u1eeda kh\u1ea9n c\u1ea5p","Admin \u0111\xe3 y\xeau c\u1ea7u m\u1edf c\u1eeda kh\u1ea9n c\u1ea5p","Admin \u0111\xe3 y\xeau c\u1ea7u m\u1edf c\u1eeda kh\u1ea9n c\u1ea5p","Admin \u0111\xe3 y\xeau c\u1ea7u m\u1edf c\u1eeda kh\u1ea9n c\u1ea5p","H\u1ec7 th\u1ed1ng AI \u0111\xe3 y\xeau c\u1ea7u m\u1edf c\u1eeda","Admin \u0111\xe3 y\xeau c\u1ea7u m\u1edf c\u1eeda kh\u1ea9n c\u1ea5p","Admin \u0111\xe3 y\xeau c\u1ea7u m\u1edf c\u1eeda kh\u1ea9n c\u1ea5p","Admin \u0111\xe3 y\xeau c\u1ea7u m\u1edf c\u1eeda kh\u1ea9n c\u1ea5p","Admin \u0111\xe3 y\xeau c\u1ea7u m\u1edf c\u1eeda kh\u1ea9n c\u1ea5p","Admin \u0111\xe3 y\xeau c\u1ea7u m\u1edf c\u1eeda kh\u1ea9n c\u1ea5p","Admin \u0111\xe3 y\xeau c\u1ea7u m\u1edf c\u1eeda kh\u1ea9n c\u1ea5p","Admin \u0111\xe3 y\xeau c\u1ea7u m\u1edf c\u1eeda kh\u1ea9n c\u1ea5p","Admin \u0111\xe3 y\xeau c\u1ea7u m\u1edf c\u1eeda kh\u1ea9n c\u1ea5p","Admin \u0111\xe3 y\xeau c\u1ea7u m\u1edf c\u1eeda kh\u1ea9n c\u1ea5p"]),2),n=e[0],r=(e[1],Me((0,t.useState)("1"),2)),i=r[0],a=(r[1],Me((0,t.useState)("0"),2)),o=a[0],u=(a[1],n.map((function(e){return(0,x.jsx)(kC,{message:e})})));return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(fC,{}),(0,x.jsx)("div",{className:"main",children:(0,x.jsxs)("div",{className:"main-container",children:[(0,x.jsx)("div",{className:"video",children:(0,x.jsx)(dC.J5,{playsInline:!0,poster:"/assets/poster.png",src:"https://media.w3.org/2010/05/sintel/trailer_hd.mp4"})}),(0,x.jsxs)("div",{className:"info",children:[(0,x.jsxs)("div",{className:"door",children:["State of door:  ",(0,x.jsx)(bC,{option:i})]}),(0,x.jsxs)("div",{className:"bulb",children:["State of bulb:  ",(0,x.jsx)(wC,{option:o})]})]}),(0,x.jsxs)("div",{className:"control",children:[(0,x.jsx)(gC,{variant:"danger",className:"btn-1",children:"Emergency open"}),(0,x.jsx)("input",{type:"checkbox",className:"toggle",id:"rounded"}),(0,x.jsx)("label",{for:"rounded","data-checked":"Manual",className:"round","data-unchecked":"Auto"}),(0,x.jsx)(gC,{variant:"info",className:"btn-1",children:"Bulb switcher"})]}),(0,x.jsxs)("div",{className:"chatbox input",children:[(0,x.jsx)("div",{className:"title",children:"HISTORY REQUEST"}),(0,x.jsx)("div",{className:"scroll-bar",children:u})]})]})})]})}var EC="undefined"!==typeof n.g&&n.g.navigator&&"ReactNative"===n.g.navigator.product;"undefined"!==typeof document||EC?t.useLayoutEffect:t.useEffect,new WeakMap;var _C=["onKeyDown"];var IC=t.forwardRef((function(e,t){var n,r=e.onKeyDown,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,_C),a=Me(pC(Object.assign({tagName:"a"},i)),1)[0],o=Ce((function(e){a.onKeyDown(e),null==r||r(e)}));return((n=i.href)&&"#"!==n.trim()||i.role)&&"button"!==i.role?(0,x.jsx)("a",Object.assign({ref:t},i,{onKeyDown:r})):(0,x.jsx)("a",Object.assign({ref:t},i,a,{onKeyDown:o}))}));IC.displayName="Anchor";var TC=IC,SC=["bsPrefix","show","closeLabel","closeVariant","className","children","variant","onClose","dismissible","transition"],CC=St("h4");CC.displayName="DivStyledAsH4";var NC=C("alert-heading",{Component:CC}),PC=C("alert-link",{Component:TC}),AC={variant:"primary",show:!0,transition:st,closeLabel:"Close alert"},OC=t.forwardRef((function(e,t){var n=m(e,{show:"onClose"}),r=n.bsPrefix,i=n.show,a=n.closeLabel,o=n.closeVariant,u=n.className,c=n.children,f=n.variant,h=n.onClose,p=n.dismissible,v=n.transition,y=l(n,SC),g=I(r,"alert"),k=Ce((function(e){h&&h(!1,e)})),b=!0===v?st:v,w=(0,x.jsxs)("div",(0,s.Z)((0,s.Z)({role:"alert"},b?void 0:y),{},{ref:t,className:d()(u,g,f&&"".concat(g,"-").concat(f),p&&"".concat(g,"-dismissible")),children:[p&&(0,x.jsx)(bt,{onClick:k,"aria-label":a,variant:o}),c]}));return b?(0,x.jsx)(b,(0,s.Z)((0,s.Z)({unmountOnExit:!0},y),{},{ref:void 0,in:i,children:w})):i?w:null}));OC.displayName="Alert",OC.defaultProps=AC;var RC=Object.assign(OC,{Link:PC,Heading:NC}),DC=["as","className","type","tooltip"],LC={type:yt().string,tooltip:yt().bool,as:yt().elementType},MC=t.forwardRef((function(e,t){var n=e.as,r=void 0===n?"div":n,i=e.className,a=e.type,o=void 0===a?"valid":a,u=e.tooltip,c=void 0!==u&&u,f=l(e,DC);return(0,x.jsx)(r,(0,s.Z)((0,s.Z)({},f),{},{ref:t,className:d()(i,"".concat(o,"-").concat(c?"tooltip":"feedback"))}))}));MC.displayName="Feedback",MC.propTypes=LC;var FC=MC,UC=t.createContext({}),jC=["id","bsPrefix","className","type","isValid","isInvalid","as"],VC=t.forwardRef((function(e,n){var r=e.id,i=e.bsPrefix,a=e.className,o=e.type,u=void 0===o?"checkbox":o,c=e.isValid,f=void 0!==c&&c,h=e.isInvalid,p=void 0!==h&&h,v=e.as,y=void 0===v?"input":v,m=l(e,jC),g=(0,t.useContext)(UC).controlId;return i=I(i,"form-check-input"),(0,x.jsx)(y,(0,s.Z)((0,s.Z)({},m),{},{ref:n,type:u,id:r||g,className:d()(a,i,f&&"is-valid",p&&"is-invalid")}))}));VC.displayName="FormCheckInput";var BC=VC,qC=["bsPrefix","className","htmlFor"],zC=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.className,a=e.htmlFor,o=l(e,qC),u=(0,t.useContext)(UC).controlId;return r=I(r,"form-check-label"),(0,x.jsx)("label",(0,s.Z)((0,s.Z)({},o),{},{ref:n,htmlFor:a||u,className:d()(i,r)}))}));zC.displayName="FormCheckLabel";var KC=zC;var HC=["id","bsPrefix","bsSwitchPrefix","inline","disabled","isValid","isInvalid","feedbackTooltip","feedback","feedbackType","className","style","title","type","label","children","as"],WC=t.forwardRef((function(e,n){var r=e.id,i=e.bsPrefix,a=e.bsSwitchPrefix,o=e.inline,u=void 0!==o&&o,c=e.disabled,f=void 0!==c&&c,h=e.isValid,p=void 0!==h&&h,v=e.isInvalid,y=void 0!==v&&v,m=e.feedbackTooltip,g=void 0!==m&&m,k=e.feedback,b=e.feedbackType,w=e.className,E=e.style,_=e.title,T=void 0===_?"":_,S=e.type,C=void 0===S?"checkbox":S,N=e.label,P=e.children,A=e.as,O=void 0===A?"input":A,R=l(e,HC);i=I(i,"form-check"),a=I(a,"form-switch");var D=(0,t.useContext)(UC).controlId,L=(0,t.useMemo)((function(){return{controlId:r||D}}),[D,r]),M=!P&&null!=N&&!1!==N||function(e,n){return t.Children.toArray(e).some((function(e){return t.isValidElement(e)&&e.type===n}))}(P,KC),F=(0,x.jsx)(BC,(0,s.Z)((0,s.Z)({},R),{},{type:"switch"===C?"checkbox":C,ref:n,isValid:p,isInvalid:y,disabled:f,as:O}));return(0,x.jsx)(UC.Provider,{value:L,children:(0,x.jsx)("div",{style:E,className:d()(w,M&&i,u&&"".concat(i,"-inline"),"switch"===C&&a),children:P||(0,x.jsxs)(x.Fragment,{children:[F,M&&(0,x.jsx)(KC,{title:T,children:N}),k&&(0,x.jsx)(FC,{type:b,tooltip:g,children:k})]})})})}));WC.displayName="FormCheck";var GC=Object.assign(WC,{Input:BC,Label:KC}),ZC=(n(2391),["bsPrefix","type","size","htmlSize","id","className","isValid","isInvalid","plaintext","readOnly","as"]),QC=t.forwardRef((function(e,n){var r,i,a=e.bsPrefix,o=e.type,u=e.size,c=e.htmlSize,f=e.id,h=e.className,p=e.isValid,v=void 0!==p&&p,y=e.isInvalid,m=void 0!==y&&y,g=e.plaintext,k=e.readOnly,b=e.as,w=void 0===b?"input":b,E=l(e,ZC),_=(0,t.useContext)(UC).controlId;(a=I(a,"form-control"),g)?r=(0,O.Z)({},"".concat(a,"-plaintext"),!0):(i={},(0,O.Z)(i,a,!0),(0,O.Z)(i,"".concat(a,"-").concat(u),u),r=i);return(0,x.jsx)(w,(0,s.Z)((0,s.Z)({},E),{},{type:o,size:c,ref:n,readOnly:k,id:f||_,className:d()(h,r,v&&"is-valid",m&&"is-invalid","color"===o&&"".concat(a,"-color"))}))}));QC.displayName="FormControl";var YC=Object.assign(QC,{Feedback:FC}),$C=C("form-floating"),JC=["controlId","as"],XC=t.forwardRef((function(e,n){var r=e.controlId,i=e.as,a=void 0===i?"div":i,o=l(e,JC),u=(0,t.useMemo)((function(){return{controlId:r}}),[r]);return(0,x.jsx)(UC.Provider,{value:u,children:(0,x.jsx)(a,(0,s.Z)((0,s.Z)({},o),{},{ref:n}))})}));XC.displayName="FormGroup";var eN=XC,tN=["as","bsPrefix","className"],nN=["className"];function rN(e){var n=e.as,r=e.bsPrefix,i=e.className,a=l(e,tN);r=I(r,"col");var o=(0,t.useContext)(_).breakpoints,u=[],c=[];return o.forEach((function(e){var t,n,i,o=a[e];delete a[e],"object"===typeof o&&null!=o?(t=o.span,n=o.offset,i=o.order):t=o;var s="xs"!==e?"-".concat(e):"";t&&u.push(!0===t?"".concat(r).concat(s):"".concat(r).concat(s,"-").concat(t)),null!=i&&c.push("order".concat(s,"-").concat(i)),null!=n&&c.push("offset".concat(s,"-").concat(n))})),[(0,s.Z)((0,s.Z)({},a),{},{className:d().apply(void 0,[i].concat(u,c))}),{as:n,bsPrefix:r,spans:u}]}var iN=t.forwardRef((function(e,t){var n=Me(rN(e),2),r=n[0],i=r.className,a=l(r,nN),o=n[1],u=o.as,c=void 0===u?"div":u,f=o.bsPrefix,h=o.spans;return(0,x.jsx)(c,(0,s.Z)((0,s.Z)({},a),{},{ref:t,className:d()(i,!h.length&&f)}))}));iN.displayName="Col";var aN=iN,oN=["as","bsPrefix","column","visuallyHidden","className","htmlFor"],uN=t.forwardRef((function(e,n){var r=e.as,i=void 0===r?"label":r,a=e.bsPrefix,o=e.column,u=e.visuallyHidden,c=e.className,f=e.htmlFor,h=l(e,oN),p=(0,t.useContext)(UC).controlId;a=I(a,"form-label");var v="col-form-label";"string"===typeof o&&(v="".concat(v," ").concat(v,"-").concat(o));var y=d()(c,a,u&&"visually-hidden",o&&v);return f=f||p,o?(0,x.jsx)(aN,(0,s.Z)({ref:n,as:"label",className:y,htmlFor:f},h)):(0,x.jsx)(i,(0,s.Z)({ref:n,className:y,htmlFor:f},h))}));uN.displayName="FormLabel",uN.defaultProps={column:!1,visuallyHidden:!1};var sN=uN,cN=["bsPrefix","className","id"],lN=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.className,a=e.id,o=l(e,cN),u=(0,t.useContext)(UC).controlId;return r=I(r,"form-range"),(0,x.jsx)("input",(0,s.Z)((0,s.Z)({},o),{},{type:"range",ref:n,className:d()(i,r),id:a||u}))}));lN.displayName="FormRange";var fN=lN,dN=["bsPrefix","size","htmlSize","className","isValid","isInvalid","id"],hN=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.size,a=e.htmlSize,o=e.className,u=e.isValid,c=void 0!==u&&u,f=e.isInvalid,h=void 0!==f&&f,p=e.id,v=l(e,dN),y=(0,t.useContext)(UC).controlId;return r=I(r,"form-select"),(0,x.jsx)("select",(0,s.Z)((0,s.Z)({},v),{},{size:a,ref:n,className:d()(o,r,i&&"".concat(r,"-").concat(i),c&&"is-valid",h&&"is-invalid"),id:p||y}))}));hN.displayName="FormSelect";var pN=hN,vN=["bsPrefix","className","as","muted"],yN=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.as,a=void 0===i?"small":i,o=e.muted,u=l(e,vN);return n=I(n,"form-text"),(0,x.jsx)(a,(0,s.Z)((0,s.Z)({},u),{},{ref:t,className:d()(r,n,o&&"text-muted")}))}));yN.displayName="FormText";var mN=yN,gN=t.forwardRef((function(e,t){return(0,x.jsx)(GC,(0,s.Z)((0,s.Z)({},e),{},{ref:t,type:"switch"}))}));gN.displayName="Switch";var kN=Object.assign(gN,{Input:GC.Input,Label:GC.Label}),bN=["bsPrefix","className","children","controlId","label"],wN=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.children,a=e.controlId,o=e.label,u=l(e,bN);return n=I(n,"form-floating"),(0,x.jsxs)(eN,(0,s.Z)((0,s.Z)({ref:t,className:d()(r,n),controlId:a},u),{},{children:[i,(0,x.jsx)("label",{htmlFor:a,children:o})]}))}));wN.displayName="FloatingLabel";var xN=wN,EN=["className","validated","as"],_N={_ref:yt().any,validated:yt().bool,as:yt().elementType},IN=t.forwardRef((function(e,t){var n=e.className,r=e.validated,i=e.as,a=void 0===i?"form":i,o=l(e,EN);return(0,x.jsx)(a,(0,s.Z)((0,s.Z)({},o),{},{ref:t,className:d()(n,r&&"was-validated")}))}));IN.displayName="Form",IN.propTypes=_N;var TN=Object.assign(IN,{Group:eN,Control:YC,Floating:$C,Check:GC,Switch:kN,Label:sN,Text:mN,Range:fN,Select:pN,FloatingLabel:xN});function SN(){var e=(0,t.useRef)(),n=(0,t.useRef)(),r=cC().login,i=Me((0,t.useState)(""),2),o=i[0],s=i[1],c=Me((0,t.useState)(!1),2),l=c[0],f=c[1],d=Tn();function h(){return(h=a(u().mark((function t(i){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i.preventDefault(),t.prev=1,s(""),f(!0),t.next=6,r(e.current.value,n.current.value);case 6:d("/"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),s("Failed to log in");case 12:f(!1);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})))).apply(this,arguments)}return(0,x.jsx)("section",{className:"vh-100 gradient-custom",children:(0,x.jsx)("div",{className:"container py-5 h-100",children:(0,x.jsx)("div",{className:"row d-flex justify-content-center align-items-center h-100",children:(0,x.jsx)("div",{className:"col-12 col-md-8 col-lg-6 col-xl-5",children:(0,x.jsx)("div",{className:"card bg-dark text-white",children:(0,x.jsx)("div",{className:"card-body p-5 text-center",children:(0,x.jsxs)("div",{className:"mb-md-3 mt-md-4",children:[(0,x.jsx)("h2",{className:"fw-bold mb-2 text-uppercase",children:"\u0110\u0103ng nh\u1eadp"}),(0,x.jsx)("p",{className:"text-white-50 mb-5",children:"H\xe3y \u0111i\u1ec1n t\xe0i kho\u1ea3n v\xe0 m\u1eadt kh\u1ea9u c\u1ee7a b\u1ea1n!"}),o&&(0,x.jsx)(RC,{variant:"danger",children:o}),(0,x.jsxs)(TN,{onSubmit:function(e){return h.apply(this,arguments)},children:[(0,x.jsx)("div",{className:"form-outline form-white mb-4",children:(0,x.jsx)("input",{type:"email",className:"form-control form-control-lg",ref:e,placeholder:"T\xe0i kho\u1ea3n",required:!0})}),(0,x.jsx)("div",{className:"form-outline form-white mb-4",children:(0,x.jsx)("input",{type:"password",className:"form-control form-control-lg",placeholder:"M\u1eadt kh\u1ea9u",ref:n,required:!0})}),(0,x.jsx)("button",{disabled:l,className:"btn btn-outline-light btn-lg px-5",type:"submit",children:"\u0110\u0103ng nh\u1eadp"})]}),(0,x.jsx)("p",{className:"small mt-5 "})]})})})})})})})}function CN(e){var t=e.children;return cC().currentUser?t:(0,x.jsx)(bn,{to:"/login",replace:!0})}var NN=function(){return(0,x.jsx)(lC,{children:(0,x.jsxs)(En,{children:[(0,x.jsx)(wn,{path:"/",exact:!0,element:(0,x.jsx)(CN,{children:(0,x.jsx)(xC,{})})}),(0,x.jsx)(wn,{path:"/login",element:(0,x.jsx)(SN,{}),children:" "})]})})};function PN(e){var n=e.basename,r=e.children,i=e.window,a=(0,t.useRef)();null==a.current&&(a.current=function(e){void 0===e&&(e={});var t=e.window,n=void 0===t?document.defaultView:t,r=n.history;function i(){var e=n.location,t=e.pathname,i=e.search,a=e.hash,o=r.state||{};return[o.idx,sn({pathname:t,search:i,hash:a,state:o.usr||null,key:o.key||"default"})]}var a=null;n.addEventListener(ln,(function(){if(a)f.call(a),a=null;else{var e=rn.Pop,t=i(),n=t[0],r=t[1];if(f.length){if(null!=n){var o=s-n;o&&(a={action:e,location:r,retry:function(){g(-1*o)}},g(o))}}else m(e)}}));var o=rn.Pop,u=i(),s=u[0],c=u[1],l=dn(),f=dn();function d(e){return"string"===typeof e?e:pn(e)}function h(e,t){return void 0===t&&(t=null),sn(p({pathname:c.pathname,hash:"",search:""},"string"===typeof e?vn(e):e,{state:t,key:hn()}))}function v(e,t){return[{usr:e.state,key:e.key,idx:t},d(e)]}function y(e,t,n){return!f.length||(f.call({action:e,location:t,retry:n}),!1)}function m(e){o=e;var t=i();s=t[0],c=t[1],l.call({action:o,location:c})}function g(e){r.go(e)}null==s&&(s=0,r.replaceState(p({},r.state,{idx:s}),""));var k={get action(){return o},get location(){return c},createHref:d,push:function e(t,i){var a=rn.Push,o=h(t,i);if(y(a,o,(function(){e(t,i)}))){var u=v(o,s+1),c=u[0],l=u[1];try{r.pushState(c,"",l)}catch(f){n.location.assign(l)}m(a)}},replace:function e(t,n){var i=rn.Replace,a=h(t,n);if(y(i,a,(function(){e(t,n)}))){var o=v(a,s),u=o[0],c=o[1];r.replaceState(u,"",c),m(i)}},go:g,back:function(){g(-1)},forward:function(){g(1)},listen:function(e){return l.push(e)},block:function(e){var t=f.push(e);return 1===f.length&&n.addEventListener(cn,fn),function(){t(),f.length||n.removeEventListener(cn,fn)}}};return k}({window:i}));var o=a.current,u=Me((0,t.useState)({action:o.action,location:o.location}),2),s=u[0],c=u[1];return(0,t.useLayoutEffect)((function(){return o.listen(c)}),[o]),(0,t.createElement)(xn,{basename:n,children:r,location:s.location,navigationType:s.action,navigator:o})}r.render((0,x.jsx)(PN,{children:(0,x.jsx)(NN,{})}),document.getElementById("root"))}()}();
//# sourceMappingURL=main.9bd24247.js.map